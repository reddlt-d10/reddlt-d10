(window.webpackJsonp=window.webpackJsonp||[]).push([["Chat~RedesignChat"],{"./src/chat/actions/apiRequestHeaders.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("./src/lib/makeActionCreator/index.ts"),a="API_REQUEST_HEADERS__set";Object(r.a)(a)},"./src/chat/actions/channel.ts":function(e,t,n){"use strict";n.d(t,"f",function(){return B}),n.d(t,"d",function(){return K}),n.d(t,"e",function(){return G}),n.d(t,"p",function(){return F}),n.d(t,"o",function(){return V}),n.d(t,"q",function(){return z}),n.d(t,"g",function(){return q}),n.d(t,"c",function(){return Q}),n.d(t,"w",function(){return J}),n.d(t,"x",function(){return W}),n.d(t,"y",function(){return Y}),n.d(t,"u",function(){return Z}),n.d(t,"j",function(){return X}),n.d(t,"k",function(){return $}),n.d(t,"h",function(){return ee}),n.d(t,"i",function(){return te}),n.d(t,"a",function(){return ne}),n.d(t,"b",function(){return re}),n.d(t,"t",function(){return ae}),n.d(t,"r",function(){return ce}),n.d(t,"m",function(){return se}),n.d(t,"v",function(){return ie}),n.d(t,"n",function(){return oe}),n.d(t,"l",function(){return ue}),n.d(t,"s",function(){return de}),n.d(t,"M",function(){return le}),n.d(t,"L",function(){return he}),n.d(t,"z",function(){return pe}),n.d(t,"D",function(){return Oe}),n.d(t,"T",function(){return ge}),n.d(t,"S",function(){return Ce}),n.d(t,"R",function(){return ke}),n.d(t,"O",function(){return De}),n.d(t,"K",function(){return Me}),n.d(t,"C",function(){return Pe}),n.d(t,"B",function(){return Ue}),n.d(t,"I",function(){return Be}),n.d(t,"P",function(){return Ve}),n.d(t,"F",function(){return Ze}),n.d(t,"G",function(){return $e}),n.d(t,"H",function(){return et}),n.d(t,"E",function(){return nt}),n.d(t,"A",function(){return rt}),n.d(t,"N",function(){return at}),n.d(t,"J",function(){return ct}),n.d(t,"Q",function(){return ot});var r=n("./node_modules/babel-runtime/helpers/defineProperty.js"),a=n.n(r),c=n("./node_modules/babel-runtime/regenerator/index.js"),s=n.n(c),i=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),o=n.n(i),u=n("./node_modules/lodash/isEqual.js"),d=n.n(u),l=n("./node_modules/react-router-redux/es/index.js"),b=n("./src/lib/makeActionCreator/index.ts"),h=n("./src/chat/actions/channel/subreddit.ts"),f=n("./src/chat/actions/members.ts"),p=n("./src/chat/actions/message/index.ts"),m=n("./src/chat/actions/message/unreadCount.ts"),O=n("./src/chat/actions/tracking.ts"),j=n("./src/chat/actions/user.ts"),v=n("./src/chat/actions/sidebar.ts"),g=n("./src/chat/constants/batchSizes.ts"),y=n("./src/chat/constants/channels.ts"),x=n("./src/chat/constants/sendbird.ts"),_=n("./src/chat/endpoints/sendbird/index.ts"),E=n("./src/chat/helpers/errors.ts"),C=n("./src/chat/helpers/urls/index.ts"),I=n("./src/chat/models/Channel/index.ts"),w=n("./src/chat/models/Channel/platform.ts"),k=n("./src/chat/models/Channel/utils.ts"),S=n("./src/chat/models/Message/index.ts"),N=n("./src/chat/models/Subreddit/index.ts"),T=n("./src/chat/selectors/channels.ts"),D=n("./src/chat/selectors/channels/next.tsx"),M=n("./src/chat/selectors/experiments.ts"),A=n("./src/chat/selectors/platform.ts"),L=n("./src/chat/selectors/promos.ts"),R=n("./src/chat/selectors/sidebar.ts"),H=n("./src/chat/selectors/subreddit.ts"),P=n("./src/chat/singleton/SendbirdSDK.ts"),U=void 0,B="CHANNEL__ADD_SUCCESS",K="CHANNEL__ADD_FAIL",G="CHANNEL__CREATE_CHANNEL_START",F="CHANNEL__SELECT_BEGIN",V="CHANNEL__RESET_UNREAD_COUNT",z="CHANNEL__SELECT_END",q="CHANNEL__EXPAND_INVITE_LIST",Q="CHANNEL__COLLAPSE_INVITE_LIST",J="CHANNEL__UPDATE_MODEL",W="CHANNEL__INVITED_UPDATE",Y="CHANNEL__JOINED_UPDATE",Z="CHANNEL__SET_UPDATED_CHANNEL_ON_TOP",X="CHANNEL__FETCHING_JOINED_CHANNELS",$="CHANNEL__FETCHING_JOINED_CHANNELS_FAILED",ee="CHANNEL__FETCHING_INVITED_CHANNELS",te="CHANNEL__FETCHING_INVITED_CHANNELS_FAILED",ne="CHANNEL__ADD_EXISTING_INVITED_CHANNELS",re="CHANNEL__ADD_EXISTING_JOINED_CHANNELS",ae="CHANNEL__SET_INVITED_CHANNEL_TO_JOINED",ce="CHANNEL__SET_EXISTING_CHANNELS_END",se="CHANNEL__REMOVE_CHANNEL",ie="CHANNEL__UNSORT_CHANNEL",oe="CHANNEL__RESET_CHANNEL_MESSAGE_LIST",ue="CHANNEL__FETCH_FIRST_MESSAGE",de="CHANNEL__SET_FIRST_MESSAGE_ID",le=Object(b.a)(se),be=Object(b.a)(ie),he=function(e,t){return n=o()(s.a.mark(function n(r,a){var c,i;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:c=a(),i=Object(T.L)(c,e),r(i?be({channelId:e,subredditName:t}):le({channelId:e,subredditName:t}));case 3:case"end":return n.stop()}},n,U)})),function(e,t){return n.apply(this,arguments)};var n},fe=Object(b.a)(ae),pe=function(e){return t=o()(s.a.mark(function t(n,r){var a,c,i,o,u,d,b,h,f;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r(),c=a.channels.selected,i=a.contacts.models,o=e||c.channelId){t.next=5;break}throw new E.a("accepted channelId",e);case 5:if(u=Object(T.k)(a),d=u&&u.firstMessageId,b=!!(u&&d&&u.hasMoreMessages),h=Object(T.b)(a,i),f=Object(L.a)(a),!h||!f){t.next=13;break}return n(Object(l.b)(Object(C.b)(o,y.a.VIEW_NSFW_CONFIRMATION))),t.abrupt("return");case 13:return t.next=15,P.b.acceptChannelInvite().then(function(){return b&&n(Object(p.p)(d))}).then(function(){return n(fe({channelId:o}))}).then(function(){return n(Object(l.b)(Object(C.c)(o)))});case 15:case"end":return t.stop()}},t,U)})),function(e,n){return t.apply(this,arguments)};var t},me=function(e,t){return n=o()(s.a.mark(function n(r){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",r(he(e,t)));case 1:case"end":return n.stop()}},n,U)})),function(e){return n.apply(this,arguments)};var n},Oe=function(e){return t=o()(s.a.mark(function t(n,r){var a,c,i,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r(),c=Object(T.B)(a,"channelState"),i=Object(T.B)(a,"channelId"),o=a.channels.models[i],i){t.next=6;break}throw new E.a("declinedChannelId",i);case 6:if(c){t.next=8;break}throw new E.a("declinedChannelType",c);case 8:return t.prev=8,t.next=11,P.b.declineChannelInvite();case 11:t.next=16;break;case 13:return t.prev=13,t.t0=t.catch(8),t.abrupt("return",Object(E.b)("Error declining channel: "+t.t0.message));case 16:n(Me(i)),n(me(i,e)),n(Ke(o.channelState));case 19:case"end":return t.stop()}},t,U,[[8,13]])})),function(e,n){return t.apply(this,arguments)};var t},je=Object(b.a)(W),ve=Object(b.a)(Y),ge=Object(b.a)(J),ye=function(e){return t=o()(s.a.mark(function t(n,r){var a,c;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=r().user.account.id,c=e.members.filter(function(e){return e.id!==a}).map(function(e){return e.id}),n(Object(j.w)(c));case 3:case"end":return t.stop()}},t,U)})),function(e,n){return t.apply(this,arguments)};var t},xe=function(e){if(e.type===I.a.Subreddit){var t=e.customData.subreddit;return t&&t.name}},_e=function(e){return t=o()(s.a.mark(function t(n){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.type!==I.a.Subreddit){t.next=7;break}return r=Object(N.c)([e]),t.next=4,n(Object(h.o)(r));case 4:n(Object(h.w)({channel:e})),t.next=10;break;case 7:return t.next=9,n(je({channel:e}));case 9:n(ye(e));case 10:case"end":return t.stop()}},t,U)})),function(e){return t.apply(this,arguments)};var t},Ee=function(e){return t=o()(s.a.mark(function t(n,r){var a,c,i,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r(),c=e.channelId,i=xe(e),!(o=Object(T.x)(a))||o.channelId!==e.channelId){t.next=10;break}return t.next=7,n(le({channelId:c,subredditName:i}));case 7:return t.next=9,n(ge({channel:e}));case 9:n(Ke(o.channelState));case 10:case"end":return t.stop()}},t,U)})),function(e,n){return t.apply(this,arguments)};var t},Ce=function(e,t){return n=o()(s.a.mark(function n(r,a){var c,i;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=23;break}if(c=a(),i=Object(T.h)(c,e.channelId),(e.channelState===y.b.INVITED||i)&&!t){n.next=5;break}return n.abrupt("return");case 5:if(e=Ie(c,e),!d()(e,i)){n.next=8;break}return n.abrupt("return");case 8:n.t0=e.channelState,n.next=n.t0===y.b.INVITED?11:n.t0===y.b.UNSORTED?14:n.t0===y.b.JOINED?17:20;break;case 11:return n.next=13,r(_e(e));case 13:return n.abrupt("break",22);case 14:return n.next=16,r(Ee(e));case 16:return n.abrupt("break",22);case 17:return n.next=19,r(ve({channel:e}));case 19:return n.abrupt("break",22);case 20:return Object(E.b)("Error updating channel. ChannelState not found."),n.abrupt("break",22);case 22:r(Object(m.b)());case 23:case"end":return n.stop()}},n,U)})),function(e,t){return n.apply(this,arguments)};var n},Ie=function(e,t){var n=Object(A.d)(e),r=Object(T.h)(e,t.channelId),a=n===t.channelId,c=t.type===I.a.Subreddit;return a&&(t.unreadMessageCount=0),!a&&c&&(t.unreadMessageCount=t.unreadMessageCount?1:0),r&&c&&(t.lastMessage=r.lastMessage,t.isMessageListLoaded=r.isMessageListLoaded,t.hasMoreMessages=r.hasMoreMessages),t},we=Object(b.a)(Z),ke=function(e){return t=o()(s.a.mark(function t(n,r){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.channelId,e.type!==I.a.Subreddit&&n(we({channelId:a}));case 2:case"end":return t.stop()}},t,U)})),function(e,n){return t.apply(this,arguments)};var t},Se=Object(b.a)(V),Ne=Object(b.a)(F),Te=Object(b.a)(z),De=function(){return e=o()(s.a.mark(function e(t,n){var r,a,c,i,o,u,d,b,h,m,O,j,g,_,E,I,w;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),a=Object(A.d)(r),c=Object(A.c)(r),i=y.a.DENY,o=y.a.VIEW_JOIN,r.platform.currentPage){e.next=6;break}return e.abrupt("return");case 6:if(u=r.sidebarTabs.activeIndex,a&&t(Object(v.e)({channelId:a,tabIndex:u})),d=a&&Object(T.h)(r,a),b=d&&Object(H.b)(r,d.channelId),h=b&&b.name||void 0,d||c!==i){e.next=13;break}return e.abrupt("return");case 13:if(m=!(!d||d.channelState!==y.b.UNSORTED),!(O=!(!a||!Object(T.M)(r,a)))&&!m){e.next=19;break}if(!d||c){e.next=19;break}return t(Object(l.b)(Object(C.b)(d.channelId,o,h))),e.abrupt("return");case 19:if(j=!(!d||d.channelState!==y.b.JOINED),!d||!j){e.next=24;break}if(!c||!y.g.includes(c)){e.next=24;break}return t(Object(l.b)(Object(C.c)(d.channelId,h))),e.abrupt("return");case 24:if(!d||!a){e.next=44;break}return t(Ne({channelId:a})),g=O||m,e.next=29,P.b.enterChannel(d,!1,g);case 29:if(!(_=e.sent)||_.error){e.next=40;break}return E=_.data.messageListData,e.next=34,t(Object(p.m)(E));case 34:return e.next=36,t(Te());case 36:t(Me(a)),t(Object(f.f)()),e.next=42;break;case 40:t(Object(p.y)()),t(Te());case 42:e.next=54;break;case 44:if(I=r.sendbird.sdk.connectionStatus===x.b.Open,d||!a||!I){e.next=52;break}return e.next=48,P.b.addChannelModelByChannelId(a);case 48:if(!(w=e.sent)||c){e.next=52;break}return t(Object(l.b)(Object(C.b)(w.channelId,o,h))),e.abrupt("return");case 52:t(Ve()),t(Object(p.y)());case 54:case"end":return e.stop()}},e,U)})),function(t,n){return e.apply(this,arguments)};var e},Me=(Object(b.a)("MESSAGE__MARK_AS_READ"),function(e){return t=o()(s.a.mark(function t(n,r){var a,c;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r(),!(c=e||Object(A.d)(a))){t.next=8;break}return t.next=5,n(Se(c));case 5:return t.next=7,P.b.markChannelAsRead();case 7:n(Object(m.b)());case 8:case"end":return t.stop()}},t,U)})),function(e,n){return t.apply(this,arguments)};var t}),Ae=Object(b.a)(G),Le=Object(b.a)(B),Re=Object(b.a)(K),He=function(e,t,n){var r=e.map(function(e){return{user_id:e,nickname:t[e].name}});if(n){var a=n.id,c=n.name;-1===r.findIndex(function(e){return e.user_id===a})&&r.unshift({user_id:a,nickname:c})}return r},Pe=function(e,t,n){return r=o()(s.a.mark(function r(c,i,o){var u,d,b,h,f,p,m,j,v,g,x,E,I,k=o.apiContext;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(u=i(),d=u.user,b=d.account,h=d.session,f=u.contacts.models,p=u.channels,m=p.joined,j=p.invited,!b||!h){r.next=31;break}if(c(Ae()),!((v=He(e,f,b)).length<2)){r.next=7;break}return r.abrupt("return");case 7:return r.next=9,Object(_.c)(k(),h,v,t);case 9:if(!(g=r.sent).ok){r.next=29;break}if(x=g.body,E=Object(w.a)(x,y.b.JOINED),I=E.channelId,!j.sortedKeys.includes(I)){r.next=19;break}c(pe(I)),c(Object(O.h)(e,I)),r.next=27;break;case 19:if(!m.sortedKeys.includes(I)){r.next=23;break}n&&(c(Object(l.b)(Object(C.c)(I))),c(Object(O.h)(e,I))),r.next=27;break;case 23:return r.next=25,c(Le(a()({},I,E)));case 25:c(Object(O.h)(e,I)),n&&c(Object(l.b)(Object(C.c)(I)));case 27:r.next=31;break;case 29:c(Re()),c(Object(O.x)(e));case 31:case"end":return r.stop()}},r,U)})),function(e,t,n){return r.apply(this,arguments)};var r},Ue=function(e,t){return n=o()(s.a.mark(function n(r,a){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.length>1&&(e=[e[0]]),n.next=3,r(Object(j.w)(e));case 3:r(Pe(e,t,!0));case 4:case"end":return n.stop()}},n,U)})),function(e,t){return n.apply(this,arguments)};var n},Be=function(e){return t=o()(s.a.mark(function t(n,r,a){var c,i,o,u,d,b,h,f=a.apiContext;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c=r(),i=c.user,o=i.account,u=i.session,d=c.contacts.models,b=Object(T.B)(c,"channelSendbirdUrl"),!o||!u){t.next=9;break}return h=He(e,d),t.next=7,Object(_.i)(f(),u,h,b);case 7:t.sent.body?(n(Object(O.b)()),n(Object(l.a)())):Object(E.b)("Error inviting user to existing channel");case 9:case"end":return t.stop()}},t,U)})),function(e,n,r){return t.apply(this,arguments)};var t},Ke=function(e){return t=o()(s.a.mark(function t(n,r){var a,c,i,o,u,d,l,b;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r(),c=Object(R.b)(a),i=e===y.b.INVITED,o=Object(D.d)(a),u=Object(D.f)(a),d=Object(D.g)(a),l=Object(D.c)(a),b=Object(D.e)(a),!(c&&i&&Object(M.b)(a))){t.next=11;break}return o.channelId?n(Fe(o)):n(Fe(u)),t.abrupt("return");case 11:if(!c||i||!Object(M.b)(a)){t.next=14;break}return u.channelId?n(Fe(u)):n(Fe(d)),t.abrupt("return");case 14:if(c||!i){t.next=17;break}return l.channelId?n(Fe(l)):n(Fe(b)),t.abrupt("return");case 17:if(c||i){t.next=20;break}return b.channelId?n(Fe(b)):n(Ge()),t.abrupt("return");case 20:n(Ge());case 21:case"end":return t.stop()}},t,U)})),function(e,n){return t.apply(this,arguments)};var t},Ge=function(){return e=o()(s.a.mark(function e(t,n){var r,a,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(r=n()).channels.firstLoaded&&(a=!!r.platform.currentPage,c=Object(D.b)(r,a),t(Fe(c)));case 2:case"end":return e.stop()}},e,U)})),function(t,n){return e.apply(this,arguments)};var e},Fe=function(e){return t=o()(s.a.mark(function t(n,r){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!e.channelId){t.next=3;break}return e.channelAction?n(Object(l.c)(Object(C.b)(e.channelId,e.channelAction,e.subredditName))):n(Object(l.c)(Object(C.c)(e.channelId,e.subredditName))),t.abrupt("return");case 3:n(Object(l.c)(C.i));case 4:case"end":return t.stop()}},t,U)})),function(e,n){return t.apply(this,arguments)};var t},Ve=function(e){return t=o()(s.a.mark(function t(n,r){var a,c,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r(),!(c=a.platform.currentPage)||!c.urlParams.userIds){t.next=4;break}return i=c.urlParams.userIds.split(","),t.abrupt("return",n(Ue(i,name)));case 4:if(!e){t.next=6;break}return t.abrupt("return",n(Ke(e)));case 6:return t.abrupt("return",n(Ge()));case 7:case"end":return t.stop()}},t,U)})),function(e,n){return t.apply(this,arguments)};var t},ze=Object(b.a)(ee),qe=Object(b.a)(te),Qe=Object(b.a)(X),Je=Object(b.a)(ne),We=Object(b.a)(re),Ye=Object(b.a)(ce),Ze=function(){return e=o()(s.a.mark(function e(t,n){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t(tt()),t(Object(h.r)()),t(Object(h.q)()),t(Object(h.p)()),t($e()),t(et())]);case 2:return r=n().channels.models,e.next=5,t(Xe(r));case 5:t(Ye()),t(De());case 7:case"end":return e.stop()}},e,U)})),function(t,n){return e.apply(this,arguments)};var e},Xe=function(e){return t=o()(s.a.mark(function t(n){var r,a,c,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object(k.c)(e,[I.a.Direct,I.a.Group,I.a.Subreddit])){t.next=3;break}return t.abrupt("return");case 3:for(c in a={},r)(i=r[c]).channelState!==y.b.PARTIAL&&(a[i.channelId]=i);a&&function(){var e=[];for(var t in a)a[t].members.map(function(t){return e.push(t.id)});n(Object(j.w)(e))}();case 6:case"end":return t.stop()}},t,U)})),function(e){return t.apply(this,arguments)};var t},$e=function(){return e=o()(s.a.mark(function e(t,n){var r,a,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(ze()),e.next=3,P.b.getExistingChannels(y.b.INVITED,y.f.NonSuper).catch(function(){return null});case 3:if(!(r=e.sent)){e.next=10;break}return a=r.hasMoreChannels,c=Object(I.c)(r.channels,y.b.INVITED),t(Xe(c)),t(Je({channels:c,hasMoreChannels:a})),e.abrupt("return");case 10:t(qe()),Object(E.b)("Error fetching invited channels");case 12:case"end":return e.stop()}},e,U)})),function(t,n){return e.apply(this,arguments)};var e},et=function e(){return t=o()(s.a.mark(function t(n,r){var a,c,i,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(Qe()),t.next=3,P.b.getExistingChannels(y.b.JOINED,y.f.NonSuper);case 3:if(!(a=t.sent)){t.next=11;break}return c=a.hasMoreChannels,i=Object(I.c)(a.channels,y.b.JOINED),o=Object(T.r)(r()),n(We({channels:i,hasMoreChannels:c})),c&&o<g.a.InitChannels&&n(e()),t.abrupt("return");case 11:case"end":return t.stop()}},t,U)})),function(e,n){return t.apply(this,arguments)};var t},tt=function(){return e=o()(s.a.mark(function e(t,n){var r,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),!(a=Object(A.d)(r))){e.next=5;break}return e.next=5,P.b.addChannelModelByChannelId(a);case 5:case"end":return e.stop()}},e,U)})),function(t,n){return e.apply(this,arguments)};var e},nt=Object(b.a)(q),rt=Object(b.a)(Q),at=(Object(b.a)("CHANNEL__MESSAGES_LOADED"),Object(b.a)(oe)),ct=function(e,t){return n=o()(s.a.mark(function n(r,a){var c,i;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:c=a(),i=Object(T.B)(c,"channelState"),P.b.leaveChannel().then(function(){return r(he(e,t))}).then(function(){return r(Ke(i))}).catch(function(e){return Object(E.b)("Error leaving channels: "+e.message)});case 3:case"end":return n.stop()}},n,U)})),function(e,t){return n.apply(this,arguments)};var n},st=Object(b.a)(ue),it=Object(b.a)(de),ot=function(e){return t=o()(s.a.mark(function t(n,r){var c,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:c=r(),i=Object(T.k)(c),n(st({channelId:e})),P.b.getFirstMessage().then(function(e){var t=e[0];if(t){if(i&&i.hasMoreMessages){var r=Object(S.b)(t);n(Object(p.s)(a()({},t.messageId,r)))}return t.messageId}}).then(function(t){return t&&n(it({channelId:e,firstMessageId:t}))}).catch(function(e){return Object(E.b)("Error setting of first message: "+e.message)});case 4:case"end":return t.stop()}},t,U)})),function(e,n){return t.apply(this,arguments)};var t}},"./src/chat/actions/channel/dropdown.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return y}),n.d(t,"c",function(){return x}),n.d(t,"d",function(){return _}),n.d(t,"g",function(){return E}),n.d(t,"j",function(){return C}),n.d(t,"i",function(){return I}),n.d(t,"a",function(){return w}),n.d(t,"h",function(){return S}),n.d(t,"e",function(){return N}),n.d(t,"f",function(){return T});var r=n("./node_modules/babel-runtime/regenerator/index.js"),a=n.n(r),c=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),s=n.n(c),i=n("./node_modules/react-router-redux/es/index.js"),o=n("./src/lib/makeActionCreator/index.ts"),u=n("./src/chat/actions/tooltip.ts"),d=n("./src/chat/actions/tracking.ts"),l=n("./src/chat/constants/channels.ts"),b=n("./src/chat/helpers/errors.ts"),h=n("./src/chat/helpers/urls/index.ts"),f=n("./src/chat/selectors/channels.ts"),p=n("./src/chat/selectors/subreddit.ts"),m=n("./src/chat/singleton/SendbirdSDK.ts"),O=l.a.INVITE_MEMBERS,j=l.a.LEAVE,v=l.a.LOCK_CHANNEL_CONFIRMATION,g=l.a.VIEW_MEMBERS,y=function(){return e=s()(a.a.mark(function e(t,n){var r,c,s,o,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n(),c=Object(f.x)(r),s=c.channelId,o=Object(p.b)(r),u=o&&o.name,t(Object(i.b)(Object(h.b)(s,O,u)));case 5:case"end":return e.stop()}},e,void 0)})),function(t,n){return e.apply(this,arguments)};var e},x=function(){return e=s()(a.a.mark(function e(t,n){var r,c,s,o,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n(),c=Object(f.x)(r),s=c.channelId,o=Object(p.b)(r),u=o&&o.name,t(Object(i.b)(Object(h.b)(s,j,u)));case 5:case"end":return e.stop()}},e,void 0)})),function(t,n){return e.apply(this,arguments)};var e},_=function(){return e=s()(a.a.mark(function e(t,n){var r,c,s,o,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n(),c=Object(f.x)(r),s=c.channelId,o=Object(p.b)(r),u=o&&o.name,t(Object(i.b)(Object(h.b)(s,v,u)));case 5:case"end":return e.stop()}},e,void 0)})),function(t,n){return e.apply(this,arguments)};var e},E=function(e){return t=s()(a.a.mark(function t(n,r){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n(Object(u.a)({tooltipId:e})),n(Object(d.A)());case 2:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},C=function(e){return t=s()(a.a.mark(function t(n,r){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e&&(n(Object(d.m)()),n(Object(d.p)()).then(function(){window.open(Object(h.k)(e))}));case 1:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},I=function(){return e=s()(a.a.mark(function e(t,n){var r,c,s,o,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n(),c=Object(f.x)(r),s=c.channelId,o=Object(p.b)(r),u=o&&o.name,t(Object(i.b)(Object(h.b)(s,g,u)));case 5:case"end":return e.stop()}},e,void 0)})),function(t,n){return e.apply(this,arguments)};var e},w="CHANNEL__UPDATE_CHANNEL_NAME",k=Object(o.a)(w),S=function(e){return t=s()(a.a.mark(function t(n,r){var c,s,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(c=Object(f.x)(r()))){t.next=7;break}return s=Object.assign({},c,{name:e}),i=Object.assign({},c),n(k(s)),t.next=7,m.b.updateChannel(s).catch(function(e){Object(b.b)(e),n(k(i))});case 7:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},N=function(){return e=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.b.setMyCountPreference(l.c.Off);case 1:case"end":return e.stop()}},e,void 0)})),function(t,n){return e.apply(this,arguments)};var e},T=function(){return e=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.b.setMyCountPreference(l.c.All);case 1:case"end":return e.stop()}},e,void 0)})),function(t,n){return e.apply(this,arguments)};var e}},"./src/chat/actions/channel/subreddit.ts":function(e,t,n){"use strict";n.d(t,"d",function(){return E}),n.d(t,"o",function(){return C}),n.d(t,"l",function(){return I}),n.d(t,"g",function(){return w}),n.d(t,"r",function(){return T}),n.d(t,"k",function(){return D}),n.d(t,"j",function(){return M}),n.d(t,"f",function(){return A}),n.d(t,"q",function(){return P}),n.d(t,"i",function(){return U}),n.d(t,"h",function(){return B}),n.d(t,"e",function(){return K}),n.d(t,"p",function(){return z}),n.d(t,"m",function(){return q}),n.d(t,"w",function(){return Q}),n.d(t,"b",function(){return J}),n.d(t,"t",function(){return Y}),n.d(t,"n",function(){return Z}),n.d(t,"u",function(){return $}),n.d(t,"c",function(){return ee}),n.d(t,"a",function(){return ne}),n.d(t,"s",function(){return ce}),n.d(t,"v",function(){return se});var r=n("./node_modules/babel-runtime/regenerator/index.js"),a=n.n(r),c=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),s=n.n(c),i=n("./node_modules/react-router-redux/es/index.js"),o=n("./src/lib/makeActionCreator/index.ts"),u=n("./src/chat/actions/channel.ts"),d=n("./src/chat/actions/message/index.ts"),l=n("./src/chat/actions/user.ts"),b=n("./src/chat/constants/channels.ts"),h=n("./src/chat/endpoints/sendbird/index.ts"),f=n("./src/chat/helpers/errors.ts"),p=n("./src/chat/helpers/urls/index.ts"),m=n("./src/chat/models/Channel/index.ts"),O=n("./src/chat/models/Channel/subreddit.ts"),j=n("./src/chat/models/Subreddit/index.ts"),v=n("./src/chat/selectors/channels.ts"),g=n("./src/chat/selectors/subreddit.ts"),y=n("./src/chat/selectors/user.ts"),x=n("./src/chat/singleton/SendbirdSDK.ts"),_=n("./src/chat/tracking/events/chatPreview.ts"),E="SUBREDDIT__ADD_SUBREDDIT_COLLECTION",C=Object(o.a)(E),I="SUBREDDIT_CHANNELS__FETCH_RECOMMENDED",w="SUBREDDIT_CHANNELS__ADD_RECOMMENDED_COLLECTION",k=Object(o.a)("SUBREDDIT_CHANNELS__FETCH_RECOMMENDED_FAILED"),S=Object(o.a)(I),N=Object(o.a)(w),T=function(){return e=s()(a.a.mark(function e(t,n,r){var c,s,i,o,u,d,l,b,f,p=r.apiContext;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n(),s=c.user,i=s.account,o=s.session,u=c.channels.subreddit.recommended.fetchingChannels,i&&o&&!u){e.next=3;break}return e.abrupt("return");case 3:return t(S()),e.next=6,Object(h.e)(p(),o);case 6:if(d=e.sent,!(l=d.ok&&d.body)||!l.length){e.next=17;break}return b=Object(j.a)(l),e.next=12,t(C(b));case 12:return f=Object(O.a)(l),t(N(f)),e.abrupt("return");case 17:t(k(d.error));case 18:case"end":return e.stop()}},e,void 0)})),function(t,n,r){return e.apply(this,arguments)};var e},D="SUBREDDIT_CHANNELS__FETCH_JOINED_FAILED",M="SUBREDDIT_CHANNELS__FETCH_JOINED",A="SUBREDDIT_CHANNELS__ADD_JOINED_COLLECTION",L=Object(o.a)(D),R=Object(o.a)(M),H=Object(o.a)(A),P=function e(){return t=s()(a.a.mark(function t(n,r){var c,s,i,o,u,d,l,h;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c=r(),s=b.b.JOINED,Object(y.f)(c)){t.next=4;break}return t.abrupt("return");case 4:return n(R()),t.next=7,x.b.getExistingChannels(s,b.f.Super).catch(function(){return null});case 7:if(!(i=t.sent)){t.next=20;break}return o=i.channels,u=Object(j.c)(o),t.next=13,n(C(u));case 13:return d=r(),l=Object(O.c)(o,s),h=Object(v.t)(d,l),t.next=18,n(H(Object.assign({},l,{sortedKeys:h})));case 18:return i.hasMoreChannels&&n(e()),t.abrupt("return");case 20:n(L());case 21:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},U="SUBREDDIT_CHANNELS__FETCH_INVITED_FAILED",B="SUBREDDIT_CHANNELS__FETCH_INVITED",K="SUBREDDIT_CHANNELS__ADD_INVITED_COLLECTION",G=Object(o.a)(U),F=Object(o.a)(B),V=Object(o.a)(K),z=function(){return e=s()(a.a.mark(function e(t,n){var r,c,s,i,o,u,d,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),c=r.user,s=c.account,i=c.session,o=r.channels.subreddit.invited.fetchingChannels,s&&i&&!o){e.next=3;break}return e.abrupt("return");case 3:return t(F()),e.next=6,x.b.getExistingChannels(b.b.INVITED,b.f.Super).catch(function(){return null});case 6:if(!(u=e.sent)){e.next=14;break}return d=Object(j.c)(u.channels),l=Object(O.c)(u.channels,b.b.INVITED),e.next=12,t(C(d));case 12:return t(V(l)),e.abrupt("return");case 14:t(G());case 15:case"end":return e.stop()}},e,void 0)})),function(t,n){return e.apply(this,arguments)};var e},q="SUBREDDIT_CHANNELS__UPDATE_INVITED",Q=Object(o.a)(q),J="SET__INVITED_SUBREDDIT_CHANNEL_TO_JOINED",W=Object(o.a)(J),Y=function(e,t){return n=s()(a.a.mark(function n(r,c){var s,o,u,l,h,O,j,g;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(s=c(),o=s.channels,u=e||o.selected.channelId){n.next=5;break}throw new f.a("joinedChannelId",u);case 5:if(!(l=Object(v.h)(s,u))||l.type!==m.a.Subreddit){n.next=15;break}return Object(_.a)(s),h=Object(v.t)(s,void 0,[l]),n.next=11,x.b.enterChannel(l,!0);case 11:O=n.sent,j=O.data,(g=j.messageListData)?(r(Object(d.m)(g)),r(W({channelId:u,sortedKeys:h})),r(X(u)),r(Object(i.b)(Object(p.c)(u,t)))):j===x.a.KICKED||j===x.a.BANNED?r(ae(j,t)):r(Object(i.b)(Object(p.b)(u,b.a.VIEW_PRIVATE,t)));case 15:case"end":return n.stop()}},n,void 0)})),function(e,t){return n.apply(this,arguments)};var n},Z=function(e,t){return n=s()(a.a.mark(function n(r,c,s){var o,u,d,l,m,O,j=s.apiContext;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=c(),u=o.channels,d=e||u.selected.channelId,l=Object(y.c)(o),d){n.next=6;break}throw new f.a("requestChannelId",d);case 6:if(m=Object(v.h)(o,d),O=Object(v.t)(o,void 0,[m]),!m||!l){n.next=13;break}return n.next=11,Object(h.a)(j(),l,m.channelSendbirdUrl);case 11:n.sent.error?r(Object(i.b)(Object(p.b)(d,b.a.VIEW_PRIVATE,t))):(r(W({channelId:d,sortedKeys:O})),r(X(d)),r(Object(i.b)(Object(p.c)(d,t))));case 13:case"end":return n.stop()}},n,void 0)})),function(e,t,r){return n.apply(this,arguments)};var n},X=function(e){return t=s()(a.a.mark(function t(n,r){var c,s,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:c=r(),(s=Object(v.h)(c,e))&&(i=[],s.members.map(function(e){return i.push(e.id)}),n(Object(l.w)(i)));case 3:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},$=function(e,t){return n=s()(a.a.mark(function n(r,c,i){var o,u,d,l,b=i.apiContext;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=c(),u=o.user,d=u.account,l=u.session,!d||!l){n.next=4;break}return n.abrupt("return",new Promise(function(){var n=s()(a.a.mark(function n(r){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(h.j)(b(),l,e,t).then(function(e){r(e)}).catch(function(e){r(e)});case 2:case"end":return n.stop()}},n,void 0)}));return function(e){return n.apply(this,arguments)}}()));case 4:case"end":return n.stop()}},n,void 0)})),function(e,t,r){return n.apply(this,arguments)};var n},ee="SUBREDDIT_CHANNEL__SET_KICKED_CHANNEL",te=Object(o.a)(ee),ne="SUBREDDIT_CHANNEL__SET_BANNED_CHANNEL",re=Object(o.a)(ne),ae=function(e,t){return n=s()(a.a.mark(function n(r,c){var s,o,u;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:s=c(),o=Object(v.k)(s),(u=o&&o.channelId)&&(e===x.a.KICKED?r(te({channelId:u})):e===x.a.BANNED&&r(re({channelId:u})),r(Object(i.b)(Object(p.b)(u,b.a.DENY,t))));case 4:case"end":return n.stop()}},n,void 0)})),function(e,t){return n.apply(this,arguments)};var n},ce=function(e,t){return n=s()(a.a.mark(function n(r,c){var s,o,d,l,h;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:s=c(),o=e.channelId,d=Object(v.y)(s),l=Object(g.b)(s,o),h=Object(y.a)(s),l&&t===h&&(r(Object(u.L)(o,l.name)),o===d&&r(Object(i.b)(Object(p.b)(o,b.a.DENY,l.name))));case 7:case"end":return n.stop()}},n,void 0)})),function(e,t){return n.apply(this,arguments)};var n},se=function(e){return t=s()(a.a.mark(function t(n,r){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:if(!t.sent){t.next=6;break}x.b.lockChannel(),t.next=7;break;case 6:x.b.unlockChannel();case 7:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t}},"./src/chat/actions/members.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return h}),n.d(t,"e",function(){return m}),n.d(t,"c",function(){return O}),n.d(t,"a",function(){return v}),n.d(t,"d",function(){return x}),n.d(t,"f",function(){return E});var r=n("./node_modules/babel-runtime/regenerator/index.js"),a=n.n(r),c=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),s=n.n(c),i=n("./src/lib/makeActionCreator/index.ts"),o=n("./src/chat/endpoints/users/index.ts"),u=n("./src/chat/helpers/errors.ts"),d=n("./src/chat/models/User/index.ts"),l=n("./src/chat/selectors/channels.ts"),b=n("./src/chat/singleton/SendbirdSDK.ts"),h="MEMBERS__FETCHING_MEMBERS",f=Object(i.a)(h),p=Object(i.a)("MEMBERS__FETCHING_MEMBERS_FAILED"),m=function(e){return t=s()(a.a.mark(function t(n,r){var c,s,i,o,d;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c=r(),!(s=Object(l.y)(c))){t.next=15;break}if(n(f({channelId:s})),!e){t.next=10;break}return t.next=7,b.b.getChannelMembersStartsWith(e).catch(function(e){return Object(u.b)("Error getting channel members: "+e.message)});case 7:t.t0=t.sent,t.next=13;break;case 10:return t.next=12,b.b.getSubredditChannelMembers().catch(function(e){return Object(u.b)("Error getting subreddit channel members: "+e.message)});case 12:t.t0=t.sent;case 13:(i=t.t0)?(o=i.hasMoreMembers,d=i.members.map(function(e){return e.userId}),n(y(s,d,o))):n(p());case 15:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},O="MEMBERS__FETCHING_MEMBERS_COMPLETED",j=Object(i.a)(O),v="MEMBERS__ADD_CHANNEL_MEMBERS",g=Object(i.a)(v),y=function(e,t,n){return r=s()(a.a.mark(function r(c,s,i){var u,l,b=i.apiContext;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(o.d)(b(),t);case 2:(u=r.sent).ok&&(l=Object(d.a)(u.body),c(g({channelId:e,members:l}))),c(j({channelId:e,hasMoreMembers:n}));case 5:case"end":return r.stop()}},r,void 0)})),function(e,t,n){return r.apply(this,arguments)};var r},x="MEMBERS__REMOVE_CHANNEL_MEMBERS",_=Object(i.a)(x),E=function(){return e=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t(_());case 1:case"end":return e.stop()}},e,void 0)})),function(t,n){return e.apply(this,arguments)};var e}},"./src/chat/actions/message/inboxScroller.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return f}),n.d(t,"a",function(){return p}),n.d(t,"b",function(){return O});var r=n("./node_modules/babel-runtime/regenerator/index.js"),a=n.n(r),c=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),s=n.n(c),i=n("./node_modules/lodash/sortBy.js"),o=n.n(i),u=n("./src/lib/makeActionCreator/index.ts"),d=n("./src/chat/constants/batchSizes.ts"),l=n("./src/chat/selectors/channels.ts"),b=n("./src/chat/singleton/SendbirdSDK.ts"),h=function(e){return o()(e,"createAt").splice(0,e.length-d.a.Messages).map(function(e){return e.messageId})},f=function(e){return t=s()(a.a.mark(function t(n,r){var c,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:c=Object(l.y)(r()),s=h(e),c&&(n(m({messageIdList:s})),n(j({channelId:c})),b.c.resetChannelMessageListQuery());case 3:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},p="MESSAGE__REMOVE_MESSAGES_FROM_CURRENT_CHANNEL",m=Object(u.a)(p),O="CHANNEL__RESET_HAS_MORE_MESSAGES",j=Object(u.a)(O)},"./src/chat/actions/message/index.ts":function(e,t,n){"use strict";var r,a=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),c=n.n(a),s=n("./node_modules/babel-runtime/helpers/defineProperty.js"),i=n.n(s),o=n("./node_modules/babel-runtime/regenerator/index.js"),u=n.n(o),d=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),l=n.n(d),b=n("./node_modules/lodash/flatten.js"),h=n.n(b),f=n("./node_modules/lodash/sortBy.js"),p=n.n(f),m=n("./node_modules/react-router-redux/es/index.js"),O=n("./src/lib/linkMatchers/index.ts"),j=n("./src/lib/makeActionCreator/index.ts"),v=n("./src/chat/actions/channel.ts"),g=n("./src/chat/actions/tracking.ts"),y=n("./src/chat/constants/messages.ts"),x=n("./node_modules/lodash/isEmpty.js"),_=n.n(x),E=n("./src/config.ts"),C=n("./src/lib/constants/index.ts"),I=n("./src/lib/makeRequest/index.ts"),w=E.a.embedlyApiKey,k=function(e){return e.filter(function(e){return!_()(e)}).map(function(e){return{name:e.provider_name,title:e.title,description:e.description,faviconUrl:e.favicon_url,imageUrl:(t=e.images,t&&t.length>0&&t[0]?t[0].url:void 0),url:e.url};var t})},S=(r=l()(u.a.mark(function e(t){var n=t.chars,r=t.scheme,a=t.url;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(I.a)({endpoint:"https://api.embed.ly/1/extract",method:C.Fa.GET,data:{key:w,url:a,scheme:r,chars:n}}).then(function(e){return e.ok&&Array.isArray(e.body)?e.body:[e.body]}).then(k));case 1:case"end":return e.stop()}},e,void 0)})),function(e){return r.apply(this,arguments)}),N=n("./src/chat/endpoints/users/index.ts"),T=n("./src/chat/helpers/linkParser/index.ts"),D=n("./src/chat/models/Message/index.ts"),M=n("./src/chat/models/Message/adapter.ts"),A=n("./src/chat/models/Message/report.ts"),L=n("./src/chat/selectors/app.ts"),R=n("./src/chat/selectors/channels.ts"),H=n("./src/chat/selectors/contacts.ts"),P=n("./src/chat/selectors/messages.ts"),U=n("./src/chat/singleton/SendbirdSDK.ts");n.d(t,"v",function(){return G}),n.d(t,"w",function(){return F}),n.d(t,"a",function(){return V}),n.d(t,"c",function(){return J}),n.d(t,"n",function(){return Y}),n.d(t,"x",function(){return Z}),n.d(t,"l",function(){return X}),n.d(t,"j",function(){return ee}),n.d(t,"u",function(){return te}),n.d(t,"h",function(){return re}),n.d(t,"s",function(){return ae}),n.d(t,"r",function(){return ce}),n.d(t,"b",function(){return se}),n.d(t,"m",function(){return oe}),n.d(t,"k",function(){return ue}),n.d(t,"y",function(){return de}),n.d(t,"d",function(){return le}),n.d(t,"p",function(){return be}),n.d(t,"o",function(){return he}),n.d(t,"i",function(){return fe}),n.d(t,"t",function(){return me}),n.d(t,"g",function(){return Oe}),n.d(t,"e",function(){return je}),n.d(t,"f",function(){return ve}),n.d(t,"q",function(){return _e});var B,K,G=function(e,t){return n=l()(u.a.mark(function n(r,a,c){var s,i=c.apiContext;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:(s=Object(A.b)(e,t))&&Object(N.b)(i(),s).then(function(){return r(Object(m.a)())});case 2:case"end":return n.stop()}},n,void 0)})),function(e,t,r){return n.apply(this,arguments)};var n},F=function(e,t,n){return r=l()(u.a.mark(function r(a,c,s){var i,o,d,l,b,h,f,O,j=s.apiContext;return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:i=20,o=p()(n,["createdAt"]),d=o.findIndex(function(t){return t.messageId===e.messageId}),l=Math.max(d-i,0),b=d+i,h=o.slice(l,b),f=Object(A.a)(h,t),(O=f.length&&Object(A.c)(f,e))&&Object(N.b)(j(),O,f).then(function(){return a(Object(m.a)())});case 9:case"end":return r.stop()}},r,void 0)})),function(e,t,n){return r.apply(this,arguments)};var r},V="MESSAGE__ADD_ONE",z=Object(j.a)(V),q=function(e,t){return n=l()(u.a.mark(function n(r,a){var c,s,o;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return c=a(),s=Object(M.b)(t),n.next=4,Q(e,c,r);case 4:o=n.sent,U.b.addMessage(e,t,o).then(function(e){var t=Object(R.B)(c,"channelId"),n=i()({},e.messageId,e);t&&(r(z({message:n,channelId:t,clientMessageId:s})),r(Object(g.v)(e.messageId)))}).catch(function(){s&&(r(Object(g.z)(s)),r($({clientMessageId:s,toggle:!0})))});case 6:case"end":return n.stop()}},n,void 0)})),function(e,t){return n.apply(this,arguments)};var n},Q=(B=l()(u.a.mark(function e(t,n,r){var a,s,i,o,d;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((a=Object(O.b)(t)).length){e.next=3;break}return e.abrupt("return",[]);case 3:if(s=[],i=a.map(function(e){var t=Object(H.g)(n,e);return t||s.push(e),t&&t.id}).filter(function(e){return e}),e.t1=s.length,!e.t1){e.next=12;break}return e.t2=h.a,e.next=10,Promise.all(s.slice(0,3).map(function(e){return U.b.searchMemberByName(e,!0)}));case 10:e.t3=e.sent,e.t1=(0,e.t2)(e.t3);case 12:if(e.t0=e.t1,e.t0){e.next=15;break}e.t0=[];case 15:return o=e.t0,d=o.map(function(e){return e&&e.id}).filter(function(e){return e}),e.abrupt("return",[].concat(c()(i),c()(d)));case 18:case"end":return e.stop()}},e,void 0)})),function(e,t,n){return B.apply(this,arguments)}),J="MESSAGE__ADD_PENDING_ONE",W=Object(j.a)(J),Y=function(e,t){return n=l()(u.a.mark(function n(r,a){var c,s,i,o;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(c=a(),s=Object(T.b)(e),!(s&&1===e.split(" ").length)){n.next=6;break}return ne(r,c,e),n.abrupt("return");case 6:(i=Object(D.a)(c,e,t))&&(o=t===y.b.TEXT?e:"",r(W(i)),r(q(o,i.data)));case 8:case"end":return n.stop()}},n,void 0)})),function(e,t){return n.apply(this,arguments)};var n},Z=function(e){return t=l()(u.a.mark(function t(n,r){var a,c;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=r(),(c=Object(P.h)(a,e))&&(n($({clientMessageId:e,toggle:!1})),n(q(c.messageData.value,c.data)));case 3:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},X="MESSAGE__TOGGLE_PENDING_MESSAGE_ERROR",$=Object(j.a)(X),ee="MESSAGE__REMOVE_PENDING_ONE",te=Object(j.a)(ee),ne=(K=l()(u.a.mark(function e(t,n,r){var a,c,s,i,o,d,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=O.c.match(r).map(function(e){return e.url}).join(""),c=y.b.EMBED,s={url:r},!(i=Object(D.a)(n,JSON.stringify(s),c))){e.next=10;break}return t(W(i)),e.next=8,S({url:a,scheme:"https",chars:140});case 8:(o=e.sent)&&(s=Object.assign({},s,{embed:o[0]}),d=JSON.stringify(s),l=JSON.stringify(Object(M.a)(d,c,i.clientMessageId)),t(q(s.url,l)));case 10:case"end":return e.stop()}},e,void 0)})),function(e,t,n){return K.apply(this,arguments)}),re="MESSAGE__RECEIVE_ADD_ONE",ae=Object(j.a)(re),ce=function(e){return t=l()(u.a.mark(function t(n,r,a){var c,s;a.apiContext;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:c=r(),s=Object(R.y)(c)===e.channelId,Object(L.c)(c)&&s&&n(Object(v.K)(e.channelId)),n(ae(i()({},e.messageId,e)));case 5:case"end":return t.stop()}},t,void 0)})),function(e,n,r){return t.apply(this,arguments)};var t},se="MESSAGE__ADD_LIST",ie=Object(j.a)(se),oe=function(e){return t=l()(u.a.mark(function t(n,r,a){var c;a.apiContext;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:c=Object(R.B)(r(),"channelId"),n(ie(Object.assign({channelId:c},e)));case 2:case"end":return t.stop()}},t,void 0)})),function(e,n,r){return t.apply(this,arguments)};var t},ue="MESSAGE__SET_MESSAGE_LIST_IS_LOADED",de=Object(j.a)(ue),le="MESSAGE__DELETE_ONE",be=Object(j.a)(le),he=function(e){return t=l()(u.a.mark(function t(n,r){var a,c;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=r(),(c=Object(P.d)(a,e))&&U.b.deleteMessage(c).then(function(){return n(be(c.messageId))}).then(function(){return n(Object(m.a)())});case 3:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},fe="MESSAGE__RECEIVE_DELETE_ONE",pe=Object(j.a)(fe),me=function(e){return t=l()(u.a.mark(function t(n,r){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n(pe(e));case 1:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},Oe="MESSAGE__GET_PREVIOUS_MESSAGES_START",je="MESSAGE__GET_PREVIOUS_MESSAGES_END",ve="MESSAGE__GET_PREVIOUS_MESSAGES_ERROR",ge=Object(j.a)(Oe),ye=Object(j.a)(je),xe=Object(j.a)(ve),_e=function(e){return t=l()(u.a.mark(function t(n,r){var a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=Object(R.B)(r(),"channelId"),n(ge(a)),n(Object(g.B)()),!a){t.next=6;break}return t.next=6,U.b.getPreviousMessages(y.c.USER,e).then(function(e){return n(ye(Object.assign({channelId:a},e)))}).catch(function(){return n(xe(a))});case 6:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t}},"./src/chat/actions/message/unreadCount.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return O}),n.d(t,"b",function(){return y});var r,a=n("./node_modules/babel-runtime/regenerator/index.js"),c=n.n(a),s=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),i=n.n(s),o=n("./node_modules/lodash/debounce.js"),u=n.n(o),d=n("./node_modules/lodash/isEqual.js"),l=n.n(d),b=n("./src/lib/constants/index.ts"),h=n("./src/lib/makeActionCreator/index.ts"),f=n("./src/chat/endpoints/sendbird/index.ts"),p=n("./src/chat/helpers/errors.ts"),m=n("./src/chat/selectors/user.ts"),O="MESSAGE__SET_UNREAD_COUNT",j=Object(h.a)(O),v=function(e){return{basicChannelCount:e&&Number(e.unread_count)||0,subredditChannelCount:e&&Number(e.subreddit_unread_count)?1:0}},g=(r=i()(c.a.mark(function e(t,n){var r,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=Object(m.c)(t))){e.next=6;break}return e.next=4,Object(f.h)(n(),r).catch(function(e){return Object(p.b)("Error getting proxy unread count: "+e)});case 4:return a=e.sent,e.abrupt("return",v(a&&a.body));case 6:case"end":return e.stop()}},e,void 0)})),function(e,t){return r.apply(this,arguments)}),y=u()(function(e,t){return n=i()(c.a.mark(function n(r,a,s){var i,o,u,d=s.apiContext;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=a(),o={basicChannelCount:e||0,subredditChannelCount:t||0},"number"==typeof e||"number"==typeof t){n.next=8;break}return n.next=6,g(i,d);case 6:u=n.sent,o=u||o;case 8:l()(i.messages.unread,o)||r(j(o));case 9:case"end":return n.stop()}},n,void 0)})),function(e,t,r){return n.apply(this,arguments)};var n},b.qb,{leading:!0})},"./src/chat/actions/page.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return h}),n.d(t,"a",function(){return f}),n.d(t,"c",function(){return p}),n.d(t,"d",function(){return m});var r=n("./node_modules/babel-runtime/regenerator/index.js"),a=n.n(r),c=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),s=n.n(c),i=n("./src/chat/actions/channel.ts"),o=n("./src/chat/actions/sidebar.ts"),u=n("./src/chat/actions/tracking.ts"),d=n("./src/chat/actions/user.ts"),l=n("./src/chat/selectors/platform.ts");function b(e){var t=this;return function(n){return r=s()(a.a.mark(function r(c,s,i){var u;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u=Object(l.f)(s()),c(Object(o.d)(u)),t.next=4,Object(d.l)()(c,s,i);case 4:return t.next=6,Object(d.p)()(c,s,i);case 6:return t.next=8,e(n)(c,s,i);case 8:case"end":return t.stop()}},r,t)})),function(e,t,n){return r.apply(this,arguments)};var r}}var h=b(function(e){return t=s()(a.a.mark(function e(t,n,r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,void 0)})),function(e,n,r){return t.apply(this,arguments)};var t}),f=b(function(e){return t=s()(a.a.mark(function e(t,n,r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,void 0)})),function(e,n,r){return t.apply(this,arguments)};var t}),p=b(function(e){return t=s()(a.a.mark(function e(t,n,r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,void 0)})),function(e,n,r){return t.apply(this,arguments)};var t}),m=b(function(e){return t=s()(a.a.mark(function e(t,n,r){var c,s,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n(),s=c.platform.currentPage,!(o=s&&s.urlParams.userIds.split(","))){e.next=7;break}return t(Object(u.i)(o)),t(Object(i.B)(o,name)),e.abrupt("return");case 7:case"end":return e.stop()}},e,void 0)})),function(e,n,r){return t.apply(this,arguments)};var t})},"./src/chat/actions/platform.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return b}),n.d(t,"b",function(){return h}),n.d(t,"c",function(){return f}),n.d(t,"d",function(){return p}),n.d(t,"e",function(){return m});var r=n("./node_modules/babel-runtime/regenerator/index.js"),a=n.n(r),c=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),s=n.n(c),i=(n("./src/config.ts"),n("./src/lib/areUrlsEqual/index.ts")),o=(n("./src/lib/constants/index.ts"),n("./src/lib/logs/timing.js")),u=n("./src/lib/makeActionCreator/index.ts"),d=(n("./src/chat/strings/index.ts"),n("./src/chat/actions/channel.ts")),l=n("./src/chat/actions/sendbird/index.ts"),b="PLATFORM__HISTORY_LOCATION_SET",h="PLATFORM__INITIAL_REFERRER_SET",f="PLATFORM__PAGE_META_SET",p=function(e,t,n){return r=s()(a.a.mark(function r(c,s,u){var b,h,f,p,O,j;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(b=Date.now(),h=s(),f=h.platform.currentPage,n){r.next=5;break}return r.abrupt("return");case 5:if(c(m({action:t,location:e,routeMatch:n})),!f||!Object(i.a)(f.url,e)){r.next=8;break}return r.abrupt("return");case 8:if(!n){r.next=14;break}return p=n.match,r.next=12,n.route.action(p)(c,s,u);case 12:(O=n.route.meta)&&(j=Date.now()-b,Object(o.b)({duration:j,meta:O}));case 14:n.match.params.subredditName&&c(Object(l.l)()),n.match.params.channelId&&c(Object(d.O)());case 17:case"end":return r.stop()}},r,void 0)})),function(e,t,n){return r.apply(this,arguments)};var r},m=Object(u.a)(b);Object(u.a)(h),Object(u.a)(f),Object(u.a)("PLATFORM__MODAL_TOGGLED")},"./src/chat/actions/sendbird/config.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return u}),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return h}),n.d(t,"d",function(){return p});var r=n("./node_modules/babel-runtime/regenerator/index.js"),a=n.n(r),c=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),s=n.n(c),i=n("./src/lib/makeActionCreator/index.ts"),o=n("./src/chat/endpoints/sendbird/index.ts"),u="SENDBIRD_CONFIG__PROXY",d=Object(i.a)(u),l="SENDBIRD_CONFIG__GLOBAL_SETTINGS",b=Object(i.a)(l),h="SENDBIRD_CONFIG__USER_EXPERIMENTS",f=Object(i.a)(h),p=function(){return e=s()(a.a.mark(function e(t,n,r){var c,s=r.apiContext;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.d)(s());case 2:if(!(c=e.sent).ok){e.next=6;break}return e.next=6,Promise.all([t(d({host:c.body.proxy_host})),t(b({maxMessageLength:parseInt(c.body.max_message_length,10)})),t(f({userSubredditChatEnabled:c.body.user_subreddit_chat_enabled}))]);case 6:case"end":return e.stop()}},e,void 0)})),function(t,n,r){return e.apply(this,arguments)};var e}},"./src/chat/actions/sendbird/index.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return m}),n.d(t,"a",function(){return O}),n.d(t,"j",function(){return j}),n.d(t,"h",function(){return v}),n.d(t,"m",function(){return y}),n.d(t,"b",function(){return x}),n.d(t,"i",function(){return _}),n.d(t,"g",function(){return E}),n.d(t,"n",function(){return w}),n.d(t,"d",function(){return k}),n.d(t,"e",function(){return S}),n.d(t,"k",function(){return D}),n.d(t,"f",function(){return M}),n.d(t,"l",function(){return L});var r=n("./node_modules/babel-runtime/regenerator/index.js"),a=n.n(r),c=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),s=n.n(c),i=n("./src/lib/cache/index.ts"),o=n("./src/lib/constants/index.ts"),u=n("./src/lib/makeActionCreator/index.ts"),d=n("./src/chat/actions/tracking.ts"),l=n("./src/chat/endpoints/accounts/index.ts"),b=n("./src/chat/endpoints/sendbird/index.ts"),h=n("./src/chat/models/Contact/index.ts"),f=n("./src/chat/selectors/contacts.ts"),p=n("./src/chat/selectors/experiments.ts"),m="SENDBIRD__DEACTIVATE_SENDBIRD_SESSION",O="SENDBIRD__ACTIVATE_SENDBIRD_SESSION",j=Object(u.a)(m),v=(Object(u.a)(O),"SENDBIRD__SET_SENDBIRD_SESSION"),g=Object(u.a)(v),y=function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e=s()(a.a.mark(function e(n,r,c){var s,u,d,l,h,f,p,m,O,v,y,x=c.apiContext;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r(),u=s.user,d=u.account,!(l=u.session)||!d){e.next=17;break}if(h=void 0,f=Object(i.c)(o.q.CHAT,"session",d.id),!(p=Object(i.b)(f))||!p.token){e.next=10;break}h=p,e.next=14;break;case 10:return e.next=12,Object(b.g)(x(),l);case 12:(m=e.sent).ok&&(O=m.body,v=O.valid_until,y=O.sb_access_token,h={expires:v,token:y},Object(i.d)(f,h,new Date(v)));case 14:if(!h){e.next=17;break}return n(g(Object.assign({},h,{active:t}))),e.abrupt("return");case 17:n(j());case 18:case"end":return e.stop()}},e,void 0)})),function(t,n,r){return e.apply(this,arguments)}},x="SENDBIRD__ADD_MEMBERS_TO_KNOWN_CONTACTS",_=Object(u.a)(x),E="SENDBIRD__SET_REDDIT_CONTACT_LIST",C=6*o.K,I=Object(u.a)(E),w=function(){return e=s()(a.a.mark(function e(t,n,r){var c,s,u,d,l,f,p,m,O,j=r.apiContext;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n(),s=c.contacts.models,u=Object(i.c)(o.q.CHAT,"contacts",c.user.account.id),!(d=Object(i.b)(u))||d.version!==h.a){e.next=7;break}return t(I(d.data)),e.abrupt("return");case 7:if(l=n().user.session){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,Object(b.f)(j(),l,25);case 12:f=e.sent,p=Object(h.c)(f.body),m=p.map(function(e){return s[e.id]?s[e.id]:e}),O={version:h.a,data:m},Object(i.d)(u,O,C),t(I(m));case 18:case"end":return e.stop()}},e,void 0)})),function(t,n,r){return e.apply(this,arguments)};var e},k="SENDBIRD__IDENTIFY_CONTACT_BEGIN",S="SENDBIRD__IDENTIFY_CONTACT_END",N=Object(u.a)(k),T=Object(u.a)(S),D=function(e){return t=s()(a.a.mark(function t(n,r,c){var s=c.apiContext;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Object(f.c)(r(),e.username)||(n(N({username:e.username})),Object(l.b)(s(),e.username).then(function(t){if(t.ok){var r=Object(h.d)(t.body.data);if(r)return n(T({username:e.username,contact:r,valid:!0}))}else n(Object(d.y)(e.username));n(T({username:e.username,valid:!1}))}));case 2:case"end":return t.stop()}},t,void 0)})),function(e,n,r){return t.apply(this,arguments)};var t},M="SENDBIRD__OPT_IN",A=Object(u.a)(M),L=function(){return e=s()(a.a.mark(function e(t,n,r){var c=r.apiContext;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(p.b)(n())){e.next=2;break}return e.abrupt("return");case 2:t(A({userSubredditChatEnabled:!0})),Object(b.k)(c());case 4:case"end":return e.stop()}},e,void 0)})),function(t,n,r){return e.apply(this,arguments)};var e}},"./src/chat/actions/sendbird/sdk.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return j}),n.d(t,"a",function(){return v}),n.d(t,"b",function(){return g}),n.d(t,"d",function(){return y}),n.d(t,"e",function(){return E}),n.d(t,"f",function(){return I}),n.d(t,"h",function(){return w}),n.d(t,"g",function(){return k});var r=n("./node_modules/babel-runtime/regenerator/index.js"),a=n.n(r),c=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),s=n.n(c),i=n("./src/lib/makeActionCreator/index.ts"),o=n("./src/chat/actions/channel.ts"),u=n("./src/chat/actions/message/index.ts"),d=n("./src/chat/actions/message/unreadCount.ts"),l=n("./src/chat/actions/sendbird/index.ts"),b=n("./src/chat/actions/toast.ts"),h=n("./src/chat/constants/sendbird.ts"),f=n("./src/chat/constants/toast.ts"),p=n("./src/chat/selectors/sendbird.ts"),m=n("./src/chat/selectors/user.ts"),O=n("./src/chat/singleton/SendbirdSDK.ts"),j="SENDBIRD_SDK__CONNECT_FAIL",v="SENDBIRD_SDK__CONNECT_SUCCESS",g="SENDBIRD_SDK__DISCONNECT",y="SENDBIRD_SDK__UPDATE_CONNECTION_STATUS",x=Object(i.a)(j),_=Object(i.a)(v),E=function(e){return t=s()(a.a.mark(function t(n,r){var c,s,i,l,j,v,g,y,E;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:c=r(),s=Object(p.d)(c),i=Object(p.c)(c),l=Object(p.a)(c),j=Object(m.d)(c),v={connectionStatus:h.b.Closed},g=3,j&&l&&i&&(y=j.id,E=j.name,s&&n(Object(b.e)({toast:f.a.ConnectionPending})),O.b.connect(l,e||i.token,y,E,n).then(function(e){e.error?(n(x(e.error)),n(w(Object.assign({},v))),n(Object(b.e)({toast:f.a.ConnectionClosed}))):(n(_()),s&&(n(Object(u.q)(!0)),n(Object(b.e)({toast:f.a.ConnectionOpen})),n(Object(b.c)(g))),n(Object(d.b)()),n(Object(o.F)()))}));case 8:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},C=Object(i.a)(g),I=function(){return e=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.b.disconnect().then(function(){t(C()),t(Object(l.j)())});case 1:case"end":return e.stop()}},e,void 0)})),function(t){return e.apply(this,arguments)};var e},w=Object(i.a)(y),k=function(){return O.b.reconnect()}},"./src/chat/actions/session.ts":function(e,t,n){"use strict";var r=n("./node_modules/babel-runtime/regenerator/index.js"),a=n.n(r),c=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),s=n.n(c),i=n("./src/lib/makeActionCreator/index.ts"),o=n("./src/lib/constants/index.ts"),u=n("./src/lib/makeApiRequest/index.ts"),d=function(e,t){return Object(u.b)(e,{data:t,endpoint:"/refreshproxy",method:o.Fa.POST})};n.d(t,"a",function(){return l}),n.d(t,"b",function(){return b}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return m});var l="SESSION__USER_AUTHENTICATED",b="SESSION__USER_LOGGED_OUT",h="SESSION__USER_REAUTHENTICATED",f=(Object(i.a)(l),Object(i.a)(h)),p=Object(i.a)(b),m=function(){return e=s()(a.a.mark(function e(t,n,r){var c,s,i,o=r.apiContext;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c=n().user.session)){e.next=11;break}return e.next=4,d(o(),c);case 4:if(!(s=e.sent).ok){e.next=11;break}if(!(i=s.body).unsafeLoggedOut){e.next=10;break}return c.unsafeLoggedOut||t(p()),e.abrupt("return");case 10:t(f(i));case 11:case"end":return e.stop()}},e,void 0)})),function(t,n,r){return e.apply(this,arguments)};var e}},"./src/chat/actions/sidebar.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"d",function(){return m}),n.d(t,"a",function(){return O}),n.d(t,"e",function(){return j}),n.d(t,"c",function(){return g});var r=n("./node_modules/babel-runtime/regenerator/index.js"),a=n.n(r),c=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),s=n.n(c),i=n("./node_modules/react-router-redux/es/index.js"),o=n("./src/lib/makeActionCreator/index.ts"),u=n("./src/chat/constants/sidebar.ts"),d=n("./src/chat/helpers/urls/index.ts"),l=n("./src/chat/selectors/channels.ts"),b=n("./src/chat/selectors/channels/next.tsx"),h=n("./src/chat/selectors/subreddit.ts"),f="SIDEBAR__SET_SIDEBAR_ACTIVE_INDEX",p=Object(o.a)(f),m=function(e){return t=s()(a.a.mark(function t(n,r){var c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:c=r(),e!==c.sidebarTabs.activeIndex&&n(p({activeIndex:e}));case 2:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},O="SIDEBAR__SET_LAST_CHANNEL_ID_PER_TAB",j=Object(o.a)(O),v=function(e,t){switch(t){case u.a.SubredditChannels:return Object(b.a)(e,u.a.SubredditChannels);case u.a.DirectChannels:return Object(b.a)(e,u.a.DirectChannels)}},g=function(e){return t=s()(a.a.mark(function t(n,r){var c,s,o,u,b,f,p;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c=r(),s=c.sidebarTabs.lastChannelIdPerTab,o=s[e]||v(c,e),n(m(e)),!o){t.next=12;break}if(!(u=Object(l.h)(c,o))){t.next=12;break}return b=Object(h.b)(c,o),f=b&&b.name,p=Object(d.e)(u,f),n(Object(i.b)(p)),t.abrupt("return");case 12:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t}},"./src/chat/actions/toast.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"d",function(){return d}),n.d(t,"b",function(){return l}),n.d(t,"e",function(){return b}),n.d(t,"c",function(){return h});var r=n("./node_modules/babel-runtime/regenerator/index.js"),a=n.n(r),c=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),s=n.n(c),i=n("./src/lib/makeActionCreator/index.ts"),o=n("./src/lib/constants/index.ts"),u="TOAST__RESET_TOAST",d=Object(i.a)(u),l="TOAST__UPDATE_TOAST",b=Object(i.a)(l),h=function(e){return t=s()(a.a.mark(function t(n,r){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:setTimeout(function(){return n(d())},e*o.qb);case 1:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t}},"./src/chat/actions/tooltip.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("./src/lib/makeActionCreator/index.ts"),a=Object(r.a)("TOOLTIP__DROPDOWN_TOGGLED")},"./src/chat/actions/tracking.ts":function(e,t,n){"use strict";var r=n("./node_modules/babel-runtime/regenerator/index.js"),a=n.n(r),c=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),s=n.n(c),i=n("./src/telemetry/models/Event.ts"),o=n("./src/chat/constants/channels.ts"),u=n("./src/chat/selectors/channels.ts"),d=n("./src/chat/selectors/contacts.ts"),l=n("./src/chat/selectors/platform.ts"),b=n("./src/chat/selectors/sidebar.ts"),h=n("./src/chat/tracking/fields/chat.ts"),f=n("./src/chat/tracking/fields/common.ts"),p=n("./src/chat/tracking/fields/subreddit.ts"),m=n("./src/chat/tracking/sendEvent.ts"),O=function(e){Object(m.a)(Object.assign({noun:"snoomoji",source:i.b.ChatKeyboard,action:i.a.View,chat:Object.assign({},Object(h.A)(e),Object(h.p)(e),Object(h.g)(e)),subreddit:Object.assign({},Object(p.a)(e),Object(p.b)(e))},Object(f.a)(e)))},j=function(e,t){return Object(m.a)(Object.assign({noun:"chat_member_block",source:i.b.ChatSettings,action:i.a.Submit,chat:Object.assign({},Object(h.A)(e),Object(h.p)(e),Object(h.g)(e),Object(h.b)(t)),subreddit:Object.assign({},Object(p.a)(e),Object(p.b)(e))},Object(f.a)(e)))},v=function(e){Object(m.a)(Object.assign({noun:"view_member",source:i.b.ChatSettings,action:i.a.Click,chat:Object.assign({},Object(h.A)(e),Object(h.p)(e),Object(h.u)(e),Object(h.g)(e))},Object(f.a)(e)))},g=n("./src/chat/tracking/events/chatView.ts"),y=n("./src/chat/tracking/events/contactsList.ts"),x=n("./src/chat/tracking/events/invitationInbox.ts"),_=n("./src/chat/tracking/events/messagesInbox.ts"),E=n("./src/chat/selectors/telemetry.ts"),C=function(e,t,n){Object(m.a)(Object.assign({noun:"user",source:n,action:i.a.Kick,chat:Object.assign({},Object(h.A)(e),Object(h.p)(e),Object(h.g)(e),Object(h.s)(e),Object(h.n)(e),Object(h.x)(e)),subreddit:Object.assign({},Object(p.a)(e),Object(p.b)(e))},Object(f.a)(e),{actionInfo:Object.assign({settingValue:t},Object(E.a)(e))}))},I=function(e,t){Object(m.a)(Object.assign({noun:"ban_user",source:t,action:i.a.Click,chat:Object.assign({},Object(h.A)(e),Object(h.p)(e),Object(h.g)(e),Object(h.s)(e),Object(h.n)(e),Object(h.x)(e)),subreddit:Object.assign({},Object(p.a)(e),Object(p.b)(e))},Object(f.a)(e)))},w=function(e,t){Object(m.a)(Object.assign({noun:"create_chat",source:i.b.UserProfile,action:i.a.Click,chat:Object.assign({},Object(h.E)(e,t),Object(h.C)(e,t),Object(h.D)(e,t)),user:Object.assign({},function(e){return{id:e.user.account.id}}(e))},Object(f.a)(e)))};n.d(t,"g",function(){return S}),n.d(t,"v",function(){return N}),n.d(t,"z",function(){return T}),n.d(t,"w",function(){return D}),n.d(t,"B",function(){return M}),n.d(t,"A",function(){return A}),n.d(t,"t",function(){return L}),n.d(t,"p",function(){return R}),n.d(t,"n",function(){return H}),n.d(t,"u",function(){return P}),n.d(t,"f",function(){return U}),n.d(t,"y",function(){return B}),n.d(t,"x",function(){return K}),n.d(t,"h",function(){return G}),n.d(t,"d",function(){return F}),n.d(t,"b",function(){return V}),n.d(t,"k",function(){return z}),n.d(t,"l",function(){return q}),n.d(t,"m",function(){return Q}),n.d(t,"j",function(){return J}),n.d(t,"e",function(){return W}),n.d(t,"i",function(){return Y}),n.d(t,"c",function(){return Z}),n.d(t,"o",function(){return X}),n.d(t,"D",function(){return $}),n.d(t,"r",function(){return ee}),n.d(t,"C",function(){return te}),n.d(t,"q",function(){return ne}),n.d(t,"s",function(){return ae}),n.d(t,"a",function(){return ce});var k=void 0,S=function(){return e=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(_.b)(n());case 1:case"end":return e.stop()}},e,k)})),function(t,n){return e.apply(this,arguments)};var e},N=function(e){return t=s()(a.a.mark(function t(n,r){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Object(g.a)(r(),e);case 1:case"end":return t.stop()}},t,k)})),function(e,n){return t.apply(this,arguments)};var t},T=function(e){return t=s()(a.a.mark(function t(n,r){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Object(g.d)(r(),e);case 1:case"end":return t.stop()}},t,k)})),function(e,n){return t.apply(this,arguments)};var t},D=function(e,t){return n=s()(a.a.mark(function n(r,c){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Object(g.b)(c(),e,t);case 1:case"end":return n.stop()}},n,k)})),function(e,t){return n.apply(this,arguments)};var n},M=function(){return e=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(g.e)(n());case 1:case"end":return e.stop()}},e,k)})),function(t,n){return e.apply(this,arguments)};var e},A=function(){return e=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n(),Object(m.a)(Object.assign({noun:"chat_settings",source:i.b.ChatSettings,action:i.a.View,chat:Object.assign({},Object(h.A)(t),Object(h.p)(t),Object(h.g)(t)),subreddit:Object.assign({},Object(p.a)(t),Object(p.b)(t))},Object(f.a)(t)));case 1:case"end":return e.stop()}var t},e,k)})),function(t,n){return e.apply(this,arguments)};var e},L=function(){return e=s()(a.a.mark(function e(t,n){var r,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(r=Object(u.v)(n()))&&r.length&&(c=r[0].id,j(n(),c));case 2:case"end":return e.stop()}},e,k)})),function(t,n){return e.apply(this,arguments)};var e},R=function(){return e=s()(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n(),Object(l.c)(r)!==o.a.VIEW_INVITE&&v(r);case 2:case"end":return e.stop()}},e,k)})),function(t,n){return e.apply(this,arguments)};var e},H=function(){return e=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n(),Object(m.a)(Object.assign({noun:"leave_group",source:i.b.ChatSettings,action:i.a.Click,chat:Object.assign({},Object(h.A)(t),Object(h.p)(t),Object(h.g)(t),Object(h.y)(t)),subreddit:Object.assign({},Object(p.a)(t),Object(p.b)(t))},Object(f.a)(t)));case 1:case"end":return e.stop()}var t},e,k)})),function(t,n){return e.apply(this,arguments)};var e},P=function(e){return t=s()(a.a.mark(function t(n,r){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=r(),a=e,Object(m.a)(Object.assign({noun:"chat_member_report",source:i.b.ChatSettings,action:i.a.Submit,chat:Object.assign({},Object(h.A)(n),Object(h.p)(n),Object(h.g)(n),Object(h.w)(a)),subreddit:Object.assign({},Object(p.a)(n),Object(p.b)(n))},Object(f.a)(n)));case 1:case"end":return t.stop()}var n,a},t,k)})),function(e,n){return t.apply(this,arguments)};var t},U=function(e){return t=s()(a.a.mark(function t(n,r){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Object(y.c)(r(),e);case 1:case"end":return t.stop()}},t,k)})),function(e,n){return t.apply(this,arguments)};var t},B=function(e){return t=s()(a.a.mark(function t(n,r){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Object(d.c)(r(),e)&&Object(y.f)(r());case 2:case"end":return t.stop()}},t,k)})),function(e,n){return t.apply(this,arguments)};var t},K=function(e){return t=s()(a.a.mark(function t(n,r){var c,s,i,o,u,l;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:c=r(),s=e&&e.filter(function(e){return e!==c.user.account.id}),i=s&&s[0],o=c.contacts.models[i],u=o&&o.name,(l=Object(d.a)(r(),u))&&Object(y.e)(r(),l);case 7:case"end":return t.stop()}},t,k)})),function(e,n){return t.apply(this,arguments)};var t},G=function(e,t){return n=s()(a.a.mark(function e(n,r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(y.d)(r(),t);case 1:case"end":return e.stop()}},e,k)})),function(e,t){return n.apply(this,arguments)};var n},F=function(){return e=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(y.b)(n());case 1:case"end":return e.stop()}},e,k)})),function(t,n){return e.apply(this,arguments)};var e},V=function(){return e=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(y.a)(n());case 1:case"end":return e.stop()}},e,k)})),function(t,n){return e.apply(this,arguments)};var e},z=function(){return e=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(x.c)(n());case 1:case"end":return e.stop()}},e,k)})),function(t,n){return e.apply(this,arguments)};var e},q=function(){return e=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(x.d)(n());case 1:case"end":return e.stop()}},e,k)})),function(t,n){return e.apply(this,arguments)};var e},Q=function(){return e=s()(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n(),Object(l.c)(r)===o.a.VIEW_INVITE&&Object(x.e)(r);case 2:case"end":return e.stop()}},e,k)})),function(t,n){return e.apply(this,arguments)};var e},J=function(){return e=s()(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n(),Object(x.b)(r),Object(b.b)(r)&&Object(x.f)(n());case 3:case"end":return e.stop()}},e,k)})),function(t,n){return e.apply(this,arguments)};var e},W=function(){return e=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(x.a)(n());case 1:case"end":return e.stop()}},e,k)})),function(t,n){return e.apply(this,arguments)};var e},Y=function(e){return t=s()(a.a.mark(function t(n,r){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:w(r(),e);case 1:case"end":return t.stop()}},t,k)})),function(e,n){return t.apply(this,arguments)};var t},Z=function(){return e=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(_.a)(n());case 1:case"end":return e.stop()}},e,k)})),function(t,n){return e.apply(this,arguments)};var e},X=function(){return e=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(_.c)(n());case 1:case"end":return e.stop()}},e,k)})),function(t,n){return e.apply(this,arguments)};var e},$=function(){return e=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(_.g)(n());case 1:case"end":return e.stop()}},e,k)})),function(t,n){return e.apply(this,arguments)};var e},ee=function(){return e=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(_.d)(n());case 1:case"end":return e.stop()}},e,k)})),function(t,n){return e.apply(this,arguments)};var e},te=function(e){return t=s()(a.a.mark(function t(n,r){var c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(c=r()).tooltipId!==e&&O(c);case 2:case"end":return t.stop()}},t,k)})),function(e,n){return t.apply(this,arguments)};var t},ne=function(){return e=s()(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n(),Object(m.a)(Object.assign({noun:"other_message",source:i.b.ChatView,action:i.a.ModDelete,chat:Object.assign({},Object(h.A)(t),Object(h.p)(t),Object(h.g)(t),Object(h.s)(t),Object(h.n)(t),Object(h.x)(t)),subreddit:Object.assign({},Object(p.a)(t),Object(p.b)(t))},Object(f.a)(t)));case 1:case"end":return e.stop()}var t},e,k)})),function(t,n){return e.apply(this,arguments)};var e},re=function(e){switch(e){case i.b.ChatSettings:return i.b.ChatSettings;default:return i.b.ChatView}},ae=function(e){return t=s()(a.a.mark(function t(n,r){var c,s,i,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:c=r(),s=Object(l.b)(c),i=s&&s.source,o=re(i),C(r(),e,o);case 5:case"end":return t.stop()}},t,k)})),function(e,n){return t.apply(this,arguments)};var t},ce=function(e){return t=s()(a.a.mark(function t(n,r){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:I(r(),e);case 1:case"end":return t.stop()}},t,k)})),function(e,n){return t.apply(this,arguments)};var t}},"./src/chat/actions/typingIndicator.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return h});var r=n("./node_modules/babel-runtime/regenerator/index.js"),a=n.n(r),c=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),s=n.n(c),i=n("./node_modules/lodash/isEqual.js"),o=n.n(i),u=n("./src/lib/makeActionCreator/index.ts"),d=n("./src/chat/selectors/channels.ts"),l="TYPING_INDICATOR__UPDATE",b=Object(u.a)(l),h=function(e){var t,n=e.channelId,r=e.usernames;return t=s()(a.a.mark(function e(t,c){var s,i,u,l,h;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=Object(d.B)(c(),"channelId"),i=c().typingIndicator.usernames,u=n===s,l=r.length>3&&i.length>3,h=!o()(r,i),u&&h&&!l&&t(b({usernames:r}));case 7:case"end":return e.stop()}},e,void 0)})),function(e,n){return t.apply(this,arguments)}}},"./src/chat/actions/user.ts":function(e,t,n){"use strict";var r=n("./node_modules/babel-runtime/regenerator/index.js"),a=n.n(r),c=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),s=n.n(c),i=n("./node_modules/lodash/chunk.js"),o=n.n(i),u=n("./node_modules/react-router-redux/es/index.js"),d=n("./src/lib/makeActionCreator/index.ts"),l=n("./src/chat/actions/channel.ts"),b=n("./src/chat/actions/theme.ts"),h=n("./src/chat/actions/tracking.ts"),f=n("./src/chat/constants/channels.ts"),p=n("./src/chat/endpoints/accounts/index.ts"),m=n("./src/chat/endpoints/sendbird/index.ts"),O=n("./src/chat/endpoints/users/index.ts"),j=n("./src/chat/helpers/errors.ts"),v=n("./src/chat/models/Channel/index.ts"),g=n("./src/chat/models/Contact/index.ts"),y=n("./node_modules/babel-runtime/helpers/typeof.js"),x=n.n(y),_=function(e){return Object.keys(e).reduce(function(t,n){var r=e[n];return"boolean"==typeof r&&(t[n]=r),"object"===(void 0===r?"undefined":x()(r))&&(t[n]=E(r)),t},{})},E=function(e){return{experimentId:e.experiment_id,owner:e.owner,variant:e.variant}},C=n("./src/chat/models/User/index.ts"),I=n("./src/chat/selectors/channels.ts"),w=n("./src/chat/selectors/user.ts"),k=n("./src/chat/singleton/SendbirdSDK.ts");n.d(t,"a",function(){return N}),n.d(t,"f",function(){return T}),n.d(t,"e",function(){return D}),n.d(t,"g",function(){return M}),n.d(t,"d",function(){return A}),n.d(t,"q",function(){return L}),n.d(t,"r",function(){return U}),n.d(t,"v",function(){return B}),n.d(t,"l",function(){return G}),n.d(t,"i",function(){return F}),n.d(t,"w",function(){return Q}),n.d(t,"h",function(){return J}),n.d(t,"m",function(){return Y}),n.d(t,"k",function(){return Z}),n.d(t,"t",function(){return X}),n.d(t,"j",function(){return $}),n.d(t,"s",function(){return ee}),n.d(t,"c",function(){return te}),n.d(t,"o",function(){return ae}),n.d(t,"u",function(){return ce}),n.d(t,"b",function(){return se}),n.d(t,"p",function(){return ue}),n.d(t,"n",function(){return le});var S=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n},N="USER__ACCOUNT_FETCH_COMPLETED",T="USER__REDDAID_RECEIVED",D="USER__LOID_RECEIVED",M="USER__SESSION_TRACKER_RECEIVED",A="FETCH_EXPERIMENTS_COMPLETED",L=Object(d.a)(D),R=Object(d.a)("USER__ACCOUNT_FETCH_PENDING"),H=Object(d.a)(N),P=Object(d.a)("USER__ACCOUNT_FETCH_FAILED"),U=Object(d.a)(T),B=Object(d.a)(M),K=Object(d.a)(A),G=function(){return e=s()(a.a.mark(function e(t,n,r){var c,s,i,o,u,d,l,h=r.apiContext;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((c=n()).user.session&&!c.user.account){e.next=3;break}return e.abrupt("return");case 3:return t(R()),e.next=6,Object(p.c)(h());case 6:(s=e.sent).ok&&s.body&&s.body.features?(i=s.body,o=s.body.features,u=Object(C.b)(i),d=_(o),l=!!u.prefNightmode,t(H(u)),t(K(d)),t(Object(b.b)(l))):t(P(s.error));case 8:case"end":return e.stop()}},e,void 0)})),function(t,n,r){return e.apply(this,arguments)};var e},F="USER__USERS_FETCH_COMPLETED",V=Object(d.a)("USER__USERS_FETCH_PENDING"),z=Object(d.a)(F),q=Object(d.a)("USER__USERS_FETCH_FAILED"),Q=function(e){return t=s()(a.a.mark(function t(n,r,c){var s,i,u,d,l,b,h,f,p,m,j,v,g=c.apiContext;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=100,i=r().contacts.models,u=e.filter(function(e){return!i[e]}),d=o()(u,s),u.length){t.next=6;break}return t.abrupt("return");case 6:return n(V(e)),t.next=9,Promise.all(d.map(function(e){return Object(O.d)(g(),e)})).catch(function(){return[]});case 9:for(l=t.sent,b=!0,h=!1,f=void 0,t.prev=13,p=l[Symbol.iterator]();!(b=(m=p.next()).done);b=!0)(j=m.value).ok?(v=Object(C.a)(j.body),n(z(v))):n(q());t.next=21;break;case 17:t.prev=17,t.t0=t.catch(13),h=!0,f=t.t0;case 21:t.prev=21,t.prev=22,!b&&p.return&&p.return();case 24:if(t.prev=24,!h){t.next=27;break}throw f;case 27:return t.finish(24);case 28:return t.finish(21);case 29:case"end":return t.stop()}},t,void 0,[[13,17,21,29],[22,,24,28]])})),function(e,n,r){return t.apply(this,arguments)};var t},J="USERS__USERS_ADD_SELECTED",W=Object(d.a)(J),Y=function(e){return t=s()(a.a.mark(function t(n,r){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n(W(e)),n(Object(h.f)(e));case 2:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},Z="USERS__USERS_REMOVE_SELECTED",X=Object(d.a)(Z),$="USERS__USERS_REMOVE_ALL_SELECTED",ee=Object(d.a)($),te="USERS__BLOCK_USER_COMPLETED",ne=Object(d.a)(te),re=Object(d.a)("USERS__BLOCK_USER_FAILED"),ae=function(e){return t=s()(a.a.mark(function t(n,r,c){var s,i,o,d,b,h,m,O,g,y=c.apiContext;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=r(),i=s.contacts.models[e],o=i&&i.name,d=Object(I.x)(s),b=Object(I.i)(s)||f.b.JOINED,h=d&&d.type===v.a.Direct,m=Object(I.k)(s)){t.next=9;break}throw new j.a("currentChannel",m);case 9:if(O=m.channelId){t.next=12;break}throw new j.a("blockedChannelId",O);case 12:return t.next=14,Object(p.a)(y(),e);case 14:(g=t.sent)&&g.ok&&h?k.b.hideChannel().then(function(){return n(ne({userId:e,username:o}))}).then(function(){return n(Object(l.L)(O))}).then(function(){return n(Object(l.P)(b))}):g&&g.ok&&!h?(n(ne({userId:e,username:o})),n(Object(u.a)())):g&&n(re(g.error));case 16:case"end":return t.stop()}},t,void 0)})),function(e,n,r){return t.apply(this,arguments)};var t},ce=function(e){return t=s()(a.a.mark(function t(n,r,c){var s,i,o,d=c.apiContext;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:s=e.user,i=e.reason,o={reason:i,userNickname:s.name},Object(O.a)(d(),o).then(function(){return n(Object(u.a)())});case 3:case"end":return t.stop()}},t,void 0)})),function(e,n,r){return t.apply(this,arguments)};var t},se="BLOCKED_USER_LIST_FETCH_COMPLETED",ie=Object(d.a)("BLOCKED_USER_LIST_FETCH_FAILED"),oe=Object(d.a)(se),ue=function(){return e=s()(a.a.mark(function e(t,n,r){var c,s,i,o,u,d,l=r.apiContext;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n(),(s=c.contacts).fetchedBlockedUsers){e.next=6;break}return e.next=4,Object(O.c)(l());case 4:(i=e.sent).ok&&i.body&&i.body.data?(o=i.body.data.children,u=s.models,d={},o.forEach(function(e){if(u[e.id])d[e.id]=Object.assign({},u[e.id],{isBlocked:!0});else{e.date;var t=S(e,["date"]);d[e.id]=Object.assign({},g.b,t,{isBlocked:!0})}}),t(oe({blockedContacts:d}))):t(ie(i.error));case 6:case"end":return e.stop()}},e,void 0)})),function(t,n,r){return e.apply(this,arguments)};var e},de=function(e){return{chat_ban:e.chatBan,delete_all_messages:e.deleteAllMessages,subreddit_id:e.subredditId,user_id:e.userId}},le=function(e){return t=s()(a.a.mark(function t(n,r,c){var s,i,o,d=c.apiContext;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=r(),!(i=Object(w.c)(s))){t.next=9;break}return o=de(e),t.next=6,Object(m.b)(d(),i,o);case 6:t.sent.ok||Object(j.b)("Error with ban user and delete all messages"),n(Object(u.a)());case 9:case"end":return t.stop()}},t,void 0)})),function(e,n,r){return t.apply(this,arguments)};var t}},"./src/chat/components/CloseIcon/index.tsx":function(e,t,n){"use strict";var r=n("./node_modules/babel-runtime/helpers/jsx.js"),a=n.n(r),c=(n("./node_modules/react/index.js"),n("./node_modules/react-redux/es/index.js")),s=n("./node_modules/reselect/lib/index.js"),i=n("./bundled-modules/styled-components/styled-components.min.js"),o=n.n(i),u=n("./src/chat/actions/container.ts"),d=n("./src/chat/actions/tracking.ts"),l=n("./src/chat/constants/container.ts"),b=n("./src/chat/controls/Button/index.tsx"),h=n("./src/chat/helpers/dom.ts"),f=n("./src/chat/helpers/styles/mixins/index.tsx"),p=n("./src/chat/icons/svgs/NavClose/index.tsx"),m=n("./src/chat/strings/index.ts"),O=o()(b.d).withConfig({componentId:"s10llmio-0"})(["","right: 1em;top: 1em;position: absolute;z-index: 3;"],f.e),j=Object(c.connect)(function(){return Object(s.createStructuredSelector)({containerSize:function(e){return e.container.size}})},function(e){return{close:function(){e(Object(u.c)(l.a.HIDDEN)),e(Object(d.c)())}}});t.a=j(function(e){var t=e.className,n=e.close,r=e.containerSize;return r===l.a.EMBED||r===l.a.MINIMIZED?a()(O,{onClick:Object(h.b)(n),title:Object(m.a)("en","app.layout.header.close"),className:t},void 0,a()(p.a,{})):null})},"./src/chat/components/Root/index.tsx":function(e,t,n){"use strict";var r=n("./node_modules/babel-runtime/helpers/jsx.js"),a=n.n(r),c=n("./node_modules/react/index.js"),s=n.n(c),i=n("./node_modules/react-router/es/index.js"),o=(n("./assets/fonts/IBMPlexSans/font.less"),n("./assets/fonts/NotoSans/font.less"),n("./node_modules/react-redux/es/index.js")),u=n("./node_modules/reselect/lib/index.js"),d=n("./src/config.ts"),l=n("./bundled-modules/styled-components/styled-components.min.js"),b=n.n(l),h=n("./src/chat/constants/theme.ts").b.REDDIT,f=b.a.div.withConfig({componentId:"s19ftv2p-0"})(['position: absolute;display: inline-block;text-align: center;width: 10%;top: 50%;left: 50%;margin-left: -20px;margin-top: -20px;:after {content: "";display: block;padding-bottom: 100%;}']),p=b.a.img.withConfig({componentId:"s19ftv2p-1"})(["height: 40px;width: 40px;"]),m=b()(function(e){return a()("div",{role:"progressbar",className:e.className},void 0,e.children)}).withConfig({componentId:"s19ftv2p-2"})(["position: absolute;top:0; right:0; left:0; bottom:0;z-index: ",";box-shadow: inset 0px 0px 150px 2000px ",";text-align: center;"],function(e){return e.zIndex?e.zIndex:1},function(e){return e.theme.layout.body}),O=Object(u.createStructuredSelector)({isNightmode:function(e){return function(e){return!(e.user.prefs.globalTheme!==h)}(e)}}),j=Object(o.connect)(O)(function(e){return a()(m,{zIndex:e.zIndex},void 0,a()(f,{},void 0,a()(p,{src:e.isNightmode?d.a.assetPath+"/img/loader_2orbit_loop.gif":d.a.assetPath+"/img/loader_2orbit_loop_nightmode.gif",alt:"Loading"})))}),v=n("./src/chat/components/CloseIcon/index.tsx"),g=n("./src/chat/selectors/app.ts"),y=Object(u.createStructuredSelector)({isHidden:g.e,isReady:g.f,alert:g.b,experiments:g.a}),x=Object(o.connect)(y)(function(e){return e.isHidden?null:e.isReady&&e.experiments?e.children:a()(s.a.Fragment,{},void 0,a()(v.a,{}),a()(j,{textType:e.alert||"",isFadeOut:e.isReady,zIndex:2}))}),_=n("./src/chat/components/ThemeProvider/index.tsx");function E(e,t){return a()(_.a,{},void 0,a()(e,{},void 0,a()(i.b,{component:function(e){return a()(x,{},void 0,a()(i.d,{location:e.location},void 0,t))}})))}n.d(t,"a",function(){return E})},"./src/chat/components/ThemeProvider/index.tsx":function(e,t,n){"use strict";var r=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/reselect/lib/index.js"),c=n("./bundled-modules/styled-components/styled-components.min.js"),s=Object(a.createSelector)(function(e){return e.themes.current},function(e){return{theme:e}}),i=c.ThemeProvider;t.a=Object(r.connect)(s)(i)},"./src/chat/constants/batchSizes.ts":function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e[e.Channels=10]="Channels",e[e.InitChannels=50]="InitChannels",e[e.Messages=40]="Messages"}(r||(r={}))},"./src/chat/constants/sidebar.ts":function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e[e.SubredditChannels=0]="SubredditChannels",e[e.DirectChannels=1]="DirectChannels"}(r||(r={}))},"./src/chat/constants/toast.ts":function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.ConnectionClosed="connectionClosed",e.ConnectionPending="connectionPending",e.ConnectionOpen="connectionOpen"}(r||(r={}))},"./src/chat/controls/Button/index.tsx":function(e,t,n){"use strict";var r=n("./node_modules/babel-runtime/helpers/jsx.js"),a=n.n(r),c=n("./node_modules/react/index.js"),s=n.n(c),i=n("./bundled-modules/styled-components/styled-components.min.js"),o=n.n(i),u=n("./src/chat/helpers/styles/mixins/index.tsx"),d=n("./node_modules/babel-runtime/helpers/extends.js"),l=n.n(d),b=n("./src/chat/controls/Svg/index.tsx"),h=function(e){return s.a.createElement(b.a,l()({},e,{viewBox:"0 0 16 16"}),a()("path",{d:"M11.829 6.722l1.677-3.145A.802.802 0 0 0 12.8 2.4H3.2a.8.8 0 0 0-.8.8v10.243a.8.8 0 1 0 1.6 0v-2.4h8.8a.799.799 0 0 0 .706-1.176L11.83 6.722z"}))},f=function(e){return s.a.createElement(b.a,l()({},e,{viewBox:"0 0 16 16"}),a()("path",{d:"M12.817 7.491a.798.798 0 0 1-.234.566L9.52 11.12a.798.798 0 0 1-1.132 0l-1.13-1.132-4.292 4.291a.797.797 0 0 1-1.132 0 .8.8 0 0 1 0-1.131l4.292-4.291-1.131-1.132a.8.8 0 0 1 0-1.13L8.057 3.53c.3-.3.831-.3 1.131 0l3.395 3.394c.15.15.234.354.234.566zM3.863 6.263a.8.8 0 0 1-.566-1.366L6.36 1.834a.8.8 0 0 1 1.131 1.131L4.43 6.028a.798.798 0 0 1-.566.235zm10.417 2.36a.8.8 0 0 1 0 1.13l-3.063 3.063a.798.798 0 0 1-1.13 0 .8.8 0 0 1 0-1.131l3.061-3.062a.8.8 0 0 1 1.132 0z"}))},p=function(e){return s.a.createElement(b.a,l()({},e,{viewBox:"0 0 16 16"}),a()("path",{d:"M7.634 10.034L8.67 9H1.8a.8.8 0 1 1 0-1.6h6.869L7.634 6.366a.8.8 0 1 1 1.132-1.132l2.399 2.4a.8.8 0 0 1 0 1.132l-2.4 2.4a.798.798 0 0 1-1.13 0 .8.8 0 0 1 0-1.132zM12.2 1c1.323 0 2.4 1.077 2.4 2.4V13c0 1.323-1.077 2.4-2.4 2.4H6.6A2.403 2.403 0 0 1 4.2 13v-.8a.8.8 0 1 1 1.6 0v.8c0 .44.358.8.8.8h5.6a.8.8 0 0 0 .8-.8V3.4a.8.8 0 0 0-.8-.8H6.6a.8.8 0 0 0-.8.8v.8a.8.8 0 1 1-1.6 0v-.8C4.2 2.077 5.277 1 6.6 1h5.6z",fillRule:"evenodd"}))},m=n("./src/chat/icons/svgs/Trash/index.tsx");n.d(t,"a",function(){return E}),n.d(t,"d",function(){return C}),n.d(t,"b",function(){return w}),n.d(t,"f",function(){return k}),n.d(t,"c",function(){return S}),n.d(t,"e",function(){return N});var O=Object(i.css)(["",";vertical-align: middle;border: 1px solid transparent;box-sizing: border-box;border-radius: 4px;cursor: pointer;outline: none;text-align: center;text-transform: uppercase;text-decoration: none;white-space: nowrap;&:focus {outline: none;}"],u.a.smallButtonFont),j=Object(i.css)(["background-color: ",";border-color: ",";color: ",";svg { fill: ","};"],function(e){return e.theme.activity.button.active},function(e){return e.theme.activity.button.active},function(e){return e.theme.activity.text.highlight},function(e){return e.theme.activity.text.highlight}),v=Object(i.css)(["background-color: ",";border-color: ",";color: ",";svg { fill: ","};"],function(e){return e.theme.layout.body},function(e){return e.theme.activity.button.active},function(e){return e.theme.activity.button.active},function(e){return e.theme.activity.text.regular}),g=Object(i.css)(["background: none;border: none;padding: 0;"]),y=Object(i.css)(["","color: ",";"],g,function(e){return e.theme.activity.text.active}),x=Object(i.css)(["","color: ",";"],g,function(e){return e.theme.activity.text.fade}),_=Object(i.css)(["","color: ",";"],g,function(e){return e.theme.activity.text.warning}),E=o()(function(e){return e.href?a()("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",title:e.title,className:e.className,tabIndex:0},void 0,e.children):a()("button",{type:e.type||"button",tabIndex:0,id:e.id,className:e.className,onClick:e.onClick,disabled:e.disabled,title:e.title},void 0,e.children)}).withConfig({componentId:"qs5dnm-0"})(["&[disabled] { opacity: 0.6 };display: inline-block;padding: 0.1em 0.8em;transition: background 0.3s;background: ",";height: ",";width: ",";","",";",";",";",";",";"],function(e){return e.theme.layout.body},function(e){return e.height?e.height:"auto"},function(e){return e.width?e.width:"auto"},O,function(e){return e.primary?j:""},function(e){return e.primaryNoBorder?y:""},function(e){return e.secondary?v:""},function(e){return e.secondaryNoBorder?x:""},function(e){return e.warningNoBorder?_:""}),C=o()(E).withConfig({componentId:"qs5dnm-1"})(["line-height: normal;padding: 0.1em 0.8em 0.2em;height: 100%;svg {height: 100%;vertical-align: middle;}"]),I=o.a.button.withConfig({componentId:"qs5dnm-2"})(["cursor: pointer;height: 1.25em;outline: none;vertical-align: middle;width: 1.25em;line-height: 0;background: transparent;"]),w=function(e){return s.a.createElement(I,e,a()(h,{}))},k=function(e){return s.a.createElement(I,e,a()(m.a,{}))},S=function(e){return s.a.createElement(I,e,a()(f,{}))},N=function(e){return s.a.createElement(I,e,a()(p,{}))}},"./src/chat/controls/Svg/index.tsx":function(e,t,n){"use strict";var r=n("./node_modules/babel-runtime/helpers/jsx.js"),a=n.n(r),c=(n("./node_modules/react/index.js"),n("./bundled-modules/styled-components/styled-components.min.js")),s=n.n(c);t.a=s()(function(e){return a()("svg",{className:e.className,viewBox:e.viewBox},void 0,e.children)}).withConfig({componentId:"unllzc-0"})(["height: ",";width: ",";vertical-align: middle;transition: all 0.2s;fill: ",";",";"],function(e){return e.height?e.height:"100%"},function(e){return e.width?e.width:"100%"},function(e){return e.disable?e.theme.activity.icon.disable:e.active?e.theme.activity.icon.active:e.hover?e.theme.activity.icon.hover:e.theme.activity.icon.default},function(e){return!1!==e.hover?"&:hover {\n        fill: "+function(e){return e.disable?e.theme.activity.icon.disable:e.theme.activity.icon.hover}+";\n    };":""})},"./src/chat/customMiddleware/containerSize.ts":function(e,t,n){"use strict";var r=n("./node_modules/lodash/once.js"),a=n.n(r),c=n("./src/chat/actions/container.ts"),s=n("./src/chat/constants/container.ts"),i=n("./src/chat/customMiddleware/noop.ts"),o=n("./src/chat/selectors/app.ts"),u=n("./src/lib/cache/index.ts"),d=n("./src/lib/constants/index.ts"),l=n("./src/lib/messageIframeParent/index.ts"),b=s.a.HIDDEN,h=s.a.HIDDEN,f=function(e){return e&&s.b[e]&&e!==s.a.FULL&&e||b||h},p=void 0,m=function(e){return Object(l.a)({type:"resize.chat",data:{size:e,dimensions:s.b[e]}})},O=a()(function(e){var t=e.getState(),n=Object(o.d)(t),r=void 0;r=t.meta.isRedesign?h:n?b:s.a.FULL,e.dispatch(Object(c.c)(r)),m(r)});t.a=function(e){if("undefined"==typeof window)return i.a;var t=e.getState(),n=t.user.account,r=n&&n.id||"unknown";return p=Object(u.c)(d.q.CHAT,"container",r),Object(o.b)(t)||O(e),window.addEventListener("storage",function(e){e.key}),function(e){return function(t){var n=e(t);switch(t.type){case c.a:var r=f(t.payload);!function(e){Object(u.d)(p,e,u.a)}(r),m(r)}return n}}}},"./src/chat/customMiddleware/heartbeat.ts":function(e,t,n){"use strict";var r=n("./src/chat/constants/container.ts"),a=n("./src/chat/tracking/sendEvent.ts"),c=n("./src/telemetry/models/Event.ts"),s=n("./src/chat/tracking/fields/common.ts"),i=function(e){Object(a.a)(Object.assign({noun:"timing",source:c.b.Global,action:c.a.Heartbeat},Object(s.a)(e)))},o=n("./src/lib/constants/index.ts");t.a=function(e){var t=e.getState();i(t);return function e(){setTimeout(function(){var n=t.container.size;n!==r.a.EMBED&&n!==r.a.FULL||!document.hasFocus()||i(t),e()},30*o.qb)}(),function(n){return function(r){var a=n(r);return t=e.getState(),a}}}},"./src/chat/customMiddleware/iframeDispatcher.ts":function(e,t,n){"use strict";var r,a=n("./node_modules/lodash/once.js"),c=n.n(a),s=n("./node_modules/react-router-redux/es/index.js"),i=n("./node_modules/url/url.js"),o=n("./src/lib/constants/index.ts"),u=n("./src/lib/messageIframeParent/index.ts"),d=n("./src/chat/actions/channel.ts"),l=n("./src/chat/actions/container.ts"),b=n("./src/chat/actions/message/unreadCount.ts"),h=n("./src/chat/actions/promo.ts"),f=n("./src/chat/constants/container.ts"),p=n("./src/chat/customMiddleware/noop.ts"),m=n("./src/chat/helpers/unreadCount.ts"),O=n("./src/chat/helpers/urls/index.ts"),j=n("./src/chat/selectors/promos.ts"),v=n("./src/chat/tracking/events/platform.ts");!function(e){e.Navigate="navigate.chat",e.Websocket="websocket.chat",e.Expand="expand.chat",e.UnreadCount="unreadCount.chat"}(r||(r={}));var g=c()(function(e){window.addEventListener("message",function(t){var n=function(e){try{return JSON.parse(e.data)}catch(e){return}}(t);if(n)switch(n.type){case r.Navigate:var a=Object(i.parse)(n.data.href).pathname||O.i;e.dispatch(Object(s.b)(a)),e.dispatch(Object(l.c)(f.a.EMBED));break;case r.Websocket:e.dispatch(Object(b.b)());break;case r.Expand:var c=e.getState();e.dispatch(Object(l.c)(f.a.EMBED));var u=c.platform.currentPage;u&&u.meta&&u.meta.name===o.lb.CHAT_MINIMIZE&&e.dispatch(Object(d.P)());var h=n.data.telemetry,p=h.action,m=h.noun,j=h.source;Object(v.a)(c,m,j,p)}})});t.a=function(e){return"undefined"==typeof window?p.a:(g(e),function(t){return function(n){switch(n.type){case h.b:case b.a:var a=Object(j.b)(e.getState()),c=Object.assign({},n.payload),s=Object(m.a)(c,a),i=s.unread,o=s.count;Object(u.a)({type:r.UnreadCount,data:{unread:i,count:o}})}return t(n)}})}},"./src/chat/customMiddleware/loggedOutPreferencesSync.ts":function(e,t,n){"use strict";var r=n("./node_modules/js-cookie/src/js.cookie.js"),a=n.n(r),c=n("./node_modules/lodash/pick.js"),s=n.n(c),i=n("./src/config.ts"),o=n("./src/chat/actions/theme.ts"),u=new Set([o.a]);t.a=function(e){return function(t){return function(n){var r=t(n);if(u.has(n.type)){var c=e.getState().user,o={prefs:s()(c.prefs,["layout","globalTheme"]),language:c.language};a.a.set("USER",btoa(JSON.stringify(o)),{domain:i.a.cookieDomain})}return r}}}},"./src/chat/customMiddleware/noop.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return function(t){return e(t)}}},"./src/chat/customMiddleware/sendbirdToken.ts":function(e,t,n){"use strict";var r=n("./node_modules/babel-runtime/regenerator/index.js"),a=n.n(r),c=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),s=n.n(c),i=n("./node_modules/lodash/defer.js"),o=n.n(i),u=n("./src/lib/constants/index.ts"),d=n("./src/chat/actions/channel.ts"),l=n("./src/chat/actions/container.ts"),b=n("./src/chat/actions/message/unreadCount.ts"),h=n("./src/chat/actions/platform.ts"),f=n("./src/chat/actions/sendbird/index.ts"),p=n("./src/chat/actions/sendbird/config.ts"),m=n("./src/chat/actions/sendbird/sdk.ts"),O=n("./src/chat/actions/session.ts"),j=n("./src/chat/constants/container.ts"),v=n("./src/chat/constants/sendbird.ts"),g=n("./src/chat/customMiddleware/noop.ts"),y=n("./src/chat/selectors/platform.ts"),x=n("./src/chat/selectors/sendbird.ts"),_=function(e,t){var n=t&&t.type===l.a?t.payload:e.container.size,r=n===j.a.MINIMIZED||n===j.a.HIDDEN,a=t&&t.type===h.a?t.payload&&t.payload.routeMatch&&t.payload.routeMatch.route.meta.name===u.lb.CHAT_MINIMIZE:e.platform.currentPage&&e.platform.currentPage.meta&&e.platform.currentPage.meta.name===u.lb.CHAT_MINIMIZE;return!r&&a};t.a=function(e){if("undefined"==typeof window)return g.a;var t=void 0,n=function(){var n=e.getState().sendbird.session;n.expires&&n.active?function(n){var r=new Date,a=new Date(n.expires||0),c=Math.floor(.9*(a.getTime()-r.getTime()));t=setTimeout(function(){e.dispatch(Object(f.m)())},c)}(n):o()(function(){return e.dispatch(Object(f.m)())})};Object(y.a)(e.getState())===u.lb.CHAT_MINIMIZE?o()(s()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!_(e.getState())){t.next=4;break}n(),t.next=9;break;case 4:return t.next=6,e.dispatch(Object(f.m)(!1));case 6:if(!e.getState().sendbird.session.token){t.next=9;break}return t.next=9,e.dispatch(Object(b.b)());case 9:case"end":return t.stop()}},t,void 0)}))):n();var r=void 0;return function(c){return function(i){var b=e.getState(),g=Object(x.b)(b)===v.b.Closed,y=Object(x.e)(b);switch(i.type){case l.a:if(!i.payload)break;var E=i.payload!==j.a.MINIMIZED&&i.payload!==j.a.HIDDEN;E&&(clearTimeout(r),r=null),g&&E&&!y&&n(),!y||i.payload!==j.a.HIDDEN&&i.payload!==j.a.MINIMIZED||(r=setTimeout(function(){e.dispatch(Object(m.f)())},10*u.Ga));break;case h.a:var C=_(b,i);g&&C?n():C&&e.dispatch(Object(d.P)());break;case f.h:if(!i.payload)break;if(!i.payload.active)break;o()(s()(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch(Object(p.d)());case 2:if(!i.payload||!i.payload.token){t.next=6;break}return n=i.payload.token,t.next=6,e.dispatch(Object(m.e)(n));case 6:case"end":return t.stop()}},t,void 0)})));break;case O.b:e.dispatch(Object(m.f)()),clearTimeout(t),clearTimeout(r),t=null,r=null}return c(i)}}}},"./src/chat/customMiddleware/title.ts":function(e,t,n){"use strict";var r=n("./src/chat/actions/message/unreadCount.ts"),a=n("./src/chat/customMiddleware/noop.ts");t.a=function(){var e="undefined"!=typeof window;if(!e)return a.a;var t=window.document.title;return function(n){return function(a){var c=n(a);switch(a.type){case r.a:var s=a.payload,i=s.basicChannelCount,o=s.subredditChannelCount;e&&(window.document.title=i>0?"("+i+") "+t:o>0?"(*) "+t:t)}return c}}}},"./src/chat/customMiddleware/tokenRefresher.ts":function(e,t,n){"use strict";var r=n("./node_modules/lodash/throttle.js"),a=n.n(r),c=n("./src/lib/constants/index.ts"),s=n("./src/chat/actions/channel.ts"),i=n("./src/chat/actions/session.ts"),o=n("./src/chat/helpers/errors.ts"),u=5*c.Ga;t.a=function(e){var t=a()(function(){e.dispatch(Object(i.d)())},u),n=void 0,r=void 0,c=function(){var n=e.getState().user.session;if(n&&r){var a=new Date(n.expires),c=r+Math.floor(.8*(a.getTime()-r));Date.now()>c&&t&&t()}},d=function(e){r=Date.now();var a=new Date(e.expires).getTime()-r,c=.8+.1*Math.random(),s=Math.min(Math.floor(c*e.expiresIn*1e3),Math.floor(c*a));n=setTimeout(t,s)},l=e.getState();l.user.session&&d(l.user.session);try{window.parent.addEventListener("focus",c),window.parent.addEventListener("touchend",c),document.body.addEventListener("mouseenter",c)}catch(e){Object(o.b)("Token Refresher Error: "+e)}return function(e){return function(t){return t.type!==i.a&&t.type!==i.c||d(t.payload),t.type===s.w&&c(),t.type===i.b&&(clearTimeout(n),n=null),e(t)}}}},"./src/chat/customMiddleware/tracking.ts":function(e,t,n){"use strict";var r=n("./node_modules/lodash/once.js"),a=n.n(r),c=n("./src/lib/logs/timing.js"),s=n("./src/chat/actions/channel.ts"),i=n("./src/chat/actions/message/index.ts"),o=n("./src/chat/actions/platform.ts"),u=n("./src/chat/actions/sendbird/index.ts"),d=n("./src/chat/actions/sidebar.ts"),l=n("./src/chat/constants/channels.ts"),b=n("./src/chat/constants/sidebar.ts"),h=n("./src/chat/selectors/channels.ts"),f=n("./src/chat/selectors/platform.ts"),p=n("./src/chat/tracking/sendEvent.ts"),m=n("./src/telemetry/models/Event.ts"),O=n("./src/telemetry/models/Timer.ts"),j=n("./src/chat/tracking/fields/chat.ts"),v=n("./src/chat/tracking/fields/common.ts"),g=function(e){return{type:e}},y=function(e){return{millis:e}},x=n("./src/chat/tracking/events/chatPreview.ts"),_=n("./src/chat/tracking/events/chatView.ts"),E=n("./src/chat/tracking/events/contactsList.ts"),C=n("./src/chat/tracking/events/invitationInbox.ts"),I=n("./src/chat/tracking/events/messagesInbox.ts"),w=a()(function(e,t){return function(e,t){Object(p.a)(Object.assign({noun:"inbox_new",source:m.b.ChatPerformance,action:m.a.Load,chat:Object.assign({},Object(j.o)(e),Object(j.q)(e)),timer:Object.assign({},g(O.TimerType.ChatLoadInboxNew),y(t))},Object(v.a)(e)))}(e,function(e){return Date.now()-e}(t))}),k=a()(function(e){return Object(f.d)(e)&&S(e)}),S=function(e){e.sidebarTabs.activeIndex===b.a.DirectChannels?Object(I.e)(e):Object(I.f)(e)},N=Object(c.d)(function(e,t,n){Object(h.K)(e)?function(e,t){Object(p.a)(Object.assign({noun:"channel_cached",source:m.b.ChatPerformance,action:m.a.Load,chat:Object.assign({},Object(j.g)(e)),timer:Object.assign({},g(O.TimerType.ChatLoadChannelCached),y(t))},Object(v.a)(e)))}(t,n):function(e,t){Object(p.a)(Object.assign({noun:"channel_new",source:m.b.ChatPerformance,action:m.a.Load,chat:Object.assign({},Object(j.g)(e)),timer:Object.assign({},g(O.TimerType.ChatLoadChannelNew),y(t))},Object(v.a)(e)))}(t,n)}),T=function(e){Object(f.c)(e)===l.a.CREATE&&Object(E.g)(e)};t.a=function(e){return function(t){return function(n){return function(r){var a=n(r),c=t.getState();switch(r.type){case o.a:w(c,e),T(c);break;case s.p:N(c,!0);break;case s.r:T(c),k(c);break;case s.q:w(c,e),function(e){Object(f.c)(e)===l.a.VIEW_INVITE&&Object(C.g)(e)}(c),function(e){Object(f.g)(e)&&Object(_.c)(e)}(c),N(c),function(e){Object(f.c)(e)===l.a.VIEW_JOIN&&Object(x.b)(e)}(c);break;case i.k:case u.c:w(c,e);break;case d.b:S(c)}return a}}}}},"./src/chat/customMiddleware/unreadMessageCount.ts":function(e,t,n){"use strict";var r=n("./node_modules/lodash/debounce.js"),a=n.n(r),c=n("./src/chat/actions/message/unreadCount.ts"),s=n("./src/chat/customMiddleware/noop.ts"),i=n("./src/lib/cache/index.ts"),o=n("./src/lib/constants/index.ts"),u=void 0,d=void 0,l=a()(function(e){Object(i.d)(u,e,5*o.Ga)},5*o.qb,{leading:!1,trailing:!0}),b=void 0,h=function(){b&&clearInterval(b),b=setInterval(function(){void 0===Object(i.b)(u)&&Object(c.b)()},5*o.Ga)};t.a=function(e){if("undefined"==typeof window)return s.a;var t=e.getState(),n=t.user.account,r=n&&n.id||"unknown";u=Object(i.c)(o.q.CHAT,"unread_message_count",r),l(t.messages.unread.basicChannelCount),h();try{window.parent.addEventListener("focus",h)}catch(e){}return function(e){return function(t){var n=e(t);switch(t.type){case c.a:var r=t.payload.basicChannelCount;r!==d&&l(r)}return n}}}},"./src/chat/endpoints/accounts/index.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return b}),n.d(t,"a",function(){return h}),n.d(t,"b",function(){return f});var r,a,c,s=n("./node_modules/babel-runtime/regenerator/index.js"),i=n.n(s),o=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),u=n.n(o),d=n("./src/lib/constants/index.ts"),l=n("./src/lib/makeApiRequest/index.ts"),b=(r=u()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(l.b)(t,{endpoint:t.apiUrl+"/api/v1/me",method:d.Fa.GET,data:{raw_json:1}}));case 1:case"end":return e.stop()}},e,void 0)})),function(e){return r.apply(this,arguments)}),h=(a=u()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(l.b)(t,{data:{account_id:n,raw_json:1},endpoint:t.apiUrl+"/api/block_user",method:d.Fa.POST}));case 1:case"end":return e.stop()}},e,void 0)})),function(e,t){return a.apply(this,arguments)}),f=(c=u()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(l.b)(t,{endpoint:t.apiUrl+"/user/"+n+"/about",method:d.Fa.GET,data:{raw_json:1}}));case 1:case"end":return e.stop()}},e,void 0)})),function(e,t){return c.apply(this,arguments)})},"./src/chat/helpers/dom.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var r=function(e){return function(t){if(t.preventDefault(),e&&"function"==typeof e)return e(t)}},a=function(e){return function(t){if(t.preventDefault(),t.stopPropagation(),e&&"function"==typeof e)return e(t)}}},"./src/chat/helpers/linkParser/index.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"c",function(){return i});var r=n("./src/lib/linkMatchers/index.ts"),a=function(e){return!!r.c.test(e)},c=function(e,t,n){var r=[],a=0;return t.forEach(function(t){var c=t.index,s=t.lastIndex,i=t.text,o=t.url,u=t.schema,d="mailto:"===u?"_self":"_blank";r.push(e.substring(a,c)),r.push(n(o,i,d,u)),a=s}),r.push(e.substring(a,e.length)),r},s=/^(((file|https?|ftps?):)?\/|mailto:)/i,i=function(e){return void 0===e?e:e.match(s)?e:"#"};t.a=function(e,t,n){var a=Object(r.a)(e,t);return a&&a.length?c(e,a,n):e}},"./src/chat/helpers/styles/functions/index.tsx":function(e,t,n){"use strict";function r(){return"transition: "+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all")+" "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0.2s")+";"}n.d(t,"a",function(){return r})},"./src/chat/helpers/styles/mixins/index.tsx":function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return b}),n.d(t,"d",function(){return h}),n.d(t,"f",function(){return f}),n.d(t,"g",function(){return p}),n.d(t,"e",function(){return m});var r=n("./node_modules/lodash/omit.js"),a=n.n(r),c=n("./bundled-modules/styled-components/styled-components.min.js"),s=n("./src/reddit/helpers/styles/mixins/fonts.tsx"),i=n("./src/chat/helpers/styles/functions/index.tsx"),o=Object(c.css)(["color: ",";",";-moz-osx-font-smoothing: grayscale;"],function(e){return e.theme.activity.text.regular},Object(i.a)("color")),u=a()(s,["BODY_FONT_FAMILY","CODE_FONT_FAMILY"]);var d=function(e){for(var t in e)e[t]=Object(c.css)(["","",""],o,e[t]);return e}(Object.assign({},u,{usernameFont:"\n    font-size: 13px;\n    line-height: 15px;\n  "})),l=Object(c.css)(["outline: none;&:focus {box-shadow: 0 0 3px 1px ",";}"],function(e){return e.theme.activity.input.focusBg}),b=Object(c.css)(["color: ",";"],function(e){return e.theme.activity.link.staticText}),h=Object(c.css)(["",";",";cursor: pointer;border-bottom: 1px solid ",";&:hover{color: ",";border-bottom: 1px solid ",";}"],b,Object(i.a)(),function(e){return e.theme.activity.link.staticUnderline},function(e){return e.theme.activity.link.hoverText},function(e){return e.theme.activity.link.hoverText}),f=Object(c.css)(["word-break: break-all;line-break: strict;overflow-wrap: break-word;word-break: break-word;word-break: break-all;word-wrap: break-word;hyphens: auto;"]),p=Object(c.css)(["display: inline-block;overflow-wrap: break-word;word-wrap: break-word;a {","}"],f),m=Object(c.css)(["width: 2em;height: 2em;padding: 0;box-sizing: content-box;border: 0;transition: background 0.3s;"])},"./src/chat/icons/svgs/ChatNew/index.tsx":function(e,t,n){"use strict";var r=n("./node_modules/babel-runtime/helpers/extends.js"),a=n.n(r),c=n("./node_modules/babel-runtime/helpers/jsx.js"),s=n.n(c),i=n("./node_modules/react/index.js"),o=n.n(i),u=n("./src/chat/controls/Svg/index.tsx");t.a=function(e){return o.a.createElement(u.a,a()({},e,{viewBox:"0 0 16 16"}),s()("path",{d:"M10.625 8.656h-1.97v1.97c0 .36-.293.655-.655.655-.362 0-.656-.293-.656-.655v-1.97h-1.97c-.36 0-.655-.293-.655-.655 0-.362.293-.656.655-.656h1.97v-1.97c0-.36.293-.655.655-.655.362 0 .656.293.656.655v1.97h1.97c.36 0 .655.293.655.655 0 .362-.293.656-.655.656M8 1C4.14 1 1 4.14 1 8c0 1.222.317 2.372.87 3.373l-.824 2.476c-.105.313-.024.66.21.894.167.167.39.256.62.256.09 0 .185-.015.275-.045l2.478-.825c1 .553 2.15.87 3.372.87 3.86 0 7-3.14 7-7s-3.14-7-7-7"}))}},"./src/chat/icons/svgs/NavClose/index.tsx":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n("./node_modules/babel-runtime/helpers/extends.js"),a=n.n(r),c=n("./node_modules/babel-runtime/helpers/jsx.js"),s=n.n(c),i=n("./node_modules/react/index.js"),o=n.n(i),u=n("./src/chat/controls/Svg/index.tsx"),d=function(e){return o.a.createElement(u.a,a()({},e,{viewBox:"0 0 20 20"}),s()("path",{d:"M11.105 9.75l4.114-4.114a.957.957 0 1 0-1.355-1.355L9.75 8.395 5.636 4.281a.957.957 0 1 0-1.355 1.355L8.395 9.75l-4.114 4.114a.957.957 0 1 0 1.355 1.355l4.114-4.114 4.114 4.114a.956.956 0 0 0 1.355 0 .957.957 0 0 0 0-1.355L11.105 9.75z",fillRule:"evenodd"}))};d.displayName="NavClose"},"./src/chat/icons/svgs/Trash/index.tsx":function(e,t,n){"use strict";var r=n("./node_modules/babel-runtime/helpers/extends.js"),a=n.n(r),c=n("./node_modules/babel-runtime/helpers/jsx.js"),s=n.n(c),i=n("./node_modules/react/index.js"),o=n.n(i),u=n("./src/chat/controls/Svg/index.tsx");t.a=function(e){return o.a.createElement(u.a,a()({},e,{viewBox:"0 0 16 16"}),s()("path",{d:"M10.845 11.6c0 .22-.182.4-.407.4a.403.403 0 0 1-.406-.4V7.2c0-.22.182-.4.406-.4.225 0 .407.18.407.4v4.4zm-2.438 0c0 .22-.183.4-.407.4a.403.403 0 0 1-.406-.4V7.2c0-.22.182-.4.406-.4.224 0 .407.18.407.4v4.4zm-2.439 0c0 .22-.182.4-.406.4a.403.403 0 0 1-.406-.4V7.2c0-.22.182-.4.406-.4.224 0 .406.18.406.4v4.4zm6.426-6.8c.225 0 .406.18.406.4v8c0 .662-.547 1.2-1.219 1.2H4.42c-.672 0-1.219-.538-1.219-1.2v-8c0-.22.181-.4.407-.4h8.787zm0-2.4c.224 0 .406.18.406.4v.8c0 .22-.182.4-.407.4H3.606a.403.403 0 0 1-.406-.4v-.8c0-.22.182-.4.406-.4H6.01l.602-.666a.411.411 0 0 1 .304-.134h2.166c.116 0 .226.049.304.134l.602.666h2.404z",fillRule:"evenodd"}))}},"./src/chat/models/Channel/platform.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("./src/chat/models/Channel/subreddit.ts"),a=n("./src/chat/models/Channel/utils.ts"),c=n("./src/chat/models/User/inviter.ts"),s=n("./src/chat/models/User/member.ts");function i(e,t){return{channelId:Object(a.e)(e.channel_url),channelSendbirdUrl:e.channel_url,channelState:Object(a.b)(t),fetchingFirstMessage:!1,fetchingMessages:!1,fetchingMessagesError:!1,hasMoreMessages:!1,isMessageListLoaded:!1,inviter:Object(c.b)(e.inviter),coverUrl:e.cover_url,createdAt:e.created_at,customType:e.custom_type,data:e.data,maxLengthMessage:-1,memberCount:e.member_count,name:e.name,type:Object(a.d)(e),lastMessage:void 0,unreadMessageCount:e.unread_message_count,unreadMentionCount:e.unread_mention_count,members:Object(s.a)(e.members),customData:Object(r.d)(e.data)}}},"./src/chat/models/Contact/index.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"a",function(){return c}),n.d(t,"d",function(){return s}),n.d(t,"b",function(){return i});var r=n("./src/lib/constants/index.ts");function a(e){return e?e.map(s).filter(function(e){return!!e}):[]}var c=3;function s(e){if(e.contact_account_id||e.id)return{id:e.contact_account_id||r.Sa.ACCOUNT+"_"+e.id,name:e.name,lastInteraction:e.last_interaction,created:e.created_utc,linkKarma:e.link_karma,commentKarma:e.comment_karma,profileImg:e.profile_img,isNSFW:e.profile_over_18}}var i={id:"",name:"",profileImg:"",lastInteraction:0,created:0,linkKarma:0,commentKarma:0,isNSFW:!1}},"./src/chat/models/Theme/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r,a=n("./node_modules/babel-runtime/helpers/defineProperty.js"),c=n.n(a),s=n("./node_modules/polished/dist/polished.es.js"),i=n("./src/reddit/constants/theme.ts"),o=n("./src/reddit/models/Theme/index.ts"),u=n("./src/chat/constants/theme.ts"),d=n("./src/reddit/constants/colors.ts"),l=i.b.REDDIT,b=i.b.NIGHT,h=function(e){return o.d[e].newRedditTheme},f={activity:{icon:{default:Object(s.a)(.3,d.a.white),active:d.a.op,disable:Object(s.a)(.5,d.a.white),hover:Object(s.a)(.5,d.a.white),contrast:h(l).bodyText,nsfw:{bg:d.a.black,text:d.a.white}},text:{regular:h(l).bodyText,active:d.a.op,fade:Object(s.a)(.4,d.a.white),light:h(l).actionIcon,warning:d.a.warning,highlight:d.a.white},button:{active:d.a.alienblue},send:{disable:Object(s.a)(.5,d.a.white),hover:Object(s.a)(.08,d.a.op)},checkbox:{checked:d.a.alienblue,checkmark:d.a.white,unchecked:h(l).body,uncheckedBorder:Object(s.a)(.3,d.a.white)},input:{border:d.a.defaultFlair,focusColor:d.a.white,focusBg:d.a.approved,ownerBg:h(l).line,color:h(l).bodyText,error:d.a.warning,channelRename:Object(s.a)(.1,d.a.white)},link:{staticUnderline:d.a.alienblue,staticText:d.a.op,hoverText:d.a.snoo}},layout:{body:h(l).body,colsBorder:h(l).line,header:{counterBg:d.a.snoo,counterText:d.a.white},scrollbar:Object(s.a)(.4,d.a.white)},message:{list:{item:{ownerBg:h(l).inactive,button:h(l).actionIcon}}},subreddit:{iconBg:d.a.alienblue},sidebar:{background:Object(s.e)(Object(s.a)(.3,d.a.white),.1),subreddit:{background:{active:d.a.alienblue,hover:h(l).canvas}},basic:{background:{active:d.a.alienblue,hover:h(l).canvas}},text:{divider:Object(s.a)(.5,d.a.white)}},toast:{pending:d.a.black,success:d.a.approved}},p={activity:{icon:{default:Object(s.a)(.3,d.a.white),active:d.a.op,disable:Object(s.a)(.5,d.a.white),hover:Object(s.a)(.5,d.a.white),contrast:Object(s.a)(.4,h(b).bodyText),nsfw:{bg:d.a.black,text:d.a.white}},text:{regular:h(b).bodyText,active:d.a.op,fade:Object(s.a)(.4,d.a.white),light:h(b).actionIcon,warning:d.a.warning,highlight:d.a.white},button:{active:d.a.alienblue},send:{disable:Object(s.a)(.5,d.a.white),hover:Object(s.a)(.08,d.a.op)},checkbox:{checked:d.a.alienblue,checkmark:d.a.white,unchecked:h(b).body,uncheckedBorder:Object(s.a)(.3,d.a.white)},input:{border:d.a.defaultFlair,focusColor:d.a.white,focusBg:d.a.approved,ownerBg:h(b).line,color:h(b).bodyText,error:d.a.warning,channelRename:Object(s.a)(.1,d.a.white)},link:{staticUnderline:d.a.alienblue,staticText:d.a.op,hoverText:d.a.snoo}},layout:{body:h(b).body,colsBorder:h(b).line,header:{counterBg:d.a.snoo,counterText:d.a.white},scrollbar:Object(s.a)(.4,h(b).bodyText)},message:{list:{item:{ownerBg:h(b).inactive,button:h(b).actionIcon}}},subreddit:{iconBg:d.a.alienblue},sidebar:{background:Object(s.e)(Object(s.a)(.4,d.a.white),.1),subreddit:{background:{active:d.a.alienblue,hover:Object(s.f)(.2,h(b).canvas)}},basic:{background:{active:d.a.alienblue,hover:Object(s.f)(.2,h(b).canvas)}},text:{divider:Object(s.a)(.5,d.a.white)}},toast:{pending:d.a.black,success:d.a.approved}},m=(r={},c()(r,u.b.REDDIT,f),c()(r,u.b.NIGHT,p),r)},"./src/chat/models/User/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return i});var r=n("./src/lib/constants/index.ts"),a=n("./src/lib/convertToCamelCase/index.ts"),c=r.Sa.ACCOUNT+"_",s=function(e){var t,n={};for(var r in e)n[r]={id:(t=Object.assign({id:r},e[r])).id,name:t.name,created:t.created_utc,linkKarma:t.link_karma,commentKarma:t.comment_karma,profileImg:t.profile_img,isNSFW:t.profile_over_18};return n};var i=function(e){var t=function(e){return e&&e.id&&(e.id.includes(c)?e.id=e.id:e.id=c+e.id),e}(e);return Object(a.a)(t)}},"./src/chat/pageLoaders/async.ts":function(e,t,n){"use strict";var r=n("./src/lib/constants/index.ts"),a=n("./node_modules/babel-runtime/helpers/jsx.js"),c=n.n(a),s=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),i=n.n(s),o=n("./node_modules/babel-runtime/helpers/createClass.js"),u=n.n(o),d=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),l=n.n(d),b=n("./node_modules/babel-runtime/helpers/inherits.js"),h=n.n(b),f=n("./node_modules/react/index.js"),p=n.n(f),m=n("./src/chat/strings/index.ts"),O=n("./src/config.ts"),j=n("./bundled-modules/styled-components/styled-components.min.js"),v=n.n(j),g=n("./src/chat/components/CloseIcon/index.tsx"),y=n("./src/chat/controls/Button/index.tsx"),x=n("./src/chat/helpers/styles/mixins/index.tsx"),_=v.a.h2.withConfig({componentId:"tfcdf4-0"})(["",";padding: 0;margin: 0;"],x.a.titleFontH4),E=v.a.p.withConfig({componentId:"tfcdf4-1"})(["",";padding: 0;margin: 0;"],x.a.titleFontH5),C=v.a.div.withConfig({componentId:"tfcdf4-2"})(["display: table;width: 100%;height: 100%;"]),I=v.a.div.withConfig({componentId:"tfcdf4-3"})(["display: table-cell;vertical-align: middle;text-align: center;"]),w=function(e){return c()(C,{className:e.className},void 0,c()(I,{},void 0,e.children))},k=n("./src/chat/icons/svgs/ChatNew/index.tsx"),S=n("./src/chat/helpers/urls/index.ts"),N=n("./node_modules/react-router-dom/es/index.js"),T=v.a.div.withConfig({componentId:"s19o1wft-0"})(["display: inline-block;padding: 10px;"]),D=v.a.img.withConfig({componentId:"s19o1wft-1"})(["vertical-align: middle;display: inline-block;height: 180px;width: 180px;"]),M=v.a.div.withConfig({componentId:"s19o1wft-2"})(["vertical-align: middle;display: inline-block;max-width: 250px;padding: 20px 0 20px 30px;text-align: left;"]),A=v()(_).withConfig({componentId:"s19o1wft-3"})(["padding-bottom: 10px;font-weight: bold;"]),L=v()(y.a).withConfig({componentId:"s19o1wft-4"})(["font-size: 1em;height: 2.4em;margin-top: 1em;padding: 0.2em 2em;"]),R=function(){return c()(w,{},void 0,c()(g.a,{}),c()(T,{},void 0,c()(D,{src:O.a.assetPath+"/img/chat/empty-hero.png"}),c()(M,{},void 0,c()(A,{},void 0,Object(m.a)("en","app.chat.emptyState.title")),c()(E,{},void 0,Object(m.a)("en","app.chat.emptyState.main"),c()(N.a,{to:Object(S.c)("create")},void 0,c()(L,{primary:!0},void 0,c()(k.a,{width:"1em"})," ",Object(m.a)("en","app.chat.actions.new")))))))},H=function(e){function t(){return i()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h()(t,e),u()(t,[{key:"render",value:function(){return c()(R,{})}}]),t}(p.a.Component),P=function(e){function t(){return i()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h()(t,e),u()(t,[{key:"render",value:function(){return null}}]),t}(p.a.Component);t.a=function(e){return function(){switch(e){case r.r.CHAT:return n.e("ChatPage").then(n.bind(null,"./src/chat/pages/Chat.tsx")).then(function(e){return e.default});case r.r.CHAT_EMPTY:return Promise.resolve(H);case r.r.CHAT_MINIMIZE:return Promise.resolve(P);default:throw new Error("Route is not defined for '"+e+"'.")}}}},"./src/chat/reducers/index.ts":function(e,t,n){"use strict";var r=n("./node_modules/redux/es/index.js"),a=n("./src/app/reducers/tooltipId/index.ts"),c=n("./src/chat/actions/channel.ts"),s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(arguments[1].type){case c.r:return!0;default:return e}},i=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),o=n.n(i),u=n("./node_modules/lodash/uniq.js"),d=n.n(u),l=n("./src/chat/models/Channel/index.ts"),b=n("./src/chat/models/Channel/utils.ts"),h={fetchingChannels:!1,hasMoreChannels:!1,sortedKeys:[]},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments[1];switch(t.type){case c.h:return Object.assign({},e,{fetchingChannels:!0});case c.i:return Object.assign({},e,{fetchingChannels:!1});case c.a:var n=t.payload,r=n.channels,a=n.hasMoreChannels,s=Object(b.c)(r,[l.a.Direct,l.a.Group]);if(!s)return e;var i=Object.keys(s),u=a&&!!i.length;return Object.assign({},e,{fetchingChannels:!1,hasMoreChannels:u,sortedKeys:[].concat(o()(e.sortedKeys),o()(i))});case c.t:var f=t.payload.channelId;return Object.assign({},e,{sortedKeys:e.sortedKeys.filter(function(e){return e!==f})});case c.v:case c.m:var p=t.payload.channelId;return Object.assign({},e,{sortedKeys:e.sortedKeys.filter(function(e){return e!==p})});case c.y:var m=t.payload.channel.channelId;return e.sortedKeys.indexOf(m)>-1?Object.assign({},e,{sortedKeys:e.sortedKeys.filter(function(e){return e!==m})}):e;case c.x:var O=t.payload.channel;return e.sortedKeys.includes(O.channelId)?e:Object.assign({},e,{sortedKeys:d()([O.channelId].concat(o()(e.sortedKeys)))});default:return e}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(arguments[1].type){case c.c:return!1;case c.g:return!0;default:return e}},m=n("./src/chat/actions/message/index.ts"),O={fetchingChannels:!1,hasMoreChannels:!0,sortedKeys:[]},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments[1];switch(t.type){case c.j:return Object.assign({},e,{fetchingChannels:!0});case c.k:return Object.assign({},e,{fetchingChannels:!1});case c.b:var n=t.payload,r=n.channels,a=n.hasMoreChannels,s=Object(b.c)(r,[l.a.Direct,l.a.Group]);if(!s)return e;var i=Object.keys(s),u=a&&!!i.length;return Object.assign({},e,{fetchingChannels:!1,hasMoreChannels:u,sortedKeys:[].concat(o()(e.sortedKeys),o()(i))});case c.v:case c.m:var h=t.payload.channelId;return Object.assign({},e,{sortedKeys:e.sortedKeys.filter(function(e){return e!==h})});case c.t:var f=t.payload.channelId;return Object.assign({},e,{sortedKeys:[f].concat(o()(e.sortedKeys))});case c.f:var p=Object.keys(t.payload);return Object.assign({},e,{sortedKeys:d()([].concat(o()(p),o()(e.sortedKeys)))});case c.u:var j=t.payload.channelId;return e.sortedKeys.includes(j)?Object.assign({},e,{sortedKeys:d()([j].concat(o()(e.sortedKeys)))}):e;case m.a:var v=t.payload.channelId;return e.sortedKeys.includes(v)?Object.assign({},e,{sortedKeys:d()([v].concat(o()(e.sortedKeys)))}):e;default:return e}},v=n("./node_modules/babel-runtime/helpers/defineProperty.js"),g=n.n(v),y=n("./node_modules/lodash/first.js"),x=n.n(y),_=n("./node_modules/lodash/omit.js"),E=n.n(_),C=n("./node_modules/lodash/reduce.js"),I=n.n(C),w=n("./src/chat/actions/channel/dropdown.ts"),k=n("./src/chat/actions/channel/subreddit.ts"),S=n("./src/chat/actions/message/inboxScroller.ts"),N=n("./src/chat/constants/channels.ts"),T={},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments[1];switch(t.type){case c.f:return Object.assign({},e,t.payload);case c.b:case c.a:case k.e:case k.f:var n=t.payload.channels,r=I()(e,function(e,t,r){return n[r]&&t.channelState===N.b.PARTIAL&&(e[r]=n[r])&&e||e},{});return Object.assign({},n,e,r);case k.g:return Object.assign({},t.payload.channels,e);case c.o:var a=t.payload,s=e[a];return!s||s&&0===s.unreadMessageCount?e:Object.assign({},e,g()({},a,Object.assign({},s,{unreadMessageCount:0,unreadMentionCount:0})));case c.t:case k.b:var i=t.payload.channelId,o=Object.assign({},e[i],{channelState:N.b.JOINED});return Object.assign({},e,g()({},o.channelId,o));case c.y:var u=t.payload.channel,d=e[u.channelId],l=Object.assign({},d,E()(u,"hasMoreMessages","isMessageListLoaded")),b=g()({},u.channelId,l);return Object.assign({},e,b);case k.m:case c.x:var h=t.payload.channel,f=e[h.channelId],p=Object.assign({},f,h,{channelState:N.b.INVITED}),O=g()({},h.channelId,p);return Object.assign({},e,O);case c.w:var j=t.payload.channel;return Object.assign({},e,g()({},j.channelId,j));case c.m:var v=t.payload.channelId;return E()(e,v);case c.v:var y=t.payload.channelId,_=Object.assign({},e[y],{channelState:N.b.UNSORTED});return Object.assign({},e,g()({},_.channelId,_));case w.a:var C=t.payload,D=C.channelId,M=C.name,A=Object.assign({},e[D],{name:M});return Object.assign({},e,g()({},D,Object.assign({},A)));case m.a:var L=t.payload.channelId,R=Number(x()(Object.keys(t.payload.message))),H=Object.assign({},e[L],{lastMessage:t.payload.message[R]});return Object.assign({},e,g()({},L,H));case m.g:var P=t.payload;return Object.assign({},e,g()({},P,Object.assign({},e[P],{fetchingMessages:!0,fetchingMessagesError:!1})));case m.b:case m.e:var U=t.payload,B=U.hasMore,K=U.channelId;return Object.assign({},e,g()({},K,Object.assign({},e[K],{isMessageListLoaded:!0,hasMoreMessages:B,fetchingMessages:!1,fetchingMessagesError:!1})));case m.f:var G=t.payload;return Object.assign({},e,g()({},G,Object.assign({},e[G],{fetchingMessages:!1,fetchingMessagesError:!0})));case c.l:var F=t.payload.channelId;return Object.assign({},e,g()({},F,Object.assign({},e[F],{fetchingFirstMessage:!0})));case c.s:var V=t.payload,z=V.channelId,q=V.firstMessageId;return Object.assign({},e,g()({},z,Object.assign({},e[z],{fetchingFirstMessage:!1,firstMessageId:q})));case S.b:var Q=t.payload.channelId;return Object.assign({},e,g()({},Q,Object.assign({},e[Q],{hasMoreMessages:!0})));default:return e}},M={channelId:void 0,isLoaded:!1},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments[1];switch(t.type){case c.p:var n=Object.assign({},e,{isLoaded:!1});if(t.payload){var r=t.payload.channelId;r&&(n.channelId=r)}return n;case c.q:return Object.assign({},e,{isLoaded:!0});case c.v:case c.m:return t.payload.channelId!==e.channelId?e:Object.assign({},e,{channelId:""});default:return e}},L={sortedKeys:[]},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments[1];switch(t.type){case k.a:return{sortedKeys:[t.payload.channelId]};default:return e}},H={fetchingChannels:!1,hasMoreChannels:!1,sortedKeys:[]},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments[1];switch(t.type){case k.h:return Object.assign({},e,{fetchingChannels:!0});case k.i:return Object.assign({},e,{fetchingChannels:!1});case k.e:var n=t.payload,r=n.channels,a=n.hasMoreChannels,s=Object(b.f)(r,"name"),i=Object.keys(s);return i.length?{fetchingChannels:!1,hasMoreChannels:a&&!!i,sortedKeys:[].concat(o()(i))}:e;case c.v:case c.m:case k.b:var u=t.payload.channelId;return e.sortedKeys.includes(u)?Object.assign({},e,{sortedKeys:e.sortedKeys.filter(function(e){return e!==u})}):e;case k.m:var l=t.payload.channel;return Object.assign({},e,{sortedKeys:d()([l.channelId].concat(o()(e.sortedKeys)))});default:return e}},U={fetchingChannels:!1,sortedKeys:{}},B=function(e,t,n){return Object.assign({},e,g()({},t.toLowerCase(),e[t.toLowerCase()].filter(function(e){return e!==n})))},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments[1];switch(t.type){case k.j:return Object.assign({},e,{fetchingChannels:!0});case k.k:return Object.assign({},e,{fetchingChannels:!1});case k.b:case k.f:var n=t.payload.sortedKeys;return{fetchingChannels:!1,sortedKeys:Object.assign({},n)};case c.v:case c.m:var r=t.payload,a=r.channelId,s=r.subredditName,i=s&&s.toLowerCase();if(!e.sortedKeys[i]||!e.sortedKeys[i].includes(a))return e;var o=e.sortedKeys[i].length<=1?E()(e.sortedKeys,i):B(e.sortedKeys,i,a);return Object.assign({},e,{sortedKeys:o});case c.w:var u=e.sortedKeys,d=t.payload.channel.channelId;for(var l in u)e.sortedKeys[l.toLowerCase()].includes(d)&&B(u,l.toLowerCase(),d);return Object.assign({},e,{sortedKeys:u});default:return e}},G={sortedKeys:[]},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments[1];switch(t.type){case k.c:return{sortedKeys:[t.payload.channelId]};default:return e}},V={fetchingChannels:!1,firstLoaded:!1,sortedKeys:[]},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments[1];switch(t.type){case k.l:return Object.assign({},e,{firstLoaded:!0,fetchingChannels:!0});case k.g:var n=t.payload.channels,r=Object.keys(n);return r.length?{fetchingChannels:!1,firstLoaded:e.firstLoaded,sortedKeys:[].concat(o()(r))}:e;default:return e}},q=Object(r.c)({banned:R,invited:P,joined:K,kicked:F,recommended:z}),Q=Object(r.c)({isCreatingChannel:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(arguments[1].type){case c.e:return!0;case c.f:case c.d:return!1;default:return e}},firstLoaded:s,inviteListExpanded:p,invited:f,joined:j,models:D,selected:A,subreddit:q}),J=n("./src/chat/actions/user.ts"),W=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(arguments[1].type){case J.b:return!0;default:return e}},Y=n("./node_modules/lodash/values.js"),Z=n.n(Y),X=n("./src/chat/actions/sendbird/index.ts"),$="search",ee="contacts",te={},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments[1];switch(t.type){case X.g:return Object.assign({},e,t.payload.reduce(function(e,t){return e[t.name.toLowerCase()]={loaded:!0,userId:t.id,valid:!0,method:ee},e},{}));case X.b:return Object.assign({},t.payload.reduce(function(e,t){return e[t.name.toLowerCase()]={loaded:!0,userId:t.id,valid:!0,method:ee},e},{}),e);case X.d:var n=t.payload.username;return Object.assign({},e,g()({},n,{loaded:!1,userId:null,valid:!1,method:$}));case X.e:var r=t.payload,a=r.contact,c=r.username,s=!!(r.valid&&a&&a.id);return Object.assign({},e,g()({},c.toLowerCase(),{loaded:!0,userId:a?a.id:null,valid:s,method:$}));case J.i:var i=t.payload;return Object.assign({},e,Z()(i).reduce(function(e,t){return e[t.name.toLowerCase()]={loaded:!0,userId:t.id,valid:!0,method:$},e},{}));case J.c:var o=t.payload.username;return o?E()(e,o):e;default:return e}},re={},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments[1];switch(t.type){case X.g:return Object.assign({},e,t.payload.reduce(function(t,n){return t[n.id]=Object.assign({},e[n.id],n),t},{}));case X.e:var n=t.payload.contact;return n?Object.assign({},e,g()({},n.id,n)):e;case J.i:return Object.assign({},e,t.payload||{});case J.c:var r=t.payload.userId;return r?Object.assign({},e,g()({},r,Object.assign({},e[r],{isBlocked:!0}))):e;case J.b:var a=t.payload.blockedContacts;return Object.assign({},e,a);default:return e}},ce=[],se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments[1];switch(t.type){case J.h:return[].concat(o()(e),[t.payload]);case J.k:return e.filter(function(e){return e!==t.payload});case J.j:return ce;default:return e}},ie=[],oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments[1];switch(t.type){case X.g:return[].concat(o()(e),o()(t.payload.map(function(e){return e.id})));case J.c:return e.filter(function(e){return e!==t.payload.userId});default:return e}},ue=Object(r.c)({fetchedBlockedUsers:W,knownContacts:ne,models:ae,selectedUserIds:se,suggestedKeys:oe}),de=n("./src/chat/actions/container.ts"),le=n("./src/chat/constants/container.ts"),be={size:le.a.EMBED},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments[1];switch(t.type){case de.a:if(le.b[t.payload])return Object.assign({},e,{size:t.payload});default:return e}},fe=(n("./node_modules/babel-runtime/regenerator/index.js"),n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),n("./src/lib/makeActionCreator/index.ts")),pe=n("./src/lib/constants/index.ts"),me=(n("./src/lib/makeApiRequest/index.ts"),Object(fe.a)("EMOJIS__FETCH_EMOJIS_FAILED"),Object(fe.a)("EMOJI__ADD_EMOJIS"),{snoomojis:{}}),Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments[1];switch(t.type){case"EMOJI__ADD_EMOJIS":var n=t.payload.snoomojis;return{snoomojis:Object.assign({},n)};default:return e}},je=n("./node_modules/lodash/toArray.js"),ve=n.n(je),ge=n("./node_modules/lodash/uniqBy.js"),ye=n.n(ge),xe=n("./src/chat/actions/members.ts"),_e={},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments[1];switch(t.type){case xe.b:var n=t.payload.channelId;return Object.assign({},e,g()({},n,Object.assign({},e[n],{fetchingMembers:!0})));case xe.c:var r=t.payload,a=r.channelId,c=r.hasMoreMembers;return Object.assign({},e,g()({},a,Object.assign({},e[a],{hasMoreMembers:c,fetchingMembers:!1})));case xe.a:var s=t.payload,i=s.channelId,u=s.members,d=ve()(u),l=e[i]&&e[i].model||[],b=ye()([].concat(o()(l),o()(d)),"id");return Object.assign({},e,g()({},i,Object.assign({},e[i],{model:b})));case xe.d:return{};default:return e}},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(arguments[1].type){case m.b:case m.k:return!0;default:return e}},Ie={},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments[1];switch(t.type){case m.b:var n=t.payload.messages;return Object.assign({},e,n);case m.a:return Object.assign({},e,t.payload.message);case m.h:return Object.assign({},e,t.payload);case m.d:case m.i:return E()(e,t.payload);case m.e:var r=t.payload.messages;return Object.assign({},e,r);case c.n:var a=t.payload;return Object.assign({},E.a.apply(void 0,[e].concat(o()(a))));case S.a:var s=t.payload.messageIdList;return E()(e,s);default:return e}},ke={},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments[1];switch(t.type){case m.c:var n=t.payload;return Object.assign({},e,g()({},n.clientMessageId,n));case m.l:var r=t.payload,a=r.clientMessageId,c=r.toggle;if(a){var s=e[a];return Object.assign({},e,g()({},a,Object.assign({},s,{error:c})))}return Object.assign({},e);case m.a:case m.j:var i=t.payload.clientMessageId;return Object.assign({},i?E()(e,i):e);default:return e}},Ne=n("./node_modules/lodash/isEqual.js"),Te=n.n(Ne),De=n("./src/chat/actions/message/unreadCount.ts"),Me={basicChannelCount:0,subredditChannelCount:0},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments[1];switch(t.type){case De.a:return Te()(e,t.payload)?e:Object.assign({},e,t.payload)}return e},Le=Object(r.c)({firstLoaded:Ce,models:we,pending:Se,unread:Ae}),Re=n("./src/chat/reducers/meta/index.ts"),He=n("./src/chat/reducers/platform/index.ts"),Pe=n("./src/chat/reducers/promos/index.ts"),Ue=n("./src/chat/actions/sendbird/config.ts"),Be={maxMessageLength:void 0},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments[1];switch(t.type){case Ue.b:return Object.assign({},e,t.payload);default:return e}},Ge={host:void 0},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments[1];switch(t.type){case Ue.c:return Object.assign({},e,t.payload);default:return e}},Ve=n("./src/chat/actions/sendbird/sdk.ts"),ze=n("./src/chat/constants/sendbird.ts"),qe={connectionStatus:ze.b.Closed,initialized:!1},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments[1];switch(t.type){case Ve.a:return Object.assign({},e,{initialized:!0,connectionStatus:ze.b.Open});case Ve.c:var n=Object.assign({},t.payload);return Object.assign({},e,{error:n,connectionStatus:ze.b.Closed});case Ve.b:return Object.assign({},e,{connectionStatus:ze.b.Closed});case Ve.d:var r=t.payload.connectionStatus;return Object.assign({},e,{connectionStatus:r});default:return e}},Je={expires:void 0,token:void 0,active:!1},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments[1];switch(t.type){case X.h:return Object.assign({},e,t.payload);case X.a:return Object.assign({},e,{active:!0});case X.c:return Object.assign({},e,{active:!1});default:return e}},Ye=Object(r.c)({globalSettings:Ke,proxy:Fe,session:We,sdk:Qe}),Ze=n("./src/chat/actions/sidebar.ts"),Xe=n("./src/chat/constants/sidebar.ts").a.SubredditChannels,$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments[1];switch(t.type){case Ze.b:return t.payload.activeIndex;default:return e}},et={},tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments[1];switch(t.type){case Ze.a:var n=t.payload,r=n.channelId,a=n.tabIndex;return Object.assign({},e,g()({},a,r));default:return e}},nt=Object(r.c)({activeIndex:$e,lastChannelIdPerTab:tt}),rt=n("./node_modules/lodash/isEmpty.js"),at=n.n(rt),ct=n("./node_modules/lodash/keyBy.js"),st=n.n(ct),it=n("./src/chat/models/Channel/subreddit.ts"),ot={},ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments[1];switch(t.type){case k.d:return Object.assign({},e,t.payload);case c.b:case c.a:var n=t.payload.channels,r=Object(b.c)(n,[l.a.Subreddit]);if(at()(r))return e;var a=ve()(r).map(function(e){var t=e&&Object(it.d)(e.data);if(t&&t.subreddit)return t.subreddit});return Object.assign({},e,st()(a,"id"));default:return e}},dt=Object(r.c)({models:ut}),lt=n("./src/chat/reducers/subscribe.ts"),bt=n("./src/chat/actions/theme.ts"),ht=n("./src/chat/constants/theme.ts"),ft=n("./src/chat/models/Theme/index.ts"),pt={current:ft.a[ht.a],cached:{}},mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments[1];switch(t.type){case bt.a:return e.current=ft.a[t.payload.themeKey],Object.assign({},e);default:return e}},Ot=n("./src/chat/actions/toast.ts"),jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case Ot.a:return null;case Ot.b:return t.payload.toast;default:return e}},vt=n("./src/chat/actions/typingIndicator.ts"),gt={usernames:[]};var yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments[1];switch(t.type){case vt.a:var n=t.payload.usernames;return r=n,a=e.usernames,r!==a&&(0!==r.length||0!==a.length)&&(0===r.length&&a.length>0||r.length>0&&0===a.length||(1===r.length&&1===a.length?r[0]!==a[0]:2===r.length&&2===a.length?r[0]!==a[0]||r[1]!==a[1]:3===r.length&&3===a.length?r[0]!==a[0]||r[1]!==a[1]||r[2]!==a[2]:!Te()(r,a)))?{usernames:n}:e;case c.p:return{usernames:[]};default:return e}var r,a},xt=n("./src/chat/actions/promo.ts"),_t=n("./src/lib/reducers/addAuthentication/index.ts"),Et=Object(_t.a)(function(e,t){switch(void 0===e&&(e=null),t.type){case J.a:return t.payload;case xt.d:return Object.assign({},e,{seenSubredditChatFtux:!0});default:return e}},null),Ct={userSubredditChatEnabled:!1},It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,t=arguments[1];switch(t.type){case X.f:case Ue.a:var n=(t.payload||Ct).userSubredditChatEnabled;return Object.assign({},e,t.payload,{userSubredditChatEnabled:e.userSubredditChatEnabled||n})}return e},wt={},kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments[1];switch(t.type){case J.d:return t.payload;default:return e}},St=pe.A,Nt=Object(_t.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St;return arguments[1].type,e},St),Tt={blob:"",loid:"",loidCreated:"",version:-1},Dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,t=arguments[1];switch(t.type){case J.e:return t.payload;default:return e}},Mt={globalTheme:ht.a},At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=arguments[1];switch(t.type){case bt.a:var n=t.payload.themeKey;return Object.assign({},e,{globalTheme:n});default:return e}},Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];switch(t.type){case J.f:return t.payload;default:return e}},Rt=n("./src/chat/actions/session.ts"),Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case Rt.a:case Rt.c:return t.payload;case Rt.b:return null;default:return e}},Pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];switch(t.type){case J.g:return t.payload;default:return e}},Ut=Object(r.c)({account:Et,chatExperiments:It,experiments:kt,language:Nt,loid:Dt,prefs:At,reddaid:Lt,session:Ht,sessionTracker:Pt});t.a=Object(r.c)({channels:Q,contacts:ue,container:he,members:Ee,messages:Le,meta:Re.b,platform:He.b,promos:Pe.b,themes:mt,sendbird:Ye,sidebarTabs:nt,emojis:Oe,subreddits:dt,toast:jt,tooltipId:a.a,typingIndicator:yt,user:Ut,actionListener:lt.a})},"./src/chat/reducers/meta/index.ts":function(e,t,n){"use strict";var r=n("./src/lib/makeActionCreator/index.ts");Object(r.a)("META__META_RECEIVED");n.d(t,"a",function(){return a});var a={country:"",domain:"",isBot:!1,isRedesign:!1,isSessionSeo:!1,method:"",protocol:"",sessionReferrerDomain:"",userAgent:""};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1];switch(t.type){case"META__META_RECEIVED":return t.payload;default:return e}}},"./src/chat/reducers/platform/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("./node_modules/babel-runtime/helpers/defineProperty.js"),a=n.n(r),c=n("./node_modules/history/index.js"),s=n("./src/chat/actions/platform.ts"),i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n},o={currentPage:null,referrers:{},metas:{}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case s.a:if(!t.payload)return e;var n=e.currentPage,r=t.payload,u=r.routeMatch,d=r.location,l=d.key,b=Object(c.createPath)(d),h=u?function(e,t,n,r){var a=n.route,c=(a.action,i(a,["action"]));return{key:e,locationState:r.state,meta:n.route.meta,queryParams:n.match.queryParams,routeMatch:Object.assign({},n,{route:c}),status:200,url:t,urlParams:n.match.params}}(l,b,u,d):function(e,t){return{key:e,locationState:{},queryParams:{},routeMatch:null,status:404,url:t,urlParams:{}}}(l,b),f=e.referrers;if("PUSH"===r.action){var p=n&&n.url||"";f=Object.assign({},f,a()({},l,p))}return Object.assign({},e,{referrers:f,currentPage:h});case s.c:if(!t.payload)return e;var m=t.payload,O=m.key,j=m.title,v=m.description,g=m.icon,y=m.type;return Object.assign({},e,{metas:Object.assign({},e.metas,a()({},O,{description:v,icon:g,title:j,type:y}))});case s.b:return t.payload,e;default:return e}}},"./src/chat/reducers/promos/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("./node_modules/babel-runtime/helpers/defineProperty.js"),a=n.n(r),c=n("./src/chat/actions/promo.ts"),s={displayNSFWWarning:!1,displaySubredditChatFtux:!1};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case c.a:var n=t.payload;return Object.assign({},e,a()({},n,!0));case c.c:var r=t.payload;return Object.assign({},e,a()({},r,!1));default:return e}}},"./src/chat/routes/chat.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r,a=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),c=n.n(a),s=n("./src/lib/constants/index.ts"),i=n("./src/chat/actions/page.ts");!function(e){e.Message="message",e.User="user"}(r||(r={}));var o={action:i.b,chunk:s.r.CHAT,exact:!0,meta:{name:s.lb.CHAT},path:"/chat/"},u={action:i.b,chunk:s.r.CHAT_EMPTY,exact:!0,meta:{name:s.lb.CHAT_EMPTY},path:"/chat/empty/"},d={action:i.c,chunk:s.r.CHAT_MINIMIZE,exact:!0,meta:{name:s.lb.CHAT_MINIMIZE},path:"/chat/minimize/"},l=["/chat/","/chat/channel/:action(create)/","/chat/channel/:channelId/:action(block|decline|delete|invite|invited|kick|members|leave|nsfw|report)?/:attr(message|user)?/:attrId?","/chat/r/:subredditName/channel/:channelId/:action(ban|block|decline|delete|deny|invite|invited|join|kick|leave|lock_confirmation|members|private|report)?/:attr(message|user)?/:attrId?"].map(function(e){return{action:i.a,chunk:s.r.CHAT,exact:!0,meta:{name:s.lb.CHAT},path:e}}),b=["/chat/user_id/:userIds/"].map(function(e){return{action:i.d,chunk:s.r.CHAT,exact:!0,meta:{name:s.lb.CHAT},path:e}});t.b=[o,u,d].concat(c()(l),c()(b))},"./src/chat/routes/index.ts":function(e,t,n){"use strict";var r=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),a=n.n(r),c=n("./src/lib/constants/index.ts"),s={action:n("./src/chat/actions/page.ts").b,chunk:c.r.CHAT,exact:!0,meta:{name:c.lb.CHAT},path:"/chat/*"},i=n("./src/chat/routes/chat.ts"),o=[].concat(a()(i.b),[s]);t.a=o},"./src/chat/selectors/channels/next.tsx":function(e,t,n){"use strict";n.d(t,"d",function(){return d}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return b}),n.d(t,"c",function(){return f}),n.d(t,"e",function(){return p}),n.d(t,"a",function(){return j}),n.d(t,"b",function(){return v});var r=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),a=n.n(r),c=n("./src/chat/constants/channels.ts"),s=n("./src/chat/constants/sidebar.ts"),i=n("./src/chat/selectors/channels.ts"),o=n("./src/chat/selectors/experiments.ts"),u=n("./src/chat/selectors/subreddit.ts"),d=function(e){var t=e.channels.subreddit.invited.sortedKeys[0],n=Object(u.b)(e,t);return{channelId:t,subredditName:n&&n.name,channelAction:c.a.VIEW_INVITE}},l=function(e){var t=e.channels.subreddit.joined.sortedKeys,n=Object.keys(t),r=!n.length?void 0:n[0];return{channelId:r&&t[r][0],subredditName:r}},b=function(e){var t=e.channels.subreddit.recommended.sortedKeys[0],n=Object(u.b)(e,t);return{channelId:t,subredditName:n&&n.name,channelAction:c.a.VIEW_JOIN}},h=function(e){return[d(e),l(e),b(e)]},f=function(e){return{channelId:e.channels.invited.sortedKeys[0],channelAction:c.a.VIEW_INVITE}},p=function(e){return{channelId:e.channels.joined.sortedKeys[0]}},m=function(e){return[f(e),p(e)]},O=function(e){return e.find(function(e){return!!e.channelId})},j=function(e,t){var n=t===s.a.SubredditChannels?h(e):m(e),r=O(n);return r&&r.channelId},v=function(e,t){var n=Object(o.b)(e),r=[].concat(a()(t?[function(e){var t=Object(i.k)(e);return{channelId:t&&t.channelId}}(e)]:[]),a()(n?h(e):[]),a()(m(e)));return O(r)}},"./src/chat/selectors/platform.ts":function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"c",function(){return c}),n.d(t,"e",function(){return s}),n.d(t,"a",function(){return i}),n.d(t,"f",function(){return o}),n.d(t,"b",function(){return u}),n.d(t,"g",function(){return d});var r=n("./src/chat/constants/sidebar.ts"),a=function(e){return e.platform&&e.platform.currentPage&&e.platform.currentPage.urlParams.channelId},c=function(e){return e.platform&&e.platform.currentPage&&e.platform.currentPage.urlParams.action},s=function(e){return e.platform&&e.platform.currentPage&&e.platform.currentPage.urlParams.subredditName||void 0},i=function(e){return e.platform&&e.platform.currentPage&&e.platform.currentPage.meta&&e.platform.currentPage.meta.name},o=function(e){return!!s(e)?r.a.SubredditChannels:r.a.DirectChannels},u=function(e){return e.platform.currentPage&&e.platform.currentPage.queryParams},d=function(e){return!(!a(e)||c(e))}},"./src/chat/selectors/sendbird.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"d",function(){return a}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return s}),n.d(t,"e",function(){return i});var r=function(e){return e.sendbird.sdk.connectionStatus},a=function(e){return e.sendbird.sdk.initialized},c=function(e){return e.sendbird.proxy.host},s=function(e){return e.sendbird.session},i=function(e){return e.sendbird.session.active}},"./src/chat/selectors/sidebar.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return c});var r=n("./src/chat/constants/sidebar.ts"),a=function(e){return e.sidebarTabs.activeIndex===r.a.SubredditChannels},c=function(e){return e.sidebarTabs.activeIndex}},"./src/chat/selectors/subreddit.ts":function(e,t,n){"use strict";n.d(t,"d",function(){return u}),n.d(t,"c",function(){return d}),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return b});var r=n("./node_modules/lodash/isEmpty.js"),a=n.n(r),c=n("./node_modules/lodash/map.js"),s=n.n(c),i=n("./src/chat/models/Channel/index.ts"),o=n("./src/chat/selectors/channels.ts"),u=function(e){return e.subreddits&&e.subreddits.models},d=function(e,t){var n=u(e);return n&&n[t]},l=function(e,t){var n=t?Object(o.h)(e,t):Object(o.x)(e);if(n&&n.type===i.a.Subreddit){var r=n.customData;return d(e,r.subredditId)}},b=function(e){var t=e.subreddits.models,n=e.channels.models,r=e.channels.subreddit.joined.sortedKeys;if(!a()(r))return s()(r,function(e){var r,a=e[0],c=n[a].customData.subredditId;return{name:t[c].name,keyColor:t[c].keyColor,iconImg:t[c].iconImg,sortedChannels:(r=e,s()(r,function(e){return n[e]}))}})}},"./src/chat/singleton/SendbirdSDK.ts":function(e,t,n){"use strict";var r=n("./node_modules/babel-runtime/helpers/slicedToArray.js"),a=n.n(r),c=n("./node_modules/babel-runtime/helpers/defineProperty.js"),s=n.n(c),i=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=n.n(i),u=n("./node_modules/babel-runtime/helpers/createClass.js"),d=n.n(u),l=n("./src/config.ts"),b=n("./node_modules/sendbird/SendBird.min.js"),h=n.n(b),f=n("./src/lib/constants/index.ts"),p=n("./src/chat/actions/channel.ts"),m=n("./node_modules/babel-runtime/regenerator/index.js"),O=n.n(m),j=n("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),v=n.n(j),g=n("./node_modules/react-router-redux/es/index.js"),y=n("./src/chat/constants/channels.ts"),x=n("./src/chat/helpers/urls/index.ts"),_=n("./src/chat/selectors/channels.ts"),E=n("./src/chat/selectors/subreddit.ts"),C=n("./src/chat/actions/channel/subreddit.ts"),I=n("./src/chat/actions/message/index.ts"),w=n("./src/chat/actions/sendbird/index.ts"),k=n("./src/chat/actions/sendbird/sdk.ts"),S=n("./src/chat/actions/toast.ts"),N=n("./src/chat/actions/typingIndicator.ts"),T=n("./src/chat/constants/batchSizes.ts"),D=n("./src/chat/constants/messages.ts"),M=n("./src/chat/constants/sendbird.ts"),A=n("./src/chat/constants/toast.ts"),L=n("./src/chat/models/Channel/index.ts"),R=n("./src/chat/models/Channel/platform.ts"),H=n("./src/chat/models/Channel/subreddit.ts"),P=n("./src/chat/models/Channel/utils.ts"),U=n("./src/chat/models/Message/index.ts"),B=n("./src/chat/models/User/member.ts"),K=n("./node_modules/timers-browserify/main.js");n.d(t,"a",function(){return G}),n.d(t,"c",function(){return V});var G,F=l.a.sendbirdAppId;!function(e){e.VIEW_PRIVATE="view_private",e.KICKED="kicked",e.BANNED="banned"}(G||(G={}));var V=new(function(){function e(){var t=this;o()(this,e),this.channels={},this.channelUniqueHandlerID=[],this.connectionUniqueHandlerID=[],this.switchChannel=function(e,n){if(t.channel=e,n)return new Promise(function(e){return e([])});t.operatorListQuery=t.channel.createOperatorListQuery(),t.subredditChannelMembersQuery=t.channel.createMemberListQuery(),t.memberListQuery=t.channel.createMemberListQuery(),t.createPreviousMessageListQuery();var r=t.getPreviousMessages(D.c.USER);return Promise.all([r])},(this.self=new h.a({appId:F})).Options.typingIndicatorThrottle=1e4}return d()(e,[{key:"connect",value:function(e,t,n,r,a){var c=this;return new Promise(function(r){c.dispatch=a,c.self.connect(n,t,"https://"+e,"wss://"+e,function(e,t){c.toggleUpdateListeners(!0),r({data:e,error:t})})})}},{key:"isConnected",value:function(){return!!this.self.currentUser}},{key:"disconnect",value:function(){var e=this;return new Promise(function(t){e.isConnected()&&(e.toggleUpdateListeners(!1),e.self.disconnect(function(){return t()}))})}},{key:"toggleUpdateListeners",value:function(e){var t=this;e?(this.onChannelChanged(),this.onChannelDeleted(),this.onChannelLocked(),this.onChannelUnlocked(),this.onReceiveInvite(),this.onReceiveMessage(),this.onDeleteMessage(),this.onUserActions(),this.onUserKicked(),this.onTypingStatusUpdated(),this.onReconnectStarted(),this.onReconnectSucceeded(),this.onReconnectFailed()):(this.channelUniqueHandlerID.length&&this.channelUniqueHandlerID.forEach(function(e){t.self.removeChannelHandler(e)}),this.connectionUniqueHandlerID.length&&this.channelUniqueHandlerID.forEach(function(e){t.self.removeConnectionHandler(e)}))}},{key:"reconnect",value:function(){this.dispatch(Object(S.e)({toast:A.a.ConnectionPending})),this.dispatch(Object(w.m)())}},{key:"onReconnectStarted",value:function(){var e=this,t=new this.self.ConnectionHandler,n={connectionStatus:M.b.Pending},r={toast:A.a.ConnectionPending};t.onReconnectStarted=function(){e.dispatch(Object(k.h)(n)),e.dispatch(Object(S.e)(r))},this.self.addConnectionHandler("CONNECTION_CHANGE",t),this.connectionUniqueHandlerID.push("CONNECTION_CHANGE")}},{key:"onReconnectSucceeded",value:function(){var e=this,t=new this.self.ConnectionHandler,n={connectionStatus:M.b.Open};t.onReconnectSucceeded=function(){e.dispatch(Object(k.h)(n)),e.dispatch(Object(S.e)({toast:A.a.ConnectionOpen})),Object(K.setTimeout)(function(){return e.dispatch(Object(S.d)())},3*f.qb),e.dispatch(Object(I.q)(!0)),e.dispatch(Object(p.F)())},this.self.addConnectionHandler("RECONNECT_SUCCEEDED",t),this.connectionUniqueHandlerID.push("RECONNECT_SUCCEEDED")}},{key:"onReconnectFailed",value:function(){var e=this,t=new this.self.ConnectionHandler,n={connectionStatus:M.b.Closed};t.onReconnectFailed=function(){e.dispatch(Object(k.h)(n)),e.dispatch(Object(S.e)({toast:A.a.ConnectionClosed}))},this.self.addConnectionHandler("RECONNECT_FAILED",t),this.connectionUniqueHandlerID.push("RECONNECT_FAILED")}},{key:"onReceiveInvite",value:function(){var e=this,t=new this.self.ChannelHandler;t.onUserReceivedInvitation=function(t){var n=Object(L.d)(t,t.memberState);e.dispatch(Object(p.S)(n))},this.self.addChannelHandler("RECEIVE_CHANNEL_INVITE",t),this.channelUniqueHandlerID.push("RECEIVE_CHANNEL_INVITE")}},{key:"onReceiveMessage",value:function(){var e=this,t=new this.self.ChannelHandler;t.onMessageReceived=function(t,n){var r=t.myMemberState,a=Object(L.d)(t,r);e.dispatch(Object(p.R)(a));var c=Object(U.b)(n);c&&e.dispatch(Object(I.r)(c))},this.self.addChannelHandler("RECEIVE_CHANNEL_MESSAGE",t),this.channelUniqueHandlerID.push("RECEIVE_CHANNEL_MESSAGE")}},{key:"onDeleteMessage",value:function(){var e=this,t=new this.self.ChannelHandler;t.onMessageDeleted=function(t,n){e.dispatch(Object(I.t)(n))},this.self.addChannelHandler("DELETE_CHANNEL_MESSAGE",t),this.channelUniqueHandlerID.push("DELETE_CHANNEL_MESSAGE")}},{key:"onTypingStatusUpdated",value:function(){var e=this,t=new this.self.ChannelHandler;t.onTypingStatusUpdated=function(t){var n=Object(P.e)(t.url),r=t.getTypingMembers().map(function(e){return e.nickname});e.dispatch(Object(N.b)({channelId:n,usernames:r}))},this.self.addChannelHandler("TYPING_STATUS_UPDATED",t),this.channelUniqueHandlerID.push("TYPING_STATUS_UPDATED")}},{key:"onUserActions",value:function(){var e=this,t=void 0;!function(e){e.onUserLeft="USER_LEFT_CHANNEL",e.onUserBanned="USER_BANNED_CHANNEL"}(t||(t={})),Object.keys(t).map(function(n){var r=new e.self.ChannelHandler,a=t[n];r[n]=function(t,n){var r=Object(L.d)(t,t.memberState);e.dispatch(Object(p.S)(r,!0))},e.self.addChannelHandler(a,r),e.channelUniqueHandlerID.push(a)})}},{key:"onChannelChanged",value:function(){var e=this,t=new this.self.ChannelHandler;t.onChannelChanged=function(t){var n=t.myMemberState,r=Object(L.d)(t,n);e.dispatch(Object(p.S)(r))},this.self.addChannelHandler("ON_CHANNEL_CHANGED",t),this.channelUniqueHandlerID.push("ON_CHANNEL_CHANGED")}},{key:"onChannelDeleted",value:function(){var e=this,t=new this.self.ChannelHandler;t.onChannelDeleted=function(t){var n,r,a=Object(P.e)(t);e.dispatch((n=a,r=v()(O.a.mark(function e(t,r){var a,c,s,i;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r(),c=Object(_.x)(a),s=Object(E.b)(a,n),i=s&&s.name.toLowerCase()){e.next=6;break}return e.abrupt("return");case 6:t(Object(p.M)({channelId:n,subredditName:i})),c&&c.channelId===n&&t(Object(g.b)(Object(x.b)(n,y.a.DENY,i)));case 8:case"end":return e.stop()}},e,void 0)})),function(e,t){return r.apply(this,arguments)}))},this.self.addChannelHandler("ON_CHANNEL_DELETED",t),this.channelUniqueHandlerID.push("ON_CHANNEL_DELETED")}},{key:"onChannelLocked",value:function(){var e=this,t=new this.self.ChannelHandler;t.onChannelFrozen=function(t){var n=Object(L.d)(t,t.myMemberState);e.dispatch(Object(p.S)(n))},this.self.addChannelHandler("ON_CHANNEL_LOCKED",t),this.channelUniqueHandlerID.push("ON_CHANNEL_LOCKED")}},{key:"onChannelUnlocked",value:function(){var e=this,t=new this.self.ChannelHandler;t.onChannelUnfrozen=function(t){var n=Object(L.d)(t,t.myMemberState);e.dispatch(Object(p.S)(n))},this.self.addChannelHandler("ON_CHANNEL_UNLOCKED",t),this.channelUniqueHandlerID.push("ON_CHANNEL_UNLOCKED")}},{key:"mapCodeToError",value:function(e){switch(e){case 400750:return G.KICKED;case 400751:return G.BANNED;default:return G.VIEW_PRIVATE}}},{key:"autoJoinSubredditChannel",value:function(e,t){var n=this;return new Promise(function(e,r){var a=t.channelSendbirdUrl,c=t.customData;c&&c.subredditId?n.dispatch(Object(C.u)(a,c.subredditId)).then(function(t){t.error?r({error:n.mapCodeToError(t.error.code)}):e(t.body)}).catch(function(e){r({error:n.mapCodeToError(e.code)})}):e()})}},{key:"convertPartialToSubredditChannel",value:function(e,t){var n=y.b.PARTIAL,r=y.b.INVITED;t===n&&(e.channelState=r,this.dispatch(Object(p.T)({channel:e})))}},{key:"getChannelByChannelId",value:function(e){var t=this;return new Promise(function(n,r){var a=Object(P.a)(e);t.self.GroupChannel.getChannel(a,function(e,t){t?r(t):n(e)})})}},{key:"addChannelModelByChannelId",value:function(e){var t=this;return new Promise(function(n,r){t.getChannelByChannelId(e).then(function(e){if(!e)return n();var r=Object(L.d)(e);if(!r)return n();if(r.type===L.a.Subreddit){var a=r.customData.subreddit;a&&t.dispatch(Object(C.o)(s()({},a.id,a)))}t.dispatch(Object(p.T)({channel:r})),n(r)}).catch(function(e){n()})})}},{key:"enterChannel",value:function(e,t,n){var r=this;return new Promise(function(c){var s=function(){return{data:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}};if(!r.isConnected())return c(s());var i=e.channelId,o=r.channels[i];if(o&&!t)return r.switchChannel(o,n).then(function(e){var t=a()(e,1)[0];return c(s({messageListData:t}))}).catch(function(){return c(s())});r.getChannelByChannelId(i).then(function(o){if(!o)return c(s());r.channels[i]=o;var u=Object(L.d)(o);if(r.convertPartialToSubredditChannel(u,e.channelState),t&&u.type===L.a.Subreddit)return r.autoJoinSubredditChannel(o,u).then(function(e){var t=Object(R.a)(e,y.b.JOINED);r.dispatch(Object(p.T)({channel:t})),r.switchChannel(o).then(function(e){var t=a()(e,1)[0];return c(s({messageListData:t}))}).catch(function(){return c(s())})}).catch(function(e){return c(s(e.error))});r.switchChannel(o,n).then(function(e){var t=a()(e,1)[0];return c(s({messageListData:t}))}).catch(function(){return c(s())})}).catch(function(){return c(s())})})}},{key:"updateChannel",value:function(e){var t=this,n=e.name,r=e.coverUrl,a=e.data;return new Promise(function(e,c){t.channel?t.channel.updateChannel(n,r,a,function(t,n){return t?e():c(n)}):c("No channel selected")})}},{key:"hideChannel",value:function(){var e=this;return new Promise(function(t){if(e.channel)return e.channel.hide(),t();t()})}},{key:"leaveChannel",value:function(){var e=this;return new Promise(function(t,n){if(e.channel)return e.channel.leave(function(e,t){t&&n(t)}),t();n("No channel selected")})}},{key:"acceptChannelInvite",value:function(){var e=this;return new Promise(function(t){if(e.channel)return e.channel.acceptInvitation(),t();t()})}},{key:"declineChannelInvite",value:function(){var e=this;return new Promise(function(t,n){e.channel?e.channel.declineInvitation(function(e,r){r?n(r):t(e)}):t()})}},{key:"lockChannel",value:function(){var e=this;return new Promise(function(t,n){return e.channel&&e.channel.freeze(function(e,t){t&&n(t)}),t()})}},{key:"unlockChannel",value:function(){var e=this;return new Promise(function(t,n){return e.channel&&e.channel.unfreeze(function(e,t){t&&n(t)}),t()})}},{key:"onUserKicked",value:function(){var e=this,t=new this.self.ChannelHandler;t.onUserBanned=function(t,n){var r=Object(H.b)(t,t.memberState);r&&e.dispatch(Object(C.s)(r,n.userId))},this.self.addChannelHandler("CHANNEL_USER_KICKED",t),this.channelUniqueHandlerID.push("CHANNEL_USER_KICKED")}},{key:"kickUserFromChannel",value:function(e,t,n){var r=this;return new Promise(function(a,c){return r.channel?(r.channel.banUserWithUserId(e,t,n,function(e,t){return e?a():c(t)}),a()):a()})}},{key:"getExistingChannels",value:function(e,t){var n=this;return new Promise(function(r,a){var c=void 0;e===y.b.INVITED&&t===y.f.NonSuper?n.channelListQueryInvited?c=n.channelListQueryInvited:(n.channelListQueryInvited=n.self.GroupChannel.createMyGroupChannelListQuery(),c=n.channelListQueryInvited):e===y.b.JOINED&&t===y.f.NonSuper?n.channelListQueryJoined?c=n.channelListQueryJoined:(n.channelListQueryJoined=n.self.GroupChannel.createMyGroupChannelListQuery(),c=n.channelListQueryJoined):e===y.b.JOINED&&t===y.f.Super?n.channelListQueryJoinedSubreddit?c=n.channelListQueryJoinedSubreddit:(n.channelListQueryJoinedSubreddit=n.self.GroupChannel.createMyGroupChannelListQuery(),c=n.channelListQueryJoinedSubreddit):e===y.b.INVITED&&t===y.f.Super&&(n.channelListQueryInvitedSubreddit?c=n.channelListQueryInvitedSubreddit:(n.channelListQueryInvitedSubreddit=n.self.GroupChannel.createMyGroupChannelListQuery(),c=n.channelListQueryInvitedSubreddit)),c.includeEmpty=!0,c.limit=T.a.Channels,c.memberStateFilter=n.self.GroupChannel.memberState[e],c.superChannelFilter=t,c.hasNext?c.next(function(e,t){if(t)a(t);else{var n=c.hasNext;r({channels:e,hasMoreChannels:n})}}):r()})}},{key:"getSubredditChannelMembers",value:function(){var e=this;return new Promise(function(t,n){e.subredditChannelMembersQuery.hasNext&&e.subredditChannelMembersQuery.next(function(r,a){if(a)n(a);else{var c=e.subredditChannelMembersQuery.hasNext;t({members:r,hasMoreMembers:c})}})})}},{key:"getChannelMembersStartsWith",value:function(e){var t=this;return new Promise(function(n,r){t.memberListQuery=t.channel.createMemberListQuery(),t.memberListQuery?(t.memberListQuery.nicknameStartsWithFilter=e,t.memberListQuery.next(function(e,a){if(a)r(a);else{var c=t.memberListQuery&&t.memberListQuery.hasNext||!1;n({members:e,hasMoreMembers:c})}})):r(Error("this.memberListQuery is null or undefined"))})}},{key:"searchMemberByName",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(r,a){t.memberListQuery=t.channel.createMemberListQuery(),t.memberListQuery?(t.memberListQuery.nicknameStartsWithFilter=e,t.memberListQuery.next(function(a,c){var s=Object(B.a)(a),i=s.filter(function(t){return n&&t&&t.name===e||!n&&t});s.length&&t.dispatch(Object(w.i)(s)),r(i)})):a(Error("this.memberListQuery is null or undefined"))})}},{key:"startTypingIndicator",value:function(){this.channel&&this.channel.startTyping()}},{key:"endTypingIndicator",value:function(){this.channel&&this.channel.endTyping()}},{key:"getPreviousMessages",value:function(e,t){var n=this;return new Promise(function(r,a){if(n.channel){var c={};t&&n.createPreviousMessageListQuery(),n.messageListQuery.load(T.a.Messages,!0,e,function(e,t){if(t)a();else{e.forEach(function(e){c[e.messageId]=Object(U.b)(e)});var s=n.messageListQuery.hasMore;r({messages:c,hasMore:s})}})}else a()})}},{key:"addMessage",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new Promise(function(a,c){if(n.channel){var s=new n.self.UserMessageParams;s.data=t,s.message=e,r&&r.length&&(s.mentionType=n.self.BaseMessageParams.MentionType.USERS,s.mentionedUserIds=r),n.channel.sendUserMessage(s,function(e,t){t?c():a(Object(U.b)(e))})}})}},{key:"createPreviousMessageListQuery",value:function(){this.messageListQuery=this.channel.createPreviousMessageListQuery()}},{key:"deleteMessage",value:function(e){var t=this;return new Promise(function(n){t.channel&&t.channel.deleteMessage(e,function(e,t){t||n(e)})})}},{key:"getFirstMessage",value:function(){var e=this;return new Promise(function(t,n){e.channel?e.channel.getNextMessagesByTimestamp(0,!0,1,!0,"","",function(e,n){n||t(e)}):n()})}},{key:"markChannelAsRead",value:function(){var e=this;return new Promise(function(t){e.channel&&e.channel.markAsRead(),t()})}},{key:"setMyCountPreference",value:function(e){var t=this;return new Promise(function(n){t.channel&&t.channel.setMyCountPreference(e),n()})}},{key:"resetChannelMessageListQuery",value:function(){var e=this;return new Promise(function(t){e.messageListQuery=e.channel.createPreviousMessageListQuery(),t()})}}]),e}());t.b=V},"./src/chat/tracking/events/chatPreview.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return u});var r=n("./src/telemetry/models/Event.ts"),a=n("./src/chat/tracking/fields/chat.ts"),c=n("./src/chat/tracking/fields/common.ts"),s=n("./src/chat/tracking/fields/subreddit.ts"),i=n("./src/chat/tracking/sendEvent.ts"),o=function(e){Object(i.a)(Object.assign({noun:"preview",source:r.b.ChatPreview,action:r.a.View,chat:Object.assign({},Object(a.g)(e),Object(a.A)(e),Object(a.p)(e),Object(a.s)(e)),subreddit:Object.assign({},Object(s.a)(e),Object(s.b)(e))},Object(c.a)(e)))},u=function(e){Object(i.a)(Object.assign({noun:"join",source:r.b.ChatPreview,action:r.a.Click,chat:Object.assign({},Object(a.g)(e),Object(a.A)(e),Object(a.p)(e),Object(a.s)(e)),subreddit:Object.assign({},Object(s.a)(e),Object(s.b)(e))},Object(c.a)(e)))}},"./src/chat/tracking/events/chatView.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"a",function(){return u}),n.d(t,"d",function(){return d}),n.d(t,"b",function(){return l}),n.d(t,"e",function(){return b});var r=n("./src/telemetry/models/Event.ts"),a=n("./src/chat/tracking/fields/chat.ts"),c=n("./src/chat/tracking/fields/common.ts"),s=n("./src/chat/tracking/fields/subreddit.ts"),i=n("./src/chat/tracking/sendEvent.ts"),o=function(e){return Object(i.a)(Object.assign({noun:"chat",source:r.b.ChatView,action:r.a.View,chat:Object.assign({},Object(a.A)(e),Object(a.p)(e),Object(a.g)(e),Object(a.s)(e),Object(a.l)(e),Object(a.y)(e)),subreddit:Object.assign({},Object(s.a)(e),Object(s.b)(e))},Object(c.a)(e)))},u=function(e,t){Object(i.a)(Object.assign({noun:"chat_message",source:r.b.ChatView,action:r.a.Submit,chat:Object.assign({},Object(a.A)(e),Object(a.p)(e),Object(a.g)(e),Object(a.s)(e,0),Object(a.n)(e,t),Object(a.x)(e,t),Object(a.y)(e)),subreddit:Object.assign({},Object(s.a)(e),Object(s.b)(e))},Object(c.a)(e)))},d=function(e,t){Object(i.a)(Object.assign({noun:"chat_message_failed",source:r.b.ChatView,action:r.a.View,chat:Object.assign({},Object(a.A)(e),Object(a.p)(e),Object(a.g)(e),Object(a.s)(e,0),Object(a.t)(e,t),Object(a.x)(e),Object(a.y)(e)),subreddit:Object.assign({},Object(s.a)(e),Object(s.b)(e))},Object(c.a)(e)))},l=function(e,t,n){Object(i.a)(Object.assign({noun:"report_message",source:r.b.ChatView,action:r.a.Submit,chat:Object.assign({},Object(a.A)(e),Object(a.p)(e),Object(a.g)(e),Object(a.s)(e,0),Object(a.m)(t),Object(a.n)(e,t),Object(a.v)(n),Object(a.x)(e,t),Object(a.y)(e)),subreddit:Object.assign({},Object(s.a)(e),Object(s.b)(e))},Object(c.a)(e)))},b=function(e){Object(i.a)(Object.assign({noun:"history",source:r.b.ChatView,action:r.a.View,chat:Object.assign({},Object(a.A)(e),Object(a.p)(e),Object(a.g)(e),Object(a.y)(e)),subreddit:Object.assign({},Object(s.a)(e),Object(s.b)(e))},Object(c.a)(e)))}},"./src/chat/tracking/events/contactsList.ts":function(e,t,n){"use strict";n.d(t,"g",function(){return o}),n.d(t,"c",function(){return u}),n.d(t,"f",function(){return d}),n.d(t,"e",function(){return l}),n.d(t,"d",function(){return b}),n.d(t,"b",function(){return h}),n.d(t,"a",function(){return f});var r=n("./src/chat/tracking/sendEvent.ts"),a=n("./src/telemetry/models/Event.ts"),c=n("./src/chat/tracking/fields/chat.ts"),s=n("./src/chat/tracking/fields/common.ts"),i=n("./src/chat/tracking/fields/subreddit.ts"),o=function(e){Object(r.a)(Object.assign({noun:"contacts",source:a.b.ContactsList,action:a.a.View,chat:Object.assign({},Object(c.c)(e),Object(c.d)(e))},Object(s.a)(e)))},u=function(e,t){Object(r.a)(Object.assign({noun:"contact_add",source:a.b.ContactsList,action:a.a.Click,chat:Object.assign({},Object(c.e)(e),Object(c.a)(e,t),Object(c.c)(e),Object(c.g)(e),Object(c.f)(e),Object(c.B)(e,t))},Object(s.a)(e)))},d=function(e){Object(r.a)(Object.assign({noun:"alert_invalid_user",source:a.b.ContactsList,action:a.a.View,chat:Object.assign({},Object(c.A)(e),Object(c.c)(e),Object(c.d)(e),Object(c.g)(e),Object(c.B)(e,"search"),Object(c.f)(e))},Object(s.a)(e)))},l=function(e,t){Object(r.a)(Object.assign({noun:"alert_invalid_channel",source:a.b.ContactsList,action:a.a.View,chat:Object.assign({},Object(c.A)(e),Object(c.c)(e),Object(c.d)(e),Object(c.g)(e),Object(c.B)(e,t),Object(c.f)(e))},Object(s.a)(e)))},b=function(e,t){Object(r.a)(Object.assign({noun:"create_chat",source:a.b.ContactsList,action:a.a.Click,chat:Object.assign({},Object(c.A)(e,t),Object(c.c)(e),Object(c.d)(e),Object(c.g)(e,t),Object(c.f)(e))},Object(s.a)(e)))},h=function(e){Object(r.a)(Object.assign({noun:"close_contacts",source:a.b.ContactsList,action:a.a.Click,chat:Object.assign({},Object(c.e)(e),Object(c.c)(e),Object(c.d)(e),Object(c.g)(e),Object(c.f)(e))},Object(s.a)(e)))},f=function(e){Object(r.a)(Object.assign({noun:"add_to_chat",source:a.b.ContactsList,action:a.a.Click,chat:Object.assign({},Object(c.A)(e),Object(c.p)(e),Object(c.g)(e),Object(c.d)(e),Object(c.f)(e)),subreddit:Object.assign({},Object(i.a)(e),Object(i.b)(e))},Object(s.a)(e)))}},"./src/chat/tracking/events/invitationInbox.ts":function(e,t,n){"use strict";n.d(t,"f",function(){return o}),n.d(t,"g",function(){return u}),n.d(t,"c",function(){return d}),n.d(t,"d",function(){return l}),n.d(t,"e",function(){return b}),n.d(t,"b",function(){return h}),n.d(t,"a",function(){return f});var r=n("./src/chat/tracking/sendEvent.ts"),a=n("./src/telemetry/models/Event.ts"),c=n("./src/chat/tracking/fields/chat.ts"),s=n("./src/chat/tracking/fields/common.ts"),i=n("./src/chat/tracking/fields/subreddit.ts"),o=function(e){return Object(r.a)(Object.assign({noun:"inbox",source:a.b.InvitationInbox,action:a.a.View,chat:Object.assign({},Object(c.j)(e,"room"),Object(c.q)(e))},Object(s.a)(e)))},u=function(e){return Object(r.a)(Object.assign({noun:"invitation",source:a.b.InvitationInbox,action:a.a.View,chat:Object.assign({},Object(c.j)(e),Object(c.k)(e),Object(c.h)(e),Object(c.i)(e),Object(c.p)(e)),subreddit:Object.assign({},Object(i.a)(e),Object(i.b)(e))},Object(s.a)(e)))},d=function(e){return Object(r.a)(Object.assign({noun:"invitation_accept",source:a.b.InvitationInbox,action:a.a.Click,chat:Object.assign({},Object(c.j)(e),Object(c.k)(e),Object(c.h)(e),Object(c.i)(e),Object(c.p)(e)),subreddit:Object.assign({},Object(i.a)(e),Object(i.b)(e))},Object(s.a)(e)))},l=function(e){return Object(r.a)(Object.assign({noun:"invitation_decline",source:a.b.InvitationInbox,action:a.a.Click,chat:Object.assign({},Object(c.j)(e),Object(c.k)(e),Object(c.h)(e),Object(c.i)(e),Object(c.p)(e)),subreddit:Object.assign({},Object(i.a)(e),Object(i.b)(e))},Object(s.a)(e)))},b=function(e){return Object(r.a)(Object.assign({noun:"invitation_view_member",source:a.b.InvitationInbox,action:a.a.Click,chat:Object.assign({},Object(c.j)(e),Object(c.k)(e),Object(c.h)(e),Object(c.i)(e),Object(c.p)(e)),subreddit:Object.assign({},Object(i.a)(e),Object(i.b)(e))},Object(s.a)(e)))},h=function(e){Object(r.a)(Object.assign({noun:"expand",source:a.b.InvitationInbox,action:a.a.Click},Object(s.a)(e)))},f=function(e){Object(r.a)(Object.assign({noun:"collapse",source:a.b.InvitationInbox,action:a.a.Click},Object(s.a)(e)))}},"./src/chat/tracking/events/messagesInbox.ts":function(e,t,n){"use strict";var r=n("./src/chat/selectors/telemetry.ts"),a=n("./src/chat/selectors/promos.ts"),c=function(e){return{settingValue:Object(a.c)(e)?"ftue_none":"ftue_open"}},s=n("./src/chat/tracking/fields/chat.ts"),i=n("./src/chat/tracking/fields/common.ts"),o=n("./src/chat/tracking/sendEvent.ts"),u=n("./src/telemetry/models/Event.ts");n.d(t,"e",function(){return d}),n.d(t,"f",function(){return l}),n.d(t,"b",function(){return b}),n.d(t,"a",function(){return h}),n.d(t,"g",function(){return f}),n.d(t,"d",function(){return p}),n.d(t,"c",function(){return m});var d=function(e){Object(o.a)(Object.assign({noun:"inbox",source:u.b.MessageInbox,action:u.a.View,chat:Object.assign({},Object(s.o)(e),Object(s.z)(e),Object(s.q)(e,!1))},Object(i.a)(e)))},l=function(e){Object(o.a)(Object.assign({noun:"rooms_inbox",source:u.b.MessageInbox,action:u.a.View,chat:Object.assign({},Object(s.r)(e),Object(s.q)(e,!0))},Object(i.a)(e)))},b=function(e){Object(o.a)(Object.assign({noun:"create_chat",source:u.b.MessageInbox,action:u.a.Click,chat:Object.assign({},Object(s.o)(e),Object(s.z)(e),Object(s.q)(e))},Object(i.a)(e)))},h=function(e){Object(o.a)(Object.assign({noun:"close_chat",source:u.b.MessageInbox,action:u.a.Click,chat:Object.assign({},Object(s.o)(e),Object(s.q)(e))},Object(i.a)(e),{actionInfo:Object.assign({},c(e),Object(r.a)(e))}))},f=function(e){Object(o.a)(Object.assign({noun:"rooms_tooltip_523",source:u.b.MessageInbox,action:u.a.View,chat:Object.assign({},Object(s.o)(e),Object(s.q)(e))},Object(i.a)(e)))},p=function(e){Object(o.a)(Object.assign({noun:"dismiss_rooms_tooltip_523",source:u.b.MessageInbox,action:u.a.Click,chat:Object.assign({},Object(s.o)(e),Object(s.q)(e))},Object(i.a)(e)))},m=function(e){Object(o.a)(Object.assign({noun:"minimize_chat",source:u.b.MessageInbox,action:u.a.Click,chat:Object.assign({},Object(s.o)(e),Object(s.q)(e))},Object(i.a)(e),{actionInfo:Object.assign({},c(e),Object(r.a)(e))}))}},"./src/chat/tracking/fields/subreddit.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return c});var r=n("./src/chat/selectors/subreddit.ts"),a=function(e){var t=Object(r.b)(e);return t&&{id:t.id}},c=function(e){var t=Object(r.b)(e);return t&&{name:t.name}}},"./src/lib/linkMatchers/index.ts":function(e,t,n){"use strict";var r=n("./node_modules/babel-runtime/helpers/toConsumableArray.js"),a=n.n(r),c=n("./node_modules/linkify-it/index.js"),s=n.n(c),i=n("./node_modules/tlds/index.js"),o=n.n(i),u=n("./src/lib/linkMatchers/customLinks.ts"),d=n("./node_modules/lodash/values.js"),l=n.n(d),b=function(e){return l()(u.b).includes(e.substring(1))},h=["//","ftp:","http:","https:","mailto:"],f=function(e){return function(e,t){return t.forEach(function(t){return e.add(t,null)}),e}(e,h)};n.d(t,"c",function(){return p}),n.d(t,"d",function(){return O}),n.d(t,"g",function(){return j}),n.d(t,"a",function(){return y}),n.d(t,"b",function(){return x}),n.d(t,"e",function(){return _}),n.d(t,"f",function(){return E});var p=s()().tlds(o.a).set({fuzzyIP:!0}),m=s()().set({fuzzyIP:!0}).add(u.f.mention.prefix,u.f.mention.config),O=f(s()()).set({fuzzyLink:!1,fuzzyEmail:!1}).add(u.f.subreddit.prefix,u.f.subreddit.config).add(u.f.subredditFull.prefix,u.f.subreddit.config),j=f(s()()).set({fuzzyLink:!1,fuzzyEmail:!1}).add(u.f.profile.prefix,u.f.profile.config).add(u.f.profileFull.prefix,u.f.profile.config),v=s()().tlds(o.a).set({fuzzyIP:!0}).add(u.f.subreddit.prefix,u.f.subreddit.config).add(u.f.subredditFull.prefix,u.f.subreddit.config).add(u.f.profile.prefix,u.f.profile.config).add(u.f.profileFull.prefix,u.f.profile.config).add(u.f.mention.prefix,u.f.mention.config),g=p.normalize;p.normalize=function(e){g.call(p,e),!e.schema&&e.url.startsWith("http:")&&(e.url="https:"+e.url.slice(5))};var y=function(e,t){return(v.match(e)||[]).filter(function(e){var n=b(e.text);return!n||n&&t})},x=function(e){var t=j.match(e)||[],n=m.match(e)||[];return[].concat(a()(t),a()(n)).map(function(e){return!b(e.text)&&e.text.replace(u.a,"")}).filter(function(e){return e})},_=function(e,t){var n=e.match(t);if(n&&1===n.length&&0===n[0].index&&n[0].lastIndex===t.length)return n[0]},E=function(e){var t=p.match(e);if(t&&1===t.length&&0===t[0].index){var n=t[0];return n.lastIndex===e.length?n:function(e,t){var n=e.substring(t.lastIndex);if(/.*\/\/.*\/.*/.test(t.url)&&/^(\?|\!)+$/.test(n))return t.lastIndex+=n.length,t.url+=n,t}(e,n)}}}}]);
//# sourceMappingURL=Chat~RedesignChat.b865d2573970f78d14a6.js.map