(window.webpackJsonp=window.webpackJsonp||[]).push([["Chat~Governance~Reddit~RedesignChat"],{"./src/chat/actions/promo.ts":function(e,n,t){"use strict";var r=t("./node_modules/babel-runtime/regenerator/index.js"),o=t.n(r),i=t("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),s=t.n(i),a=t("./node_modules/babel-runtime/helpers/toConsumableArray.js"),c=t.n(a),u=t("./src/lib/cache/index.ts"),d=t("./src/lib/constants/index.ts"),l=t("./src/lib/makeActionCreator/index.ts"),f=t("./src/chat/endpoints/users/index.ts"),m=t("./src/chat/models/Promo/index.ts"),h=t("./src/chat/selectors/experiments.ts"),b=t("./src/chat/selectors/messages.ts"),p=t("./src/chat/selectors/user.ts"),v=t("./src/chat/tracking/events/platform.ts");t.d(n,"a",function(){return g}),t.d(n,"c",function(){return y}),t.d(n,"e",function(){return O}),t.d(n,"g",function(){return I}),t.d(n,"h",function(){return w}),t.d(n,"b",function(){return S}),t.d(n,"d",function(){return x}),t.d(n,"i",function(){return M}),t.d(n,"f",function(){return P});var g="PROMO__DISPLAY_PROMO",y="PROMO__HIDE_PROMO",C=Object(l.a)(g),j=Object(l.a)(y),O=function(e){var n=Object(u.b)("chat.promo")||[];return e=D(e),n.includes(e)},k=function(e){if(!O(e)){var n=Object(u.b)("chat.promo")||[],t=[].concat(c()(n),[e]);Object(u.d)("chat.promo",t,d.Wb)}},I=function(e){return n=s()(o.a.mark(function n(t,r){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t(j(e)),k(e);case 2:case"end":return n.stop()}},n,void 0)})),function(e,t){return n.apply(this,arguments)};var n},w=function(){return e=s()(o.a.mark(function e(n,t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object.keys(m.b).forEach(function(e){O(m.b[e])||n(C(m.b[e]))});case 1:case"end":return e.stop()}},e,void 0)})),function(n,t){return e.apply(this,arguments)};var e},S="PROMO__DISPLAY_SUBREDDIT_CHAT_FTUX_PROMO",_=Object(l.a)(S),x="PROMO__SEEN_SUBREDDIT_CHAT_FTUX",T=Object(l.a)(x),M=function(){return e=s()(o.a.mark(function e(n,t,r){var i=r.apiContext;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(f.e)(i()),n(T()),n(I(m.a.SubredditChatFtux));case 3:case"end":return e.stop()}},e,void 0)})),function(n,t,r){return e.apply(this,arguments)};var e},D=function(e){switch(e){case m.c.LegacySubredditChatFtux:return m.a.SubredditChatFtux;case m.c.LegacyNSFWWarning:return m.b.NSFWWarning;default:return e}},P=function(){return e=s()(o.a.mark(function e(n,t){var r,i,s,a,c,u,d,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t(),i=O(m.a.SubredditChatFtux),s=Object(p.e)(r),a=Object(h.a)(r),c=Object(h.b)(r),!(!i&&!s&&a&&c)){e.next=13;break}return u=Object(b.i)(r),d=u.basicChannelCount,l=u.subredditChannelCount,e.next=10,n(C(m.a.SubredditChatFtux));case 10:return e.next=12,n(_({basicChannelCount:d,subredditChannelCount:l}));case 12:Object(v.b)(r);case 13:case"end":return e.stop()}},e,void 0)})),function(n,t){return e.apply(this,arguments)};var e}},"./src/chat/constants/messages.ts":function(e,n,t){"use strict";var r,o,i;t.d(n,"c",function(){return r}),t.d(n,"b",function(){return o}),t.d(n,"a",function(){return i}),function(e){e.ADMIN="admin",e.USER="user",e.PENDING="pending"}(r||(r={})),function(e){e.TEXT="text",e.POST="post",e.EMBED="embedCollection",e.SNOOMOJI="snoomoji"}(o||(o={})),function(e){e.DELETE="delete",e.REPORT="report"}(i||(i={}))},"./src/chat/constants/sendbird.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return r});var r,o="sendbird_group_channel_";!function(e){e.Open="OPEN",e.Closed="CLOSED",e.Pending="PENDING"}(r||(r={}))},"./src/chat/endpoints/sendbird/index.ts":function(e,n,t){"use strict";t.d(n,"d",function(){return O}),t.d(n,"g",function(){return k}),t.d(n,"f",function(){return I}),t.d(n,"c",function(){return w}),t.d(n,"k",function(){return S}),t.d(n,"i",function(){return _}),t.d(n,"a",function(){return x}),t.d(n,"h",function(){return T}),t.d(n,"e",function(){return M}),t.d(n,"j",function(){return D}),t.d(n,"b",function(){return P});var r,o,i,s,a,c,u,d,l,f,m=t("./node_modules/babel-runtime/regenerator/index.js"),h=t.n(m),b=t("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),p=t.n(b),v=t("./src/config.ts"),g=t("./src/lib/constants/index.ts"),y=t("./src/lib/makeApiRequest/index.ts"),C=t("./src/lib/omitHeaders/index.ts"),j=t("./src/reddit/constants/headers.ts"),O=(r=p()(h.a.mark(function e(n){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(y.b)(Object(C.a)(n,[j.a]),{endpoint:v.a.sendbirdServiceUrl+"/api/v1/sendbird/config",method:g.Fa.GET}));case 1:case"end":return e.stop()}},e,void 0)})),function(e){return r.apply(this,arguments)}),k=(o=p()(h.a.mark(function e(n,t){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(y.b)(n,{endpoint:v.a.sendbirdServiceUrl+"/api/v1/sendbird/me",method:g.Fa.GET}));case 1:case"end":return e.stop()}},e,void 0)})),function(e,n){return o.apply(this,arguments)}),I=(i=p()(h.a.mark(function e(n,t,r){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(y.b)(n,{endpoint:v.a.sendbirdServiceUrl+"/api/v1/sendbird/contacts?limit="+r,method:g.Fa.GET}));case 1:case"end":return e.stop()}},e,void 0)})),function(e,n,t){return i.apply(this,arguments)}),w=(s=p()(h.a.mark(function e(n,t,r,o){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(y.b)(n,{data:{users:r,name:o},endpoint:v.a.sendbirdServiceUrl+"/api/v1/sendbird/group_channels",method:g.Fa.POST,headers:{Accept:"application/json","Content-Type":"application/json"}}));case 1:case"end":return e.stop()}},e,void 0)})),function(e,n,t,r){return s.apply(this,arguments)}),S=(a=p()(h.a.mark(function e(n,t){var r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},t&&(r.channel_url=t),e.abrupt("return",Object(y.b)(n,{endpoint:v.a.sendbirdServiceUrl+"/api/v1/opt_in",data:r,method:g.Fa.POST,headers:{Accept:"application/json","Content-Type":"application/json"}}));case 3:case"end":return e.stop()}},e,void 0)})),function(e,n){return a.apply(this,arguments)}),_=(c=p()(h.a.mark(function e(n,t,r,o){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(y.b)(n,{data:{users:r},endpoint:v.a.sendbirdServiceUrl+"/api/v1/sendbird/group_channels/"+o+"/invite",method:g.Fa.POST,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}}));case 1:case"end":return e.stop()}},e,void 0)})),function(e,n,t,r){return c.apply(this,arguments)}),x=(u=p()(h.a.mark(function e(n,t,r){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(y.b)(n,{endpoint:v.a.sendbirdServiceUrl+"/api/v1/sendbird/group_channels/"+r+"/accept",method:g.Fa.PUT,withCredentials:!0}));case 1:case"end":return e.stop()}},e,void 0)})),function(e,n,t){return u.apply(this,arguments)}),T=(d=p()(h.a.mark(function e(n,t){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(y.b)(Object(C.a)(n,[j.a]),{endpoint:v.a.sendbirdServiceUrl+"/api/v1/sendbird/unread_message_count",method:g.Fa.GET,headers:{Accept:"application/json","Content-Type":"application/json"}}));case 1:case"end":return e.stop()}},e,void 0)})),function(e,n){return d.apply(this,arguments)}),M=(l=p()(h.a.mark(function e(n,t){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(y.b)(n,{endpoint:v.a.sendbirdServiceUrl+"/api/v1/channels/recommended",method:g.Fa.GET,headers:{Accept:"application/json","Content-Type":"application/json"}}));case 1:case"end":return e.stop()}},e,void 0)})),function(e,n){return l.apply(this,arguments)}),D=(f=p()(h.a.mark(function e(n,t,r,o){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(y.b)(n,{data:{channel_url:r,subreddit:o},endpoint:v.a.sendbirdServiceUrl+"/api/v1/sendbird/join",method:g.Fa.POST,headers:{Accept:"application/json","Content-Type":"application/json"}}));case 1:case"end":return e.stop()}},e,void 0)})),function(e,n,t,r){return f.apply(this,arguments)}),P=function(e,n,t){return Object(y.b)(e,{data:t,method:g.Fa.POST,endpoint:v.a.sendbirdServiceUrl+"/api/v1/chat/ban",headers:{Accept:"application/json","Content-Type":"application/json"}})}},"./src/chat/endpoints/users/index.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return c}),t.d(n,"b",function(){return u}),t.d(n,"d",function(){return d}),t.d(n,"c",function(){return l}),t.d(n,"e",function(){return f});var r=t("./src/lib/constants/index.ts"),o=t("./src/lib/makeApiRequest/index.ts"),i=t("./src/lib/omitHeaders/index.ts"),s=t("./src/reddit/constants/headers.ts"),a=t("./src/chat/models/Message/report.ts"),c=function(e,n){return Object(o.b)(e,{method:r.Fa.POST,endpoint:e.apiUrl+"/api/report_user",data:{reason:n.reason,user:n.userNickname}})},u=function(e,n,t){var i=Object(a.d)(n,t);return Object(o.b)(e,{method:r.Fa.POST,endpoint:e.apiUrl+"/api/report_user",data:{details:JSON.stringify(i),reason:n.reason,user:n.userNickname}})},d=function(e,n){return Object(o.b)(e,{method:r.Fa.GET,endpoint:e.apiUrl+"/api/user_data_by_account_ids",data:{raw_json:1,ids:n.join(",")}})},l=function(e){return Object(o.b)(e,{method:r.Fa.GET,endpoint:e.apiUrl+"/prefs/blocked.json"})},f=function(e){return Object(o.b)(Object(i.a)(e,[s.a]),{method:r.Fa.POST,endpoint:e.apiUrl+"/api/seen_subreddit_chat_ftux"})}},"./src/chat/helpers/errors.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return u}),t.d(n,"b",function(){return d});var r=t("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=t.n(r),i=t("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),s=t.n(i),a=t("./node_modules/babel-runtime/helpers/inherits.js"),c=t.n(a),u=function(e){function n(e,t){return o()(this,n),s()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"Invalid Value: '"+e+" is "+t+"'"))}return c()(n,e),n}(Error),d=function(e){0}},"./src/chat/helpers/unreadCount.ts":function(e,n,t){"use strict";t.d(n,"b",function(){return i}),t.d(n,"a",function(){return s});var r=t("./src/chat/models/Promo/index.ts"),o={basicChannelCount:{count:0,unread:!1},subredditChannelCount:{count:0,unread:!1}},i=function(e){var n={};for(var t in e)n[t]={count:e[t],unread:!!e[t]};return Object.assign({},o,n)},s=function(e,n){var t=i(e),o=t.basicChannelCount,s=t.subredditChannelCount,a=Object(r.d)(n),c=Object(r.e)(a),u=o.count;return{count:u,unread:c||!!u||!!s.count}}},"./src/chat/models/Channel/index.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"d",function(){return d}),t.d(n,"c",function(){return l}),t.d(n,"b",function(){return f});var r,o=t("./src/chat/constants/channels.ts"),i=t("./src/chat/models/Channel/subreddit.ts"),s=t("./src/chat/models/Channel/utils.ts"),a=t("./src/chat/models/Message/index.ts"),c=t("./src/chat/models/User/inviter.ts"),u=t("./src/chat/models/User/member.ts");!function(e){e[e.Direct=0]="Direct",e[e.Group=1]="Group",e[e.Subreddit=2]="Subreddit"}(r||(r={}));o.b.UNSORTED,r.Direct;function d(e,n){var t=void 0,o=Object(s.d)(e);return o===r.Subreddit&&(t=Object(i.b)(e,n)),o!==r.Direct&&o!==r.Group&&t||(t=function(e,n){var t=e.coverUrl,o=e.createdAt,i=e.customType,d=e.data,l=e.memberCount,m=e.name,h=e.isDistinct,b=e.unreadMessageCount,p=e.unreadMentionCount,v=e.myCountPreference,g=e.inviter,y=e.lastMessage,C=e.members,j=e.url,O=e.myMemberState,k=e.isFrozen,I=e.myRole;return{channelId:Object(s.e)(j),channelSendbirdUrl:j,channelState:Object(s.b)(n,O),coverUrl:t,createdAt:Number(o),customType:i,data:d,maxLengthMessage:-1,memberCount:l,name:m,isFrozen:k,isModerator:"operator"===I,isMuted:f(v),inviter:Object(c.a)(g),type:h?r.Direct:r.Group,lastMessage:y?Object(a.b)(y):void 0,unreadMessageCount:b,unreadMentionCount:p,members:Object(u.a)(C),fetchingFirstMessage:!1,fetchingMessages:!1,fetchingMessagesError:!1,hasMoreMessages:!1,isMessageListLoaded:!1}}(e,n)),t}function l(e,n){for(var t={},r=0,o=e.length;r<o;r++){var i=d(e[r],n);if(!i||i.memberCount<2)break;t[i.channelId]=i}return t}var f=function(e){return!(e!==o.c.Off)}},"./src/chat/models/Channel/subreddit.ts":function(e,n,t){"use strict";t.d(n,"d",function(){return d}),t.d(n,"b",function(){return l}),t.d(n,"c",function(){return f}),t.d(n,"a",function(){return h});var r=t("./src/chat/constants/channels.ts"),o=t("./src/chat/models/Channel/index.ts"),i=t("./src/chat/models/Channel/utils.ts"),s=t("./src/chat/models/Message/index.ts"),a=t("./src/chat/models/Subreddit/index.ts"),c=t("./src/chat/models/User/inviter.ts"),u=t("./src/chat/models/User/member.ts"),d=function(e){try{var n=JSON.parse(e),t=n.room_description,r=n.subreddit,o=n.subreddit,i=(o=void 0===o?{id:void 0}:o).id;if(i&&r)return{subredditId:i,subreddit:Object(a.b)(r),description:t||""}}catch(e){return void 0}};function l(e,n){var t=e.coverUrl,r=e.createdAt,a=e.customType,l=e.data,f=e.memberCount,m=e.name,h=e.unreadMessageCount,b=e.unreadMentionCount,p=e.inviter,v=e.isPublic,g=e.lastMessage,y=e.members,C=e.url,j=e.myMemberState,O=e.isFrozen,k=e.myCountPreference,I=e.myRole,w=d(l);if(w){var S=w.description,_=w.subreddit,x=w.subredditId;return{channelId:Object(i.e)(C),channelSendbirdUrl:C,channelState:Object(i.b)(n,j),coverUrl:t,createdAt:Number(r),customType:a,data:l,maxLengthMessage:-1,memberCount:f,name:m,isPublic:v,isFrozen:O,isModerator:"operator"===I,isMuted:Object(o.b)(k),inviter:Object(c.a)(p),type:o.a.Subreddit,lastMessage:g?Object(s.b)(g):void 0,unreadMessageCount:h,unreadMentionCount:b,members:Object(u.a)(y),fetchingFirstMessage:!1,fetchingMessages:!1,fetchingMessagesError:!1,hasMoreMessages:!1,isMessageListLoaded:!1,customData:{description:S.trim(),subreddit:_,subredditId:x}}}}function f(e,n){var t={};return e.forEach(function(e){var r=l(e,n);r&&(t[r.channelId]=r)}),{channels:t}}var m=function(e){if(e&&e.url&&e.name&&e.subreddit&&e.subreddit.id&&e.description&&e.member_count)return{channelId:Object(i.e)(e.url),channelSendbirdUrl:e.url,channelState:r.b.PARTIAL,fetchingMessages:!1,fetchingMessagesError:!1,hasMoreMessages:!1,isMessageListLoaded:!1,fetchingFirstMessage:!1,name:e.name,type:o.a.Subreddit,memberCount:e.member_count,customData:{subredditId:e.subreddit.id,description:e.description}}};function h(e){var n={};return e.forEach(function(e){if(e){var t=m(e);t&&(n[t.channelId]=t)}}),{channels:n}}},"./src/chat/models/Channel/utils.ts":function(e,n,t){"use strict";t.d(n,"e",function(){return h}),t.d(n,"a",function(){return b}),t.d(n,"f",function(){return p}),t.d(n,"c",function(){return v}),t.d(n,"b",function(){return g}),t.d(n,"d",function(){return y});var r=t("./node_modules/lodash/keyBy.js"),o=t.n(r),i=t("./node_modules/lodash/pickBy.js"),s=t.n(i),a=t("./node_modules/lodash/sortBy.js"),c=t.n(a),u=t("./node_modules/lodash/toArray.js"),d=t.n(u),l=t("./src/chat/constants/channels.ts"),f=t("./src/chat/constants/sendbird.ts"),m=t("./src/chat/models/Channel/index.ts"),h=function(e){return e.replace(f.a,"")},b=function(e){return f.a+e},p=function(e,n){return o()(c()(d()(e),n),"channelId")};function v(e,n){return s()(e,function(e){return n.includes(e.type)})}function g(e,n){return(e||n||l.b.UNSORTED).toUpperCase()}function y(e){var n=e.custom_type||e.customType;if("string"==typeof n){var t=n.split("_");switch(t.length&&t[0]){case"direct":return m.a.Direct;case"subreddit":return m.a.Subreddit;case"group":return m.a.Group}}return"boolean"==typeof e.is_super&&e.is_super||"boolean"==typeof e.isSuper&&e.isSuper?m.a.Subreddit:"boolean"==typeof e.is_distinct&&e.is_distinct||"boolean"==typeof e.isDistinct&&e.isDistinct?m.a.Direct:m.a.Group}},"./src/chat/models/Message/adapter.ts":function(e,n,t){"use strict";var r=t("./src/chat/constants/messages.ts"),o=t("./src/chat/helpers/urls/index.ts"),i={text:function(e){return{type:r.b.TEXT,value:e}},post:function(e){return{type:r.b.POST,value:e,subreddit:Object(o.g)(e)}},embedCollection:function(e){var n=JSON.parse(e),t=n.url,o=n.embed;return{type:r.b.EMBED,value:t,embed:o}},snoomoji:function(e){return{type:r.b.SNOOMOJI,value:e}}};t.d(n,"b",function(){return l}),t.d(n,"c",function(){return f}),t.d(n,"a",function(){return m});var s=r.b.TEXT,a=r.b.POST,c=r.b.EMBED,u=r.b.SNOOMOJI,d=function(e){try{return JSON.parse(e).v1}catch(e){return{}}},l=function(e){return d(e).clientMessageId||""},f=function(e,n){var t=d(n);return Object.assign({},function(e,n){return n.snoomoji?i[u](n.snoomoji):n.embed_data&&n.embed_data.url?i[a](n.embed_data.url):n.embed_collection?i[c](n.embed_collection):i[s](e)}(e,t),{clientMessageId:l(n),highlights:t.highlights||[]})},m=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return{v1:Object.assign({clientMessageId:t,highlights:r},n===u?{snoomoji:e}:{},n===a?{embed_data:{url:e}}:{},n===c?{embed_collection:e}:{})}}},"./src/chat/models/Message/index.ts":function(e,n,t){"use strict";t.d(n,"b",function(){return l}),t.d(n,"a",function(){return f});var r=t("./node_modules/uuid/v4.js"),o=t.n(r),i=t("./src/chat/constants/messages.ts"),s=t("./src/chat/models/Channel/utils.ts"),a=t("./src/chat/models/Message/adapter.ts"),c=t("./src/chat/selectors/channels.ts"),u=t("./src/chat/selectors/messages.ts"),d=t("./src/chat/selectors/user.ts");function l(e){if(e&&e.messageType===i.c.USER){var n=e.channelUrl,t=e.messageType,r=e.messageId,o=e.createdAt,c=e.updatedAt,u=e.channelType,d=e.message,l=e.data,f=e.customType;return{channelId:Object(s.e)(n),channelSendbirdUrl:n,messageType:i.c[t],messageId:r,createdAt:o,updatedAt:c,channelType:u,data:l,messageData:Object(a.c)(d,l),sender:function(e){if(e&&e.messageType===i.c.USER)return e.sender}(e),customType:f}}}function f(e,n,t){var r=Object(c.x)(e),s=o()(),l=Object(u.c)(e,n),f=JSON.stringify(Object(a.a)(n,t,s,l));if(r)return{channelId:r.channelId,clientMessageId:s,createdAt:(new Date).getTime(),data:f,messageData:Object(a.c)(n,f),messageType:i.c.PENDING,error:!1,sender:{nickname:Object(d.b)(e),userId:Object(d.a)(e)}}}},"./src/chat/models/Message/report.ts":function(e,n,t){"use strict";t.d(n,"b",function(){return o}),t.d(n,"d",function(){return i}),t.d(n,"a",function(){return s}),t.d(n,"c",function(){return a});var r=t("./src/chat/helpers/errors.ts"),o=function(e,n){return e.sender?{channelUrl:e.channelSendbirdUrl,channelType:e.channelType,createdAt:e.createdAt,customData:e.data,customType:e.customType,messageBody:e.messageData.value,messageId:e.messageId,userId:e.sender.userId,fileUrl:"",reason:n,userNickname:e.sender.nickname}:Object(r.b)("\n      Error reporting message: "+e.messageId+".\n      The sender is unknown.\n    ")},i=function(e,n){return n?{sendbirdChatMessage:e,sendbirdEphemeralChatLog:n}:{sendbirdChatMessage:e}},s=function(e,n){return e.reduce(function(e,t){var r=o(t,n);return r&&e.push(r),e},[])},a=function(e,n){return e.find(function(e){return e.messageId===n.messageId})}},"./src/chat/models/Promo/index.ts":function(e,n,t){"use strict";var r,o,i;t.d(n,"a",function(){return r}),t.d(n,"b",function(){return o}),t.d(n,"c",function(){return i}),t.d(n,"d",function(){return s}),t.d(n,"e",function(){return a}),function(e){e.SubredditChatFtux="displaySubredditChatFtux"}(r||(r={})),function(e){e.NSFWWarning="displayNSFWWarning"}(o||(o={})),function(e){e.LegacyNSFWWarning="nsfwWarning",e.LegacySubredditChatFtux="firstTimeUserExp"}(i||(i={}));var s=function(e){var n={};for(var t in e)switch(t){case r.SubredditChatFtux:n[t]=e[t]}return n},a=function(e){for(var n in e)if(!0===e[n])return!0;return!1}},"./src/chat/models/Subreddit/index.ts":function(e,n,t){"use strict";t.d(n,"b",function(){return o}),t.d(n,"a",function(){return i}),t.d(n,"c",function(){return s});var r=t("./src/chat/models/Channel/subreddit.ts");function o(e){return{id:e.id,name:e.name,description:e.description,iconImg:e.icon_img,keyColor:e.key_color,nsfw:e.nsfw}}function i(e){var n={};return e.forEach(function(e){if(e&&e.subreddit){var t=o(e.subreddit);n[t.id]=t}}),n}function s(e){var n={};return e.forEach(function(e){var t=Object(r.d)(e.data);if(t){var o=t.subreddit;o&&(n[o.id]=o)}}),n}},"./src/chat/models/User/inviter.ts":function(e,n,t){"use strict";t.d(n,"b",function(){return i}),t.d(n,"a",function(){return s});var r="t2_1qwk",o="reddit";function i(e){if(e)return{id:e.user_id,name:e.nickname}}function s(e){return{id:e?e.userId:r,name:e?e.nickname:o}}},"./src/chat/models/User/member.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return r});var r=function(e){return e.length&&e.map(function(e){return{id:e.user_id||e.userId,isOnline:e.is_online||e.isOnline,lastSeenAt:e.last_seen_at||e.lastSeenAt,name:e.nickname,profileUrl:e.profile_url||e.profileUrl,state:e.state,isBlockedByMe:e.isBlockedByMe}}).filter(function(e){return e})||[]}},"./src/chat/selectors/app.ts":function(e,n,t){"use strict";t.d(n,"e",function(){return a}),t.d(n,"c",function(){return c}),t.d(n,"f",function(){return u}),t.d(n,"d",function(){return d}),t.d(n,"b",function(){return l}),t.d(n,"a",function(){return f});var r=t("./node_modules/lodash/isEmpty.js"),o=t.n(r),i=t("./src/chat/constants/container.ts"),s=t("./src/chat/strings/index.ts"),a=function(e){return e.container.size===i.a.HIDDEN},c=function(e){return e.container.size===i.a.EMBED||e.container.size===i.a.FULL},u=function(e){return!(!(e.user.account&&e.sendbird.session.active&&e.sendbird.sdk.initialized&&e.channels.firstLoaded)||l(e))},d=function(e){return window.parent!==window||!!(e&&e.meta&&e.meta.isRedesign)},l=function(e){if(!e.user.account)return Object(s.a)("en","app.error.signIn")},f=function(e){return!o()(e.user.experiments)}},"./src/chat/selectors/channels.ts":function(e,n,t){"use strict";var r,o=t("./node_modules/babel-runtime/helpers/toConsumableArray.js"),i=t.n(o),s=t("./node_modules/lodash/flatten.js"),a=t.n(s),c=t("./node_modules/lodash/sortBy.js"),u=t.n(c),d=t("./node_modules/lodash/toArray.js"),l=t.n(d),f=t("./node_modules/lodash/uniqBy.js"),m=t.n(f),h=t("./node_modules/lodash/values.js"),b=t.n(h);!function(e){e.DEFAULT="default",e.BANNED="banned",e.KICKED="kicked"}(r||(r={}));var p=t("./src/chat/constants/channels.ts");t("./src/chat/models/Channel/index.ts");t.d(n,"n",function(){return v}),t.d(n,"r",function(){return g}),t.d(n,"s",function(){return y}),t.d(n,"t",function(){return C}),t.d(n,"p",function(){return k}),t.d(n,"h",function(){return I}),t.d(n,"k",function(){return w}),t.d(n,"l",function(){return S}),t.d(n,"x",function(){return _}),t.d(n,"y",function(){return x}),t.d(n,"m",function(){return T}),t.d(n,"j",function(){return M}),t.d(n,"v",function(){return D}),t.d(n,"b",function(){return P}),t.d(n,"P",function(){return E}),t.d(n,"g",function(){return A}),t.d(n,"f",function(){return U}),t.d(n,"z",function(){return F}),t.d(n,"A",function(){return N}),t.d(n,"B",function(){return L}),t.d(n,"u",function(){return R}),t.d(n,"F",function(){return B}),t.d(n,"e",function(){return G}),t.d(n,"Q",function(){return H}),t.d(n,"G",function(){return W}),t.d(n,"D",function(){return z}),t.d(n,"c",function(){return K}),t.d(n,"H",function(){return Y}),t.d(n,"I",function(){return J}),t.d(n,"K",function(){return q}),t.d(n,"J",function(){return V}),t.d(n,"i",function(){return X}),t.d(n,"w",function(){return Z}),t.d(n,"o",function(){return Q}),t.d(n,"L",function(){return $}),t.d(n,"a",function(){return ee}),t.d(n,"M",function(){return ne}),t.d(n,"E",function(){return te}),t.d(n,"d",function(){return re}),t.d(n,"q",function(){return oe}),t.d(n,"N",function(){return ie}),t.d(n,"O",function(){return se}),t.d(n,"C",function(){return ae});var v=function(e){return e.channels.invited.sortedKeys.length},g=function(e){return e.channels.joined.sortedKeys.length},y=function(e){return a()(l()(e.channels.subreddit.joined.sortedKeys)).length},C=function(e,n,t){var r=n&&b()(n.channels)||t||[],o=function(e){var n=e.channels,t=n.models,r=n.subreddit.joined;return a()(b()(r.sortedKeys)).map(function(e){return t[e]})}(e),s=m()([].concat(i()(o),i()(r)),function(e){return e.channelId}),c=j(e,s);return O(e,c)},j=function(e,n){var t=e.subreddits.models;return u()(n,[function(e){return t[e.customData.subredditId].name.toLowerCase()}],function(e){return e.name.toLowerCase()})},O=function(e,n){var t=e.subreddits.models;return n.reduce(function(e,n){var r=n.channelId,o=n.customData.subredditId,i=t[o].name.toLowerCase();return e[i]=e[i]||[],e[i].push(r),e},{})},k=function(e){return e.channels.subreddit.invited.sortedKeys.length},I=function(e,n){return n?e.channels.models[n]:void 0},w=function(e){var n=e.platform.currentPage,t=n&&n.urlParams.channelId;if(t)return I(e,t)},S=function(e){var n=w(e);if(n&&n.channelState===p.b.JOINED)return n},_=function(e){var n=e.channels.selected.channelId;if(n)return I(e,n)},x=function(e){return e.channels.selected&&e.channels.selected.channelId},T=function(e){return w(e)||_(e)},M=function(e,n){var t=n||T(e);return t&&t.members&&t.members.map(function(e){return e.id})},D=function(e){var n=e.user,t=T(e);if(t&&t.members)return t.members.filter(function(e){return e.id!==n.account.id})},P=function(e,n){var t=D(e);return!(!t||!t.find(function(e){return!!n[e.id].isNSFW}))},E=function(e){return!!S(e)},A=function(e){var n=D(e);return n&&n.filter(function(e){return e.isBlockedByMe})},U=function(e){var n=[],t=e.user.account.id;return b()(e.channels.models).forEach(function(e){if(e&&e.members){var r=e.members.filter(function(e){return e.id!==t}).map(function(e){return e.id});r.length&&n.push(r)}}),n.length&&n},F=function(e){return b()(e.messages.models).filter(function(n){return n.channelId===e.channels.selected.channelId})},N=function(e){return b()(e.messages.pending).filter(function(n){return n.channelId===e.channels.selected.channelId})},L=function(e,n){var t=_(e);return t&&t[n]},R=function(e){var n=_(e);if(n&&n.lastMessage&&n.lastMessage.sender)return n.lastMessage.sender.userId},B=function(e){return e.channels.joined.hasMoreChannels},G=function(e){return e.channels.joined.fetchingChannels},H=function(e){return e.channels.joined.sortedKeys.map(function(n){return e.channels.models[n]})},W=function(e){return e.channels.inviteListExpanded},z=function(e){return e.channels.invited.hasMoreChannels},K=function(e){return e.channels.invited.fetchingChannels},Y=function(e){return e.channels.invited.sortedKeys.map(function(n){return e.channels.models[n]})},J=function(e){var n=_(e);return n&&n.inviter&&n.inviter.name},q=function(e){var n=w(e);return!(!n||!n.isMessageListLoaded)},V=function(e){return e.channels.isCreatingChannel},X=function(e){var n=_(e);return n&&n.channelState},Z=function(e){var n=e.channels.subreddit.recommended.sortedKeys.map(function(n){return e.channels.models[n]}),t=[];return n&&n.length&&(t=n.filter(function(e){return!(!e||e.channelState===p.b.JOINED)})),t},Q=function(e){var n=e.channels.subreddit.invited.sortedKeys;return n&&n.map(function(n){return e.channels.models[n]})},$=function(e,n){return!(!n||!e.channels.subreddit.recommended.sortedKeys.includes(n))},ee=function(e){var n=w(e);return!(!n||!n.isModerator)},ne=function(e,n){var t=I(e,n);return!(!t||!$(e,n)||t.channelState===p.b.JOINED)},te=function(e){return e.channels.subreddit.invited.hasMoreChannels},re=function(e){return e.channels.subreddit.invited.fetchingChannels},oe=function(e,n){if(n)return e.channels.subreddit.kicked.sortedKeys.includes(n)?r.KICKED:e.channels.subreddit.banned.sortedKeys.includes(n)?r.BANNED:r.DEFAULT},ie=function(e){var n=T(e);return!(!n||!n.isFrozen)},se=function(e){var n=T(e);return!(!n||!n.isMuted)},ae=function(e){var n=T(e);return n&&n.customData&&n.customData.subreddit&&n.customData.subreddit.id}},"./src/chat/selectors/contacts.ts":function(e,n,t){"use strict";t.d(n,"i",function(){return s}),t.d(n,"j",function(){return a}),t.d(n,"b",function(){return c}),t.d(n,"c",function(){return u}),t.d(n,"a",function(){return l}),t.d(n,"e",function(){return f}),t.d(n,"h",function(){return m}),t.d(n,"k",function(){return h}),t.d(n,"l",function(){return b}),t.d(n,"f",function(){return p}),t.d(n,"g",function(){return v}),t.d(n,"d",function(){return g});var r=t("./node_modules/lodash/values.js"),o=t.n(r),i=t("./src/chat/selectors/members.ts"),s=function(e){return e.contacts.suggestedKeys.map(function(n){return e.contacts.models[n]})},a=function(e){var n=e.contacts,t=n.knownContacts,r=n.models;return Object.keys(t).map(function(e){return t[e]}).filter(function(e){return e&&e.loaded&&e.valid}).map(function(e){return e.userId&&r[e.userId]}).filter(function(e){return!!e})},c=function(e,n){return o()(e.contacts.models).find(function(e){return e.id===n})},u=function(e,n){return o()(e.contacts.models).find(function(e){return e.name.toLowerCase()===n.toLowerCase()})},d=function(e,n){return e.contacts.knownContacts[n.toLowerCase()]},l=function(e,n){var t=d(e,n);return t&&t.method},f=function(e,n){if(n&&n.inviter)return e.contacts.models[n.inviter.id]},m=function(e){return e.contacts.knownContacts},h=function(e){return e.contacts.selectedUserIds},b=function(e){return h(e).length},p=function(e){var n=e.contacts.selectedUserIds;return n.length&&n.map(function(n){var t=c(e,n);return t&&t.id})},v=function(e,n){var t=u(e,n);if(t)return{name:n,id:t.id};var r=d(e,n);if(r&&r.userId)return{name:n,id:r.userId};var o=Object(i.b)(e,n);return o?{name:n,id:o.id}:void 0},g=function(e){return e.contacts.models}},"./src/chat/selectors/experiments.ts":function(e,n,t){"use strict";var r;!function(e){e.SubredditChat="chat_subreddit",e.SubredditChatNotifcationFtux="chat_subreddit_notification_ftux"}(r||(r={})),t.d(n,"b",function(){return o}),t.d(n,"a",function(){return i});var o=function(e){return!!e.user.experiments[r.SubredditChat]||!!e.user.chatExperiments.userSubredditChatEnabled},i=function(e){return!!e.user.experiments[r.SubredditChatNotifcationFtux]}},"./src/chat/selectors/members.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return i}),t.d(n,"c",function(){return s}),t.d(n,"d",function(){return a}),t.d(n,"b",function(){return c});var r=t("./src/chat/selectors/channels.ts"),o=function(e){var n=Object(r.y)(e);return n&&e.members[n]},i=function(e){var n=o(e);if(n)return n.fetchingMembers},s=function(e){var n=o(e);if(n)return n.hasMoreMembers},a=function(e){var n=o(e);if(n)return n.model},c=function(e,n){var t=o(e);return t&&t.model&&t.model.find(function(e){return e.name===n})}},"./src/chat/selectors/messages.ts":function(e,n,t){"use strict";t.d(n,"j",function(){return a}),t.d(n,"i",function(){return c}),t.d(n,"d",function(){return u}),t.d(n,"e",function(){return d}),t.d(n,"f",function(){return l}),t.d(n,"g",function(){return f}),t.d(n,"h",function(){return m}),t.d(n,"b",function(){return h}),t.d(n,"c",function(){return b}),t.d(n,"a",function(){return p}),t.d(n,"k",function(){return v});var r=t("./src/lib/linkMatchers/customLinks.ts"),o=t("./src/chat/helpers/unreadCount.ts"),i=t("./src/chat/selectors/channels.ts"),s=t("./src/chat/selectors/promos.ts"),a=function(e){var n=Object(i.n)(e);return e.messages.unread.basicChannelCount-n||0},c=function(e){return e.messages.unread},u=function(e,n){if(n)return e.messages.models[n]},d=function(e,n){var t=u(e,n);return t&&t.sender},l=function(e,n){var t=d(e,n);return t&&t.userId},f=function(e,n){var t=u(e,n);return t&&t.messageData.type},m=function(e,n){return e.messages.pending[n]},h=function(e){var n=Object(i.k)(e);if(n&&n.firstMessageId)return e.messages.models[n.firstMessageId]},b=function(e,n){var t=Object(i.a)(e);return Object.keys(r.b).map(function(e){return t&&n.includes("@"+r.b[e])&&r.b[e]}).filter(function(e){return e})},p=function(e){var n=c(e),t=Object(s.b)(e);return Object(o.a)(n,t)},v=function(e){var n=c(e);return Object(o.b)(n)}},"./src/chat/selectors/promos.ts":function(e,n,t){"use strict";t.d(n,"b",function(){return r}),t.d(n,"c",function(){return o}),t.d(n,"a",function(){return i});var r=function(e){return e.promos},o=function(e){return e.promos.displaySubredditChatFtux},i=function(e){return e.promos.displayNSFWWarning}},"./src/chat/selectors/telemetry.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return c}),t.d(n,"d",function(){return u}),t.d(n,"e",function(){return d}),t.d(n,"b",function(){return l}),t.d(n,"c",function(){return f});var r=t("./node_modules/js-cookie/src/js.cookie.js"),o=t.n(r),i=t("./node_modules/url/url.js"),s=t.n(i),a=t("./src/chat/selectors/app.ts"),c=function(e){return{pageType:Object(a.d)(e)?"chat":"chat_fullscreen"}},u=function(e){var n=o.a.get("session_tracker");return{id:n?n.split(".")[0]:""}},d=function(e){return{id:e.user.account?e.user.account.id:"accessed_chat_without_login",isLoggedIn:!!e.user.account}},l=function(e){var n=e.platform.currentPage?e.platform.referrers[e.platform.currentPage.key]:void 0;if(n)return{domain:s.a.parse(n).hostname,url:n}},f=function(e){return{}}},"./src/chat/selectors/user.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return o}),t.d(n,"f",function(){return i}),t.d(n,"c",function(){return s}),t.d(n,"e",function(){return a}),t.d(n,"d",function(){return c});var r=function(e){return e.user.account.id},o=function(e){return e.user.account.name},i=function(e){return!!e.user.account},s=function(e){return e.user.session},a=function(e){return!!e.user.account&&e.user.account.seenSubredditChatFtux},c=function(e){return e.user.account}},"./src/chat/strings/index.ts":function(e,n,t){"use strict";var r=t("./node_modules/lodash/get.js"),o=t.n(r),i={app:{layout:{header:{title:{en:"Chats"},newChat:{en:"Start a new chat"},popout:{en:"Open chat in new window"},close:{en:"Close chat"},menu:{en:"Menu"},minimize:{en:"Minimize chat"}},contactList:{en:"Contact List"},currentConversation:{en:"Current Conversation"}},chat:{firstTimeUserExp:{label:{en:"New Feature"},title:{en:"Community Chat Rooms"},body:{en:"Some subreddits now have chat rooms. You’ve got early access - find\n          topics you’re interested in and join the conversation!"},button:{en:"Got it"}},actions:{new:{en:"New Chat"},invited:{en:"Let's go"}},list:{new:{en:"Wants to message you"},showMore:{en:"Show more"},collapse:{en:"Collapse"},prefix:{messageOwner:{en:"You:"},sentSnoomoji:{en:"Sent a Snoomoji"},sentPostLink:{en:"Shared a post"},sentTextLink:{en:"Shared a link"}}},ban:{header:{en:"Confirm Ban"},warning:{en:"Are you sure you want to ban <%= user %> from chat?"},userNameFallback:{en:"this user"},details:{en:"They won't be able to send messages in any chatrooms\n        or be invited to private chatrooms."},additionalDetails:{en:"You can also remove all messages they've\n        sent across all rooms or "},banFromSubreddit:{en:"ban from the subreddit."},banFromCommunity:{en:"Also ban from community"},removeAllMessages:{en:"Remove all messages"}},block:{warning:{en:"Are you sure you want to block this user?"},header:{en:"Block"},details:{en:"You will no longer see their comments, posts,\n          and messages. They will not know that you've blocked them.\n          You will no longer get notifications from this user."},apiError:"Something went wrong. Please try again later.",apiSuccess:"User has been successfully blocked."},channels:{addGroupMembers:{en:"You can add %0 more Redditors"},addToGroup:{en:"Add to group"},addToRoom:{en:"Add to room"},chats:{en:"Chats"},createGroup:{en:"Create Group"},groupName:{en:"Group name (required)"},groupMembers:{en:"group members"},maxGroupSize:{en:"Maximum group size reached"},loading:{en:"Loading channels..."},requests:{en:"Requests"},renameGroup:{en:"Rename group"},rooms:{en:"Please check back for rooms soon!"}},privateChannel:{title:{en:"is a private community"},description:{en:"The moderators in this\n          community have set it to private. You must be a\n          moderator or approved submitter to join this room."}},contactList:{to:{en:"To:"},invalidUser:{en:"User doesn't exist"},potentialsHeader:{en:"Click to add"},existingGroupContact:{en:"already in group"},existingRoomContact:{en:"already in room"},blockedContact:{en:"blocked"}},delete:{warning:{en:"Are you sure you want to delete this message?"},title:{en:"Delete message"},details:{en:"You can't undo this."}},inviteConfirmation:{basicTitle:{en:"Invite users to chat"},roomTitle:{en:"Invite users to room"},basicDetails:{en:"Invited users will have access to the\n          chat history of this conversation."},roomDetails:{en:"Invited users will have access to the chat room."}},nsfwWarning:{title:{en:"NSFW User"},details:{en:"One or more users in this chat are marked as NSFW\n          (not safe for work), which means they tend to post explicit content\n          elsewhere on Reddit. This doesn't necessarily mean that the content\n          of this chat is explicit."}},leave:{title:{en:"Are you sure"},groupSubHeader:{en:"Leave group chat?"},roomSubHeader:{en:"Leave Room?"},groupDetails:{en:"You will be removed from the group and no longer receive new messages.\n          You will not be able to join this group again unless you receive another invite."},roomDetails:{en:"You will be removed from the room and no longer receive new messages."}},lock:{title:{en:"Are you sure"},roomSubHeader:{en:"Lock Room?"},roomDetails:{en:"No one in this room will be able to send messages in while it is locked."},lockerText:{en:"This chat has been locked."}},message:{placeholder:{en:"Enter text here…"},failedToSend:{en:"Failed to send"},dropdown:{options:{addToGroup:{en:"Add to group"},addToRoom:{en:"Add to Room"},profile:{en:"View Profile"},block:{en:"Block"},members:{en:"View members"},leave:{en:"Leave group"},leaveRoom:{en:"Leave room"},lockRoom:{en:"Lock room"},unlockRoom:{en:"Unlock room"},renameGroup:{en:"Rename group"},copyLink:{en:"Copy link"},muteChannel:{en:"Disable notification badging"},unmuteChannel:{en:"Enable notification badging"}}},pickers:{snoomoji:{en:"Choose Snoomoji"},snoomojiLoading:{en:"Loading snoomoji..."},userlistLoading:{en:"Loading members..."},memberNotFound:{en:"Member not found!"}},timeStamp:{now:{en:"Now"},today:{en:"Today"},yesterday:{en:"Yesterday"}}},messageList:{loading:{en:"Loading history..."},loadingError:{en:"Something went wrong. Please try again."},members:{en:"Members"}},request:{karma:{en:"karma"},header:{en:"Chat Request"},decline:{title:{en:"Decline invite?"},details:{en:"This chat will be deleted, and this person will not be notified\n            that you've declined their request."}},groupHeader:{en:"Group invite"},redditor:{en:"redditor for"},details:{en:"Accept their request if you'd like to continue the\n          conversation. We won't notify them if you decline."},blocked:{warning:{en:"Heads up: you previously blocked\n            at least one person in this group."},details:{en:"If you join, you'll be able to see any\n            messages they send. They'll remain blocked\n            on the rest of Reddit."},label:{en:"Blocked"}},nsfw:{en:"NSFW"},preview:{en:"Preview of this chat"},defaultTitle:{en:"group"}},emptyState:{info:{en:"All the direct chats that you're in will show up here"},startChatting:{en:"Start chatting"},title:{en:"Start a direct chat"},main:{en:"You can start a new direct chat with the button below or from someone's profile"}},beta:{title:{en:"You're invited. Try out Reddit Chat."},main:{en:"Start a real-time chat with another redditor.\n          We're beta testing this feature, so please share your feedback by chatting u/reddit_chat_feedback."}},members:{dropdown:{options:{ban:{en:"Ban"},block:{en:"Block"},kick:{en:"Kick"},report:{en:"Report"}}},loading:{en:"Loading members..."}},typingIndicator:{oneUser:{en:"<%= user %> is typing..."},twoUsers:{en:"<%= firstUser %> and <%= secondUser %> are typing..."},severalUsers:{en:"Several people are typing..."},directChannelUser:{en:"is typing..."}},report:{title:{en:"Reason for report"},reasons:{threats:{en:"Threatens, harrasses, or bullies"},violence:{en:"It threatens violence or physical harm"},personal:{en:"It’s personal and confidential information"},impersonation:{en:"Impersonation"},spam:{en:"This is spam"},minorSexualization:{en:"It’s sexual or suggestive content involving minors"},offensive:{en:"It’s rude, vulgar or offensive"},copyright:{en:"It infringes my copyright"},trademark:{en:"It infringes my trademark rights"},pornography:{en:"It’s involuntary pornography"},prohibited:{en:"It’s a transaction for prohibited goods or services"},harassment:{en:"It’s targeted harassment"}}},kick:{title:{en:"Confirm Kick"},duration:{tenMinutes:{en:"10 minutes"},oneHour:{en:"1 hour"},oneDay:{en:"1 day"},threeDays:{en:"3 days"}},headerText:{en:"Are you sure you want to kick <%= user %> from this room?"},headerSubText:{en:"They'll be able to join again once the kick duration is over."},durationHeader:{en:"Kick Duration"}},intro:{en:"This is the start of a beautiful thing. Say something nice, or share a cat fact."},user:{snoovatar:{en:"Snoovatar"}},subredditChannel:{joinedRooms:{en:"Joined Rooms"},blankState:{en:"Community chatrooms that you join will show up here."},recommendedHeader:{title:{en:"Recommended Rooms"},subText:{en:"Also check out"}},inviteHeader:{en:"Invites"},members:{en:"Members"},joinHeader:{en:"Room Details"},joinDesc:{en:"Description"},nsfwHeader:{en:"NSFW community"},nsfwDesc:{en:"It may contain explicit or adult content."},nsfwWarning:{en:"Heads up: this community is labeled not safe for work. "},removedUserExperience:{default:{title:{en:"Removed"},header:{en:"You have been removed from this room."},description:{en:"You have been removed from this room."}},banned:{title:{en:"Banned"},header:{en:"You are banned from this room."},description:{en:"You are banned from this room and may not join until you are unbanned."}},kicked:{title:{en:"Kicked"},header:{en:"You are temporarily kicked from this room."},description:{en:"You are temporarily kicked from this room and may not join until you are no longer kicked."}}}},toast:{connectionClosed:{en:"Hmm, no internet?"},connectionPending:{en:"Looking for the internet..."},connectionOpen:{en:"Found the internet!"}}},button:{accept:{en:"Accept"},ban:{en:"Confirm Ban"},block:{en:"Block"},cancel:{en:"Cancel"},chat:{en:"Chat"},decline:{en:"Decline"},delete:{en:"Delete"},directs:{en:"Directs"},done:{en:"Done"},init:{en:"Start a chat"},joinRoom:{en:"Join Room"},kick:{en:"Kick"},leave:{en:"Leave"},lock:{en:"Lock"},resend:{en:"Resend"},rooms:{en:"Rooms"},submit:{en:"Submit"},save:{en:"Save"}},error:{genericPage:{en:"Sorry, something went wrong."},signIn:{en:"Sign in, please."}}}};function s(e,n){var t=[n,e].join(".");return o()(i,t,"")}t.d(n,"a",function(){return s})},"./src/chat/tracking/events/platform.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return a}),t.d(n,"b",function(){return c});var r=t("./src/chat/tracking/sendEvent.ts"),o=t("./src/telemetry/models/Event.ts"),i=t("./src/chat/tracking/fields/chat.ts"),s=t("./src/chat/tracking/fields/common.ts"),a=function(e,n,t,a){Object(r.a)(Object.assign({noun:n||"chat",source:t||o.b.Nav,action:a||o.a.Click,chat:Object.assign({},Object(i.g)(e),Object(i.u)(e),Object(i.p)(e),Object(i.z)(e),Object(i.A)(e))},Object(s.a)(e)))},c=function(e){Object(r.a)(Object.assign({source:o.b.Nav,action:o.a.View,noun:"orangered_06"},Object(s.a)(e)))}},"./src/chat/tracking/fields/chat.ts":function(e,n,t){"use strict";t.d(n,"g",function(){return m}),t.d(n,"A",function(){return h}),t.d(n,"e",function(){return b}),t.d(n,"c",function(){return p}),t.d(n,"E",function(){return v}),t.d(n,"D",function(){return g}),t.d(n,"p",function(){return y}),t.d(n,"x",function(){return C}),t.d(n,"k",function(){return j}),t.d(n,"C",function(){return O}),t.d(n,"z",function(){return k}),t.d(n,"s",function(){return I}),t.d(n,"o",function(){return w}),t.d(n,"r",function(){return S}),t.d(n,"q",function(){return _}),t.d(n,"n",function(){return x}),t.d(n,"t",function(){return T}),t.d(n,"B",function(){return M}),t.d(n,"f",function(){return D}),t.d(n,"h",function(){return P}),t.d(n,"j",function(){return E}),t.d(n,"i",function(){return A}),t.d(n,"b",function(){return U}),t.d(n,"w",function(){return F}),t.d(n,"u",function(){return N}),t.d(n,"a",function(){return L}),t.d(n,"d",function(){return R}),t.d(n,"l",function(){return B}),t.d(n,"y",function(){return G}),t.d(n,"m",function(){return H}),t.d(n,"v",function(){return W});var r,o=t("./node_modules/lodash/difference.js"),i=t.n(o),s=t("./node_modules/lodash/isEmpty.js"),a=t.n(s),c=t("./src/chat/models/Channel/index.ts"),u=t("./src/chat/selectors/channels.ts"),d=t("./src/chat/selectors/contacts.ts"),l=t("./src/chat/selectors/messages.ts");!function(e){e.Direct="direct",e.Group="group",e.SubredditPublic="room_public",e.SubredditPrivate="room_private"}(r||(r={}));var f=function(e,n){switch(e){case c.a.Direct:return r.Direct;case c.a.Group:return r.Group;case c.a.Subreddit:return n?r.SubredditPublic:r.SubredditPrivate}},m=function(e,n){var t=n?Object(u.h)(e,n):Object(u.k)(e);return t&&{id:t.channelSendbirdUrl}},h=function(e,n){var t=n?Object(u.h)(e,n):Object(u.m)(e);if(t){var r=t.type,o=t.isPublic,i=f(r,o);return i&&{type:i}}},b=function(e){return{type:Object(d.l)(e)>1?r.Group:r.Direct}},p=function(e){var n=Object(d.l)(e);return{number_members:n?n+1:0}},v=function(e,n){return{type:(n&&n.length)>2?r.Group:r.Direct}},g=function(e,n){return{number_members:O(e,n).members.length}},y=function(e){var n=Object(u.m)(e);return{number_members:n&&n.memberCount}},C=function(e,n){var t=Object(l.e)(e,n);return{sender_user_id:t&&t.userId||e.user.account.id}},j=function(e){var n=Object(u.k)(e);return{sender_user_id:n&&n.inviter&&n.inviter.id}},O=function(e,n){return n.push(e.user.account.id),{members:n}},k=function(e){return{number_unreads:Object(l.j)(e)}},I=function(e,n){var t=Object(u.m)(e),r=t&&t.unreadMessageCount;return{number_unreads:"number"==typeof n?n:r||0}},w=function(e){return{number_channels:Object(u.r)(e)}},S=function(e){return{number_channels:Object(u.s)(e)}},_=function(e,n){var t=Object(u.m)(e),r=t&&t.type===c.a.Subreddit;return void 0!==n?{number_pending_invites:n?Object(u.p)(e):Object(u.n)(e)}:{number_pending_invites:r?Object(u.p)(e):Object(u.n)(e)}},x=function(e,n){return{message_type:Object(l.g)(e,n)||"text"}},T=function(e,n){var t=Object(l.h)(e,n);return t&&{message_type:t.messageData.type}},M=function(e,n,t){var r=Object(d.a)(e,n);return{user_added_method:t||(r||null)}},D=function(e){var n=!1,t=Object(d.f)(e),r=Object(u.f)(e);return t&&t.length&&r&&r.length&&(n=!!r.find(function(e){return a()(i()(t.sort(),e.sort()))})),{existing_channel:n}},P=function(e){var n=Object(u.m)(e);return{invitation_id:n?n.channelSendbirdUrl:null}},E=function(e,n){if(n)return{invitation_type:n};var t=Object(u.m)(e),r=t&&f(t.type,t.isPublic);return r&&{invitation_type:r}},A=function(e){var n=Object(u.m)(e);return{invitation_timestamp:n?n.createdAt:null}},U=function(e){return{blocked_user_id:e||null}},F=function(e){return{reported_user_id:e||null}},N=function(e){var n=Object(u.m)(e),t=!(!n||n.type!==c.a.Direct),r=Object(u.v)(e),o=r&&r.length&&r[0].id;return{recipient_user_id:t?o:null}},L=function(e,n){var t=Object(d.b)(e,n);return{recipient_user_id:t?t.id:null}},R=function(e){var n=Object(d.k)(e);return{recipient_user_id:1===n.length?n[0]:null}},B=function(e){return{is_member:Object(u.P)(e)}},G=function(e){var n=Object(u.l)(e);return n&&{shown_history:!!n.lastMessage}},H=function(e){return{message_id:e}},W=function(e){return{report_reason:e}}},"./src/chat/tracking/fields/common.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return s});var r=t("./src/config.ts"),o=t("./src/chat/constants/container.ts"),i=t("./src/chat/selectors/telemetry.ts"),s=function(e){return{app:{name:e.meta.isRedesign||e.container.size===o.a.FULL?r.a.telemetry.appName.chat2x:r.a.telemetry.appName.chatR2},user:Object(i.e)(e),screen:Object(i.c)(e),session:Object(i.d)(e),referrer:Object(i.b)(e),actionInfo:Object(i.a)(e)}}},"./src/chat/tracking/sendEvent.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return i});var r=t("./src/telemetry/index.ts"),o=t("./src/chat/helpers/errors.ts"),i=function(e){if(e.session&&e.session.id)try{Object(r.a)(e)}catch(e){Object(o.b)("Error sending telemetry event: "+e)}}},"./src/lib/cache/index.ts":function(e,n,t){"use strict";var r=t("./src/lib/constants/index.ts"),o=t("./src/lib/redditId/index.ts"),i=t("./src/lib/logs/console.ts"),s=t("./src/lib/safeJSONParse/index.ts"),a=function(e){var n=void 0;try{if(!(n=localStorage.getItem(e)))return}catch(n){return void Object(i.a)(n,'localStorage cache get("'+e+'") error')}var t=Object(s.a)(n);if(t){if(!(t.expires<Date.now()))return t.value}else Object(i.a)(void 0,'localStorage cache get("'+e+'") error parsing: '+t)},c=function(e,n,t){var r={expires:"number"==typeof t?Date.now()+1e3*t:t.getTime(),value:n};try{return localStorage.setItem(e,JSON.stringify(r)),!0}catch(n){Object(i.a)(n,'localStorage cache set("'+e+'") error')}return!1};t.d(n,"a",function(){return u}),t.d(n,"c",function(){return d}),t.d(n,"b",function(){return l}),t.d(n,"d",function(){return f});r.K;var u=r.Wb,d=function(e,n,t){return e+"."+n+(t?"{"+Object(o.b)(t,r.Sa.ACCOUNT)+"}":"")},l=a,f=c},"./src/lib/convertToCamelCase/index.ts":function(e,n,t){"use strict";n.a=function(e){var n={};for(var t in e)n[t.replace(/_\w/g,function(e){return e[1].toUpperCase()})]=e[t];return n}},"./src/lib/linkMatchers/customLinks.ts":function(e,n,t){"use strict";var r,o,i=function(e,n){return function(t,r,o){if(r>e.length){var i=/\s/,s=t[r-e.length-1];if(!s.match(i)){if("/"!==s)return 0;var a=r-e.length-2;if(a>=0&&!t[a].match(i))return 0}}var c=t.slice(r);return n.test(c)?c.match(n)[0].length:0}};t.d(n,"b",function(){return r}),t.d(n,"c",function(){return o}),t.d(n,"d",function(){return a}),t.d(n,"a",function(){return c}),t.d(n,"e",function(){return u}),function(e){e.All="all",e.Here="here"}(r||(r={})),function(e){e.subreddit="r/",e.subredditFull="/r/",e.profile="u/",e.profileFull="/u/",e.mention="@"}(o||(o={}));var s,a=new RegExp("^/?(u|r)/","i"),c=new RegExp("^/?(u/|@)","i"),u=o.subreddit,d={subreddit:{prefix:o.subreddit,config:{validate:i(o.subreddit,/^[A-Za-z0-9][A-Za-z0-9_]{0,20}\b/),normalize:function(e){e.url="/r/"+e.url.replace(a,"")}}},profile:{prefix:o.profile,config:{validate:i(o.profile,/^[A-Za-z0-9_\-]{0,20}\b/),normalize:function(e){e.url="/user/"+e.url.replace(a,"")}}},mention:{prefix:o.mention,config:{validate:(s=function(e){return new RegExp("^"+r.All)},function(e,n,t){var r=e.slice(n),o=s(t.re);return o.test(r)?!(n>=2&&"@"===r[n-2])&&r.match(o)[0].length:0}),normalize:function(e){e.url=""}}}},l={subredditFull:{prefix:o.subredditFull,config:d.subreddit.config},profileFull:{prefix:o.profileFull,config:d.profile.config}},f=Object.assign({},d,l);n.f=f},"./src/lib/messageIframeParent/index.ts":function(e,n,t){"use strict";n.a=function(e,n){var t=e.type,r=e.data,o=void 0===r?{}:r;if(window.parent!==window){var i={type:n?t+"."+n:t,data:o};window.parent.postMessage(JSON.stringify(i),"*")}}},"./src/lib/safeJSONParse/index.ts":function(e,n,t){"use strict";function r(e){try{return JSON.parse(e)}catch(e){}}t.d(n,"a",function(){return r})},"./src/reddit/constants/theme.ts":function(e,n,t){"use strict";t.d(n,"b",function(){return r}),t.d(n,"a",function(){return o});var r={REDDIT:"REDDIT",NIGHT:"NIGHT"},o=r.REDDIT},"./src/reddit/models/Theme/index.ts":function(e,n,t){"use strict";var r=t("./node_modules/babel-runtime/helpers/defineProperty.js"),o=t.n(r),i=t("./node_modules/polished/dist/polished.es.js"),s=t("./src/reddit/constants/theme.ts"),a=t("./src/reddit/models/NewStructuredStyles/index.ts"),c=t("./src/reddit/models/StructuredStyles/index.ts");var u,d=t("./src/reddit/models/Theme/NewColorSystem/index.ts");t.d(n,"a",function(){return l}),t.d(n,"e",function(){return m}),t.d(n,"g",function(){return p}),t.d(n,"f",function(){return I}),t.d(n,"c",function(){return S}),t.d(n,"h",function(){return _}),t.d(n,"j",function(){return x}),t.d(n,"i",function(){return T}),t.d(n,"b",function(){return M}),t.d(n,"d",function(){return D});var l={small:64,medium:128,large:192},f={show:!0,hide:!1};function m(e,n,t){if("pretty"===t)return[e];if("slashtag"===t){if(n){var r=n.indexOf("/");return[n.slice(0,r+1),n.slice(r+1)]}return["r/",e]}return null}var h=function(e,n){var t=n/100,r=Object(i.d)(e);return r.alpha=t,Object(i.i)(r)},b=function(e,n){return Object(i.f)(e,n)},p=function(e,n,t){return n?[e,"url("+n+")",function(e){switch(e){case"cover":return"no-repeat center / cover";case"tiled":return"repeat center top";case"centered":return"no-repeat center top";default:return""}}(t)].filter(Boolean).join(" "):e},v=(c.c,{}),g={borderRadius:"24",customSize:"32",padding:"6",size:"24"},y=function(e){return"overlay"===e.menuPosition?e.bannerOverlayColor?h(e.bannerOverlayColor,e.menuBackgroundOpacity):h(e.primaryColor,e.menuBackgroundOpacity):"default"===e.menuPosition?e.menuBackgroundColor||b(.93,e.primaryColor):void 0},C=function(e){return"custom"===e.submenuBackgroundStyle?e.submenuBackgroundColor||b(.93,e.primaryColor):e.menuBackgroundColor||b(.93,e.primaryColor)},j=function(e){var n=l[e.bannerHeight];return"overlay"===e.menuPosition&&(n+=36),n},O=function(e){return parseInt(l[e])-16},k={shouldShowNSFWContent:!1},I=function(e){return e&&Object(i.b)(e)<.5?a.a.body:a.a.bodyText},w=function(e){return Object(i.b)(e)>.9?Object(i.a)(.1,e):e},S=x(c.c,k);function _(e){return e.bannerBackgroundColor||b(.6,e.primaryColor)||a.a.banner.backgroundColor}function x(e,n){return{subredditContext:n,communityTheme:{},newCommunityTheme:Object(d.e)({active:e.primaryColor,banner:{backgroundColor:_(e),backgroundImage:e.bannerBackgroundImage,backgroundImagePosition:e.bannerBackgroundImagePosition,communityNameFormat:e.bannerCommunityNameFormat,iconColor:e.primaryColor,iconImage:e.communityIcon,iconDimensions:"small"===e.bannerHeight?g:d.f,lineHeight:"small"===e.bannerHeight?"38":"60",height:j(e),positionedImage:e.bannerPositionedImage,positionedImageHeight:O(e.bannerHeight),positionedImageAlignment:e.bannerPositionedImagePosition,secondaryBannerPositionedImage:e.secondaryBannerPositionedImage,showCommunityIcon:f[e.bannerShowCommunityIcon]},button:e.highlightColor?w(e.highlightColor):a.a.button,canvas:e.backgroundColor||a.a.canvas,canvasImgUrl:e.backgroundImage,canvasImgPosition:e.backgroundImagePosition,linkText:e.highlightColor?w(e.highlightColor):a.a.linkText,menu:e.menuBackgroundColor||a.a.menu,menuActiveText:e.menuLinkColorActive||a.a.menuActiveText,menuInactiveText:e.menuLinkColorInactive||a.a.menuInactiveText,navBar:{activeLink:e.menuLinkColorActive||e.highlightColor,activeSubmenuCaret:e.primaryColor,activeSubmenuLink:e.primaryColor,backgroundColor:y(e)||"",backgroundImage:"overlay"!==e.menuPosition?e.menuBackgroundImage:void 0,hoverLink:e.menuLinkColorHover||e.highlightColor,inactiveLink:e.menuLinkColorInactive||e.primaryColor,inactiveSubmenuCaret:b(.6,e.primaryColor),inactiveSubmenuLink:b(.6,e.primaryColor),submenuBackgroundColor:C(e),useOverlay:"overlay"===e.menuPosition},post:e.postBackgroundColor&&!n.isOverlay?e.postBackgroundColor:a.a.post,titleText:e.postTitleColor&&!n.isOverlay?e.postTitleColor:a.a.titleText,voteText:{base:a.a.voteText.base,upvote:e.postUpvoteCountColor||a.a.voteText.upvote,downvote:e.postDownvoteCountColor||a.a.voteText.downvote},voteIcons:{upvoteActive:"custom"===e.postVoteIcons?e.postUpvoteIconActive:void 0,upvoteInactive:"custom"===e.postVoteIcons?e.postUpvoteIconInactive:void 0,downvoteActive:"custom"===e.postVoteIcons?e.postDownvoteIconActive:void 0,downvoteInactive:"custom"===e.postVoteIcons?e.postDownvoteIconInactive:void 0},widgetColors:{sidebarWidgetBackgroundColor:e.sidebarWidgetBackgroundColor||a.a.widgetColors.sidebarWidgetBackgroundColor,sidebarWidgetHeaderColor:e.sidebarWidgetHeaderColor||a.a.widgetColors.sidebarWidgetHeaderColor,lineColor:Object(d.d)(I(e.sidebarWidgetBackgroundColor))}},{backgroundImage:n.isOverlay?void 0:e.postBackgroundImage,backgroundImagePosition:e.postBackgroundImagePosition,placeholderImage:e.postPlaceholderImage,placeholderImagePosition:e.postPlaceholderImagePosition},!1),redditTheme:v,newRedditTheme:Object(d.e)(a.a,{},!1)}}function T(e,n){return{subredditContext:n,communityTheme:{},newCommunityTheme:Object(d.e)({banner:{backgroundColor:Object(i.g)(.9,e.bannerBackgroundColor||b(.6,e.primaryColor)||a.b.banner.backgroundColor),backgroundImage:e.bannerBackgroundImage,backgroundImagePosition:e.bannerBackgroundImagePosition,communityNameFormat:e.bannerCommunityNameFormat,iconColor:e.primaryColor,iconImage:e.communityIcon,iconDimensions:"small"===e.bannerHeight?g:d.f,lineHeight:"small"===e.bannerHeight?"38":"60",height:j(e),positionedImage:e.bannerPositionedImage,positionedImageHeight:O(e.bannerHeight),positionedImageAlignment:e.bannerPositionedImagePosition,secondaryBannerPositionedImage:e.secondaryBannerPositionedImage,showCommunityIcon:f[e.bannerShowCommunityIcon]},voteIcons:{upvoteActive:"custom"===e.postVoteIcons?e.postUpvoteIconActive:void 0,upvoteInactive:"custom"===e.postVoteIcons?e.postUpvoteIconInactive:void 0,downvoteActive:"custom"===e.postVoteIcons?e.postDownvoteIconActive:void 0,downvoteInactive:"custom"===e.postVoteIcons?e.postDownvoteIconInactive:void 0},widgetColors:a.b.widgetColors},{backgroundImage:void 0,backgroundImagePosition:void 0,placeholderImage:e.postPlaceholderImage,placeholderImagePosition:e.postPlaceholderImagePosition},!0),redditTheme:v,newRedditTheme:Object(d.e)(a.b,{},!0)}}var M=T(c.c,k),D=(u={},o()(u,s.b.REDDIT,S),o()(u,s.b.NIGHT,M),u)}}]);
//# sourceMappingURL=Chat~Governance~Reddit~RedesignChat.25041133dc6430b5c74b.js.map